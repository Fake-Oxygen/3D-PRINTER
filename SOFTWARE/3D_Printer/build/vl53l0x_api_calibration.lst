ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 6
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"vl53l0x_api_calibration.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.global	refArrayQuadrants
  20              		.section	.data.refArrayQuadrants,"aw"
  21              		.align	2
  24              	refArrayQuadrants:
  25 0000 0A000000 		.word	10
  26 0004 05000000 		.word	5
  27 0008 00000000 		.word	0
  28 000c 05000000 		.word	5
  29              		.section	.text.VL53L0X_perform_xtalk_calibration,"ax",%progbits
  30              		.align	1
  31              		.global	VL53L0X_perform_xtalk_calibration
  32              		.syntax unified
  33              		.thumb
  34              		.thumb_func
  36              	VL53L0X_perform_xtalk_calibration:
  37              	.LFB324:
  38              		.file 1 "Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c"
   1:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** /*******************************************************************************
   2:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  Copyright © 2016, STMicroelectronics International N.V.
   3:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  All rights reserved.
   4:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
   5:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  Redistribution and use in source and binary forms, with or without
   6:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  modification, are permitted provided that the following conditions are met:
   7:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  * Redistributions of source code must retain the above copyright
   8:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer.
   9:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  * Redistributions in binary form must reproduce the above copyright
  10:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  notice, this list of conditions and the following disclaimer in the
  11:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  documentation and/or other materials provided with the distribution.
  12:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  * Neither the name of STMicroelectronics nor the
  13:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  names of its contributors may be used to endorse or promote products
  14:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  derived from this software without specific prior written permission.
  15:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  16:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
  17:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
  18:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
  19:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  NON-INFRINGEMENT OF INTELLECTUAL PROPERTY RIGHTS ARE DISCLAIMED.
  20:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  IN NO EVENT SHALL STMICROELECTRONICS INTERNATIONAL N.V. BE LIABLE FOR ANY
  21:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
  22:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 2


  23:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
  24:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
  25:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  26:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  27:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c ****  ******************************************************************************/
  28:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  29:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #include "vl53l0x_api.h"
  30:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #include "vl53l0x_api_core.h"
  31:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #include "vl53l0x_api_calibration.h"
  32:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  33:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #ifndef __KERNEL__
  34:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #include <stdlib.h>
  35:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #endif
  36:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  37:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_START(fmt, ...) \
  38:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_START(TRACE_MODULE_API, fmt, ##__VA_ARGS__)
  39:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END(status, ...) \
  40:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END(TRACE_MODULE_API, status, ##__VA_ARGS__)
  41:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define LOG_FUNCTION_END_FMT(status, fmt, ...) \
  42:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	_LOG_FUNCTION_END_FMT(TRACE_MODULE_API, status, fmt, ##__VA_ARGS__)
  43:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  44:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_0  0
  45:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_5  5
  46:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** #define REF_ARRAY_SPAD_10 10
  47:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  48:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** uint32_t refArrayQuadrants[4] = {REF_ARRAY_SPAD_10, REF_ARRAY_SPAD_5,
  49:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		REF_ARRAY_SPAD_0, REF_ARRAY_SPAD_5 };
  50:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  51:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_xtalk_calibration(VL53L0X_DEV Dev,
  52:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			FixPoint1616_t XTalkCalDistance,
  53:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			FixPoint1616_t *pXTalkCompensationRateMegaCps)
  54:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
  39              		.loc 1 54 1
  40              		.cfi_startproc
  41              		@ args = 0, pretend = 0, frame = 96
  42              		@ frame_needed = 1, uses_anonymous_args = 0
  43 0000 80B5     		push	{r7, lr}
  44              		.cfi_def_cfa_offset 8
  45              		.cfi_offset 7, -8
  46              		.cfi_offset 14, -4
  47 0002 98B0     		sub	sp, sp, #96
  48              		.cfi_def_cfa_offset 104
  49 0004 00AF     		add	r7, sp, #0
  50              		.cfi_def_cfa_register 7
  51 0006 F860     		str	r0, [r7, #12]
  52 0008 B960     		str	r1, [r7, #8]
  53 000a 7A60     		str	r2, [r7, #4]
  55:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
  54              		.loc 1 55 16
  55 000c 0023     		movs	r3, #0
  56 000e 87F85F30 		strb	r3, [r7, #95]
  56:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
  57              		.loc 1 56 11
  58 0012 0023     		movs	r3, #0
  59 0014 A7F85C30 		strh	r3, [r7, #92]	@ movhi
  57:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t sum_spads = 0;
  60              		.loc 1 57 11
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 3


  61 0018 0023     		movs	r3, #0
  62 001a A7F85A30 		strh	r3, [r7, #90]	@ movhi
  58:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t sum_signalRate = 0;
  63              		.loc 1 58 17
  64 001e 0023     		movs	r3, #0
  65 0020 7B65     		str	r3, [r7, #84]
  59:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
  66              		.loc 1 59 17
  67 0022 0023     		movs	r3, #0
  68 0024 3B65     		str	r3, [r7, #80]
  60:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t xtalk_meas = 0;
  69              		.loc 1 60 10
  70 0026 0023     		movs	r3, #0
  71 0028 87F84F30 		strb	r3, [r7, #79]
  61:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
  62:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanSignalRate;
  63:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRange;
  64:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t xTalkStoredMeanRtnSpads;
  65:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t signalXTalkTotalPerSpad;
  66:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t xTalkStoredMeanRtnSpadsAsInt;
  67:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t xTalkCalDistanceAsInt;
  68:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t XTalkCompensationRateMegaCps;
  69:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  70:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (XTalkCalDistance <= 0)
  72              		.loc 1 70 5
  73 002c BB68     		ldr	r3, [r7, #8]
  74 002e 002B     		cmp	r3, #0
  75 0030 02D1     		bne	.L2
  71:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
  76              		.loc 1 71 10
  77 0032 FC23     		movs	r3, #252
  78 0034 87F85F30 		strb	r3, [r7, #95]
  79              	.L2:
  72:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  73:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Disable the XTalk compensation */
  74:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
  80              		.loc 1 74 5
  81 0038 97F95F30 		ldrsb	r3, [r7, #95]
  82 003c 002B     		cmp	r3, #0
  83 003e 06D1     		bne	.L3
  75:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetXTalkCompensationEnable(Dev, 0);
  84              		.loc 1 75 12
  85 0040 0021     		movs	r1, #0
  86 0042 F868     		ldr	r0, [r7, #12]
  87 0044 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
  88 0048 0346     		mov	r3, r0
  89 004a 87F85F30 		strb	r3, [r7, #95]
  90              	.L3:
  76:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  77:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
  78:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
  91              		.loc 1 78 5
  92 004e 97F95F30 		ldrsb	r3, [r7, #95]
  93 0052 002B     		cmp	r3, #0
  94 0054 07D1     		bne	.L4
  79:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
  95              		.loc 1 79 12
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 4


  96 0056 0022     		movs	r2, #0
  97 0058 0321     		movs	r1, #3
  98 005a F868     		ldr	r0, [r7, #12]
  99 005c FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 100 0060 0346     		mov	r3, r0
 101 0062 87F85F30 		strb	r3, [r7, #95]
 102              	.L4:
  80:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
  81:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
  82:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  83:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
  84:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 103              		.loc 1 84 5
 104 0066 97F95F30 		ldrsb	r3, [r7, #95]
 105 006a 002B     		cmp	r3, #0
 106 006c 44D1     		bne	.L5
  85:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 107              		.loc 1 85 15
 108 006e 0023     		movs	r3, #0
 109 0070 A7F85C30 		strh	r3, [r7, #92]	@ movhi
  86:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		sum_spads = 0;
 110              		.loc 1 86 13
 111 0074 0023     		movs	r3, #0
 112 0076 A7F85A30 		strh	r3, [r7, #90]	@ movhi
  87:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		sum_signalRate = 0;
 113              		.loc 1 87 18
 114 007a 0023     		movs	r3, #0
 115 007c 7B65     		str	r3, [r7, #84]
  88:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		total_count = 0;
 116              		.loc 1 88 15
 117 007e 0023     		movs	r3, #0
 118 0080 3B65     		str	r3, [r7, #80]
  89:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		for (xtalk_meas = 0; xtalk_meas < 50; xtalk_meas++) {
 119              		.loc 1 89 19
 120 0082 0023     		movs	r3, #0
 121 0084 87F84F30 		strb	r3, [r7, #79]
 122              		.loc 1 89 3
 123 0088 2AE0     		b	.L6
 124              	.L10:
  90:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 125              		.loc 1 90 13
 126 008a 07F11403 		add	r3, r7, #20
 127 008e 1946     		mov	r1, r3
 128 0090 F868     		ldr	r0, [r7, #12]
 129 0092 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 130 0096 0346     		mov	r3, r0
 131 0098 87F85F30 		strb	r3, [r7, #95]
  91:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				&RangingMeasurementData);
  92:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  93:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 132              		.loc 1 93 7
 133 009c 97F95F30 		ldrsb	r3, [r7, #95]
 134 00a0 002B     		cmp	r3, #0
 135 00a2 22D1     		bne	.L17
  94:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
  95:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
  96:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 5


  97:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 136              		.loc 1 97 30
 137 00a4 97F82C30 		ldrb	r3, [r7, #44]	@ zero_extendqisi2
 138              		.loc 1 97 7
 139 00a8 002B     		cmp	r3, #0
 140 00aa 14D1     		bne	.L9
  98:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
  99:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 141              		.loc 1 99 28
 142 00ac BA8B     		ldrh	r2, [r7, #28]
  98:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 143              		.loc 1 98 17
 144 00ae B7F85C30 		ldrh	r3, [r7, #92]	@ movhi
 145 00b2 1344     		add	r3, r3, r2
 146 00b4 A7F85C30 		strh	r3, [r7, #92]	@ movhi
 100:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 101:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.SignalRateRtnMegaCps;
 147              		.loc 1 101 27
 148 00b8 3B6A     		ldr	r3, [r7, #32]
 100:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_signalRate = sum_signalRate +
 149              		.loc 1 100 20
 150 00ba 7A6D     		ldr	r2, [r7, #84]
 151 00bc 1344     		add	r3, r3, r2
 152 00be 7B65     		str	r3, [r7, #84]
 102:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 103:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				RangingMeasurementData.EffectiveSpadRtnCount
 153              		.loc 1 103 27
 154 00c0 3B8D     		ldrh	r3, [r7, #40]
 102:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 155              		.loc 1 102 27
 156 00c2 1B0A     		lsrs	r3, r3, #8
 157 00c4 9AB2     		uxth	r2, r3
 102:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_spads = sum_spads +
 158              		.loc 1 102 15
 159 00c6 B7F85A30 		ldrh	r3, [r7, #90]	@ movhi
 160 00ca 1344     		add	r3, r3, r2
 161 00cc A7F85A30 		strh	r3, [r7, #90]	@ movhi
 104:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					/ 256;
 105:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 162              		.loc 1 105 17
 163 00d0 3B6D     		ldr	r3, [r7, #80]
 164 00d2 0133     		adds	r3, r3, #1
 165 00d4 3B65     		str	r3, [r7, #80]
 166              	.L9:
  89:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 167              		.loc 1 89 51 discriminator 2
 168 00d6 97F84F30 		ldrb	r3, [r7, #79]	@ zero_extendqisi2
 169 00da 0133     		adds	r3, r3, #1
 170 00dc 87F84F30 		strb	r3, [r7, #79]
 171              	.L6:
  89:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 172              		.loc 1 89 35 discriminator 1
 173 00e0 97F84F30 		ldrb	r3, [r7, #79]	@ zero_extendqisi2
 174 00e4 312B     		cmp	r3, #49
 175 00e6 D0D9     		bls	.L10
 176 00e8 00E0     		b	.L8
 177              	.L17:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 6


  94:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 178              		.loc 1 94 5
 179 00ea 00BF     		nop
 180              	.L8:
 106:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 107:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 108:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 109:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* no valid values found */
 110:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 181              		.loc 1 110 6
 182 00ec 3B6D     		ldr	r3, [r7, #80]
 183 00ee 002B     		cmp	r3, #0
 184 00f0 02D1     		bne	.L5
 111:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 185              		.loc 1 111 11
 186 00f2 FA23     		movs	r3, #250
 187 00f4 87F85F30 		strb	r3, [r7, #95]
 188              	.L5:
 112:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 113:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 114:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 115:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 116:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 189              		.loc 1 116 5
 190 00f8 97F95F30 		ldrsb	r3, [r7, #95]
 191 00fc 002B     		cmp	r3, #0
 192 00fe 5DD1     		bne	.L11
 117:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
 118:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanSignalRate = sum_signalRate / total_count;
 193              		.loc 1 118 29
 194 0100 7A6D     		ldr	r2, [r7, #84]
 195 0102 3B6D     		ldr	r3, [r7, #80]
 196 0104 B2FBF3F3 		udiv	r3, r2, r3
 197 0108 7B64     		str	r3, [r7, #68]
 119:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 120:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			sum_ranging << 16) / total_count);
 198              		.loc 1 120 16
 199 010a B7F85C30 		ldrh	r3, [r7, #92]
 200 010e 1B04     		lsls	r3, r3, #16
 119:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 201              		.loc 1 119 43
 202 0110 1A46     		mov	r2, r3
 119:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRange = (FixPoint1616_t)((uint32_t)(
 203              		.loc 1 119 24
 204 0112 3B6D     		ldr	r3, [r7, #80]
 205 0114 B2FBF3F3 		udiv	r3, r2, r3
 206 0118 3B64     		str	r3, [r7, #64]
 121:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 122:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			sum_spads << 16) / total_count);
 207              		.loc 1 122 14
 208 011a B7F85A30 		ldrh	r3, [r7, #90]
 209 011e 1B04     		lsls	r3, r3, #16
 121:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 210              		.loc 1 121 46
 211 0120 1A46     		mov	r2, r3
 121:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpads = (FixPoint1616_t)((uint32_t)(
 212              		.loc 1 121 27
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 7


 213 0122 3B6D     		ldr	r3, [r7, #80]
 214 0124 B2FBF3F3 		udiv	r3, r2, r3
 215 0128 FB63     		str	r3, [r7, #60]
 123:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 124:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Round Mean Spads to Whole Number.
 125:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * Typically the calculated mean SPAD count is a whole number
 126:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * or very close to a whole
 127:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * number, therefore any truncation will not result in a
 128:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * significant loss in accuracy.
 129:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * Also, for a grey target at a typical distance of around
 130:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * 400mm, around 220 SPADs will
 131:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * be enabled, therefore, any truncation will result in a loss
 132:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * of accuracy of less than
 133:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * 0.5%.
 134:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 */
 135:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		xTalkStoredMeanRtnSpadsAsInt = (xTalkStoredMeanRtnSpads +
 216              		.loc 1 135 59
 217 012a FB6B     		ldr	r3, [r7, #60]
 218 012c 03F50043 		add	r3, r3, #32768
 219              		.loc 1 135 32
 220 0130 1B0C     		lsrs	r3, r3, #16
 221 0132 BB63     		str	r3, [r7, #56]
 136:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			0x8000) >> 16;
 137:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 138:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 139:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 140:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * is lost.*/
 141:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 xTalkCalDistanceAsInt = (XTalkCalDistance + 0x8000) >> 16;
 222              		.loc 1 141 46
 223 0134 BB68     		ldr	r3, [r7, #8]
 224 0136 03F50043 		add	r3, r3, #32768
 225              		.loc 1 141 26
 226 013a 1B0C     		lsrs	r3, r3, #16
 227 013c 7B63     		str	r3, [r7, #52]
 142:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 143:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (xTalkStoredMeanRtnSpadsAsInt == 0 ||
 228              		.loc 1 143 6
 229 013e BB6B     		ldr	r3, [r7, #56]
 230 0140 002B     		cmp	r3, #0
 231 0142 06D0     		beq	.L12
 232              		.loc 1 143 41 discriminator 1
 233 0144 7B6B     		ldr	r3, [r7, #52]
 234 0146 002B     		cmp	r3, #0
 235 0148 03D0     		beq	.L12
 144:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		   xTalkCalDistanceAsInt == 0 ||
 236              		.loc 1 144 33
 237 014a 3A6C     		ldr	r2, [r7, #64]
 238 014c BB68     		ldr	r3, [r7, #8]
 239 014e 9A42     		cmp	r2, r3
 240 0150 02D3     		bcc	.L13
 241              	.L12:
 145:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		   xTalkStoredMeanRange >= XTalkCalDistance) {
 146:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = 0;
 242              		.loc 1 146 33
 243 0152 0023     		movs	r3, #0
 244 0154 BB64     		str	r3, [r7, #72]
 245 0156 18E0     		b	.L14
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 8


 246              	.L13:
 147:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		} else {
 148:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Round Cal Distance to Whole Number.
 149:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			   Note that the cal distance is in mm, therefore no
 150:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			   resolution is lost.*/
 151:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			xTalkCalDistanceAsInt = (XTalkCalDistance +
 247              		.loc 1 151 46
 248 0158 BB68     		ldr	r3, [r7, #8]
 249 015a 03F50043 		add	r3, r3, #32768
 250              		.loc 1 151 26
 251 015e 1B0C     		lsrs	r3, r3, #16
 252 0160 7B63     		str	r3, [r7, #52]
 152:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				0x8000) >> 16;
 153:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 154:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Apply division by mean spad count early in the
 155:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * calculation to keep the numbers small.
 156:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * This ensures we can maintain a 32bit calculation.
 157:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * Fixed1616 / int := Fixed1616 */
 158:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad = (xTalkStoredMeanSignalRate) /
 253              		.loc 1 158 28
 254 0162 7A6C     		ldr	r2, [r7, #68]
 255 0164 BB6B     		ldr	r3, [r7, #56]
 256 0166 B2FBF3F3 		udiv	r3, r2, r3
 257 016a 3B63     		str	r3, [r7, #48]
 159:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				xTalkStoredMeanRtnSpadsAsInt;
 160:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 161:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Complete the calculation for total Signal XTalk per
 162:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * SPAD
 163:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * Fixed1616 * (Fixed1616 - Fixed1616/int) :=
 164:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * (2^16 * Fixed1616)
 165:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 */
 166:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			signalXTalkTotalPerSpad *= ((1 << 16) -
 167:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 258              		.loc 1 167 27
 259 016c 3A6C     		ldr	r2, [r7, #64]
 260 016e 7B6B     		ldr	r3, [r7, #52]
 261 0170 B2FBF3F3 		udiv	r3, r2, r3
 166:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 262              		.loc 1 166 42
 263 0174 C3F58032 		rsb	r2, r3, #65536
 166:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(xTalkStoredMeanRange / xTalkCalDistanceAsInt));
 264              		.loc 1 166 28
 265 0178 3B6B     		ldr	r3, [r7, #48]
 266 017a 02FB03F3 		mul	r3, r2, r3
 267 017e 3B63     		str	r3, [r7, #48]
 168:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 169:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Round from 2^16 * Fixed1616, to Fixed1616. */
 170:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			XTalkCompensationRateMegaCps = (signalXTalkTotalPerSpad
 171:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 268              		.loc 1 171 5
 269 0180 3B6B     		ldr	r3, [r7, #48]
 270 0182 03F50043 		add	r3, r3, #32768
 170:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				+ 0x8000) >> 16;
 271              		.loc 1 170 33
 272 0186 1B0C     		lsrs	r3, r3, #16
 273 0188 BB64     		str	r3, [r7, #72]
 274              	.L14:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 9


 172:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 173:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 174:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*pXTalkCompensationRateMegaCps = XTalkCompensationRateMegaCps;
 275              		.loc 1 174 34
 276 018a 7B68     		ldr	r3, [r7, #4]
 277 018c BA6C     		ldr	r2, [r7, #72]
 278 018e 1A60     		str	r2, [r3]
 175:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 176:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 177:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 279              		.loc 1 177 6
 280 0190 97F95F30 		ldrsb	r3, [r7, #95]
 281 0194 002B     		cmp	r3, #0
 282 0196 06D1     		bne	.L15
 178:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationEnable(Dev, 1);
 283              		.loc 1 178 13
 284 0198 0121     		movs	r1, #1
 285 019a F868     		ldr	r0, [r7, #12]
 286 019c FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationEnable
 287 01a0 0346     		mov	r3, r0
 288 01a2 87F85F30 		strb	r3, [r7, #95]
 289              	.L15:
 179:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 180:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Enable the XTalk compensation */
 181:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 290              		.loc 1 181 6
 291 01a6 97F95F30 		ldrsb	r3, [r7, #95]
 292 01aa 002B     		cmp	r3, #0
 293 01ac 06D1     		bne	.L11
 182:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetXTalkCompensationRateMegaCps(Dev,
 294              		.loc 1 182 13
 295 01ae B96C     		ldr	r1, [r7, #72]
 296 01b0 F868     		ldr	r0, [r7, #12]
 297 01b2 FFF7FEFF 		bl	VL53L0X_SetXTalkCompensationRateMegaCps
 298 01b6 0346     		mov	r3, r0
 299 01b8 87F85F30 		strb	r3, [r7, #95]
 300              	.L11:
 183:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					XTalkCompensationRateMegaCps);
 184:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 185:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 186:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 187:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 301              		.loc 1 187 9
 302 01bc 97F95F30 		ldrsb	r3, [r7, #95]
 188:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 303              		.loc 1 188 1
 304 01c0 1846     		mov	r0, r3
 305 01c2 6037     		adds	r7, r7, #96
 306              		.cfi_def_cfa_offset 8
 307 01c4 BD46     		mov	sp, r7
 308              		.cfi_def_cfa_register 13
 309              		@ sp needed
 310 01c6 80BD     		pop	{r7, pc}
 311              		.cfi_endproc
 312              	.LFE324:
 314              		.section	.text.VL53L0X_perform_offset_calibration,"ax",%progbits
 315              		.align	1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 10


 316              		.global	VL53L0X_perform_offset_calibration
 317              		.syntax unified
 318              		.thumb
 319              		.thumb_func
 321              	VL53L0X_perform_offset_calibration:
 322              	.LFB325:
 189:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 190:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_offset_calibration(VL53L0X_DEV Dev,
 191:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			FixPoint1616_t CalDistanceMilliMeter,
 192:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			int32_t *pOffsetMicroMeter)
 193:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 323              		.loc 1 193 1
 324              		.cfi_startproc
 325              		@ args = 0, pretend = 0, frame = 72
 326              		@ frame_needed = 1, uses_anonymous_args = 0
 327 0000 80B5     		push	{r7, lr}
 328              		.cfi_def_cfa_offset 8
 329              		.cfi_offset 7, -8
 330              		.cfi_offset 14, -4
 331 0002 92B0     		sub	sp, sp, #72
 332              		.cfi_def_cfa_offset 80
 333 0004 00AF     		add	r7, sp, #0
 334              		.cfi_def_cfa_register 7
 335 0006 F860     		str	r0, [r7, #12]
 336 0008 B960     		str	r1, [r7, #8]
 337 000a 7A60     		str	r2, [r7, #4]
 194:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 338              		.loc 1 194 16
 339 000c 0023     		movs	r3, #0
 340 000e 87F84730 		strb	r3, [r7, #71]
 195:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t sum_ranging = 0;
 341              		.loc 1 195 11
 342 0012 0023     		movs	r3, #0
 343 0014 A7F84430 		strh	r3, [r7, #68]	@ movhi
 196:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t total_count = 0;
 344              		.loc 1 196 17
 345 0018 0023     		movs	r3, #0
 346 001a 3B64     		str	r3, [r7, #64]
 197:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t RangingMeasurementData;
 198:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	FixPoint1616_t StoredMeanRange;
 199:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t StoredMeanRangeAsInt;
 200:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t CalDistanceAsInt_mm;
 201:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t SequenceStepEnabled;
 202:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int meas = 0;
 347              		.loc 1 202 6
 348 001c 0023     		movs	r3, #0
 349 001e FB63     		str	r3, [r7, #60]
 203:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 204:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (CalDistanceMilliMeter <= 0)
 350              		.loc 1 204 5
 351 0020 BB68     		ldr	r3, [r7, #8]
 352 0022 002B     		cmp	r3, #0
 353 0024 02D1     		bne	.L19
 205:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ERROR_INVALID_PARAMS;
 354              		.loc 1 205 10
 355 0026 FC23     		movs	r3, #252
 356 0028 87F84730 		strb	r3, [r7, #71]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 11


 357              	.L19:
 206:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 207:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 358              		.loc 1 207 5
 359 002c 97F94730 		ldrsb	r3, [r7, #71]
 360 0030 002B     		cmp	r3, #0
 361 0032 06D1     		bne	.L20
 208:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev, 0);
 362              		.loc 1 208 12
 363 0034 0021     		movs	r1, #0
 364 0036 F868     		ldr	r0, [r7, #12]
 365 0038 FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 366 003c 0346     		mov	r3, r0
 367 003e 87F84730 		strb	r3, [r7, #71]
 368              	.L20:
 209:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 210:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 211:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Get the value of the TCC */
 212:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 369              		.loc 1 212 5
 370 0042 97F94730 		ldrsb	r3, [r7, #71]
 371 0046 002B     		cmp	r3, #0
 372 0048 09D1     		bne	.L21
 213:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetSequenceStepEnable(Dev,
 373              		.loc 1 213 12
 374 004a 07F11303 		add	r3, r7, #19
 375 004e 1A46     		mov	r2, r3
 376 0050 0021     		movs	r1, #0
 377 0052 F868     		ldr	r0, [r7, #12]
 378 0054 FFF7FEFF 		bl	VL53L0X_GetSequenceStepEnable
 379 0058 0346     		mov	r3, r0
 380 005a 87F84730 		strb	r3, [r7, #71]
 381              	.L21:
 214:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, &SequenceStepEnabled);
 215:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 216:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 217:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Disable the TCC */
 218:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 382              		.loc 1 218 5
 383 005e 97F94730 		ldrsb	r3, [r7, #71]
 384 0062 002B     		cmp	r3, #0
 385 0064 07D1     		bne	.L22
 219:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetSequenceStepEnable(Dev,
 386              		.loc 1 219 12
 387 0066 0022     		movs	r2, #0
 388 0068 0021     		movs	r1, #0
 389 006a F868     		ldr	r0, [r7, #12]
 390 006c FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 391 0070 0346     		mov	r3, r0
 392 0072 87F84730 		strb	r3, [r7, #71]
 393              	.L22:
 220:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_SEQUENCESTEP_TCC, 0);
 221:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 222:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 223:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Disable the RIT */
 224:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 394              		.loc 1 224 5
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 12


 395 0076 97F94730 		ldrsb	r3, [r7, #71]
 396 007a 002B     		cmp	r3, #0
 397 007c 07D1     		bne	.L23
 225:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetLimitCheckEnable(Dev,
 398              		.loc 1 225 12
 399 007e 0022     		movs	r2, #0
 400 0080 0321     		movs	r1, #3
 401 0082 F868     		ldr	r0, [r7, #12]
 402 0084 FFF7FEFF 		bl	VL53L0X_SetLimitCheckEnable
 403 0088 0346     		mov	r3, r0
 404 008a 87F84730 		strb	r3, [r7, #71]
 405              	.L23:
 226:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_CHECKENABLE_RANGE_IGNORE_THRESHOLD, 0);
 227:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 228:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Perform 50 measurements and compute the averages */
 229:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 406              		.loc 1 229 5
 407 008e 97F94730 		ldrsb	r3, [r7, #71]
 408 0092 002B     		cmp	r3, #0
 409 0094 2FD1     		bne	.L24
 230:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		sum_ranging = 0;
 410              		.loc 1 230 15
 411 0096 0023     		movs	r3, #0
 412 0098 A7F84430 		strh	r3, [r7, #68]	@ movhi
 231:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		total_count = 0;
 413              		.loc 1 231 15
 414 009c 0023     		movs	r3, #0
 415 009e 3B64     		str	r3, [r7, #64]
 232:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		for (meas = 0; meas < 50; meas++) {
 416              		.loc 1 232 13
 417 00a0 0023     		movs	r3, #0
 418 00a2 FB63     		str	r3, [r7, #60]
 419              		.loc 1 232 3
 420 00a4 1CE0     		b	.L25
 421              	.L29:
 233:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 422              		.loc 1 233 13
 423 00a6 07F11403 		add	r3, r7, #20
 424 00aa 1946     		mov	r1, r3
 425 00ac F868     		ldr	r0, [r7, #12]
 426 00ae FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 427 00b2 0346     		mov	r3, r0
 428 00b4 87F84730 		strb	r3, [r7, #71]
 234:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					&RangingMeasurementData);
 235:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 236:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 429              		.loc 1 236 7
 430 00b8 97F94730 		ldrsb	r3, [r7, #71]
 431 00bc 002B     		cmp	r3, #0
 432 00be 13D1     		bne	.L33
 237:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 238:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 239:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* The range is valid when RangeStatus = 0 */
 240:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (RangingMeasurementData.RangeStatus == 0) {
 433              		.loc 1 240 30
 434 00c0 97F82C30 		ldrb	r3, [r7, #44]	@ zero_extendqisi2
 435              		.loc 1 240 7
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 13


 436 00c4 002B     		cmp	r3, #0
 437 00c6 08D1     		bne	.L28
 241:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 242:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					RangingMeasurementData.RangeMilliMeter;
 438              		.loc 1 242 28
 439 00c8 BA8B     		ldrh	r2, [r7, #28]
 241:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				sum_ranging = sum_ranging +
 440              		.loc 1 241 17
 441 00ca B7F84430 		ldrh	r3, [r7, #68]	@ movhi
 442 00ce 1344     		add	r3, r3, r2
 443 00d0 A7F84430 		strh	r3, [r7, #68]	@ movhi
 243:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				total_count = total_count + 1;
 444              		.loc 1 243 17
 445 00d4 3B6C     		ldr	r3, [r7, #64]
 446 00d6 0133     		adds	r3, r3, #1
 447 00d8 3B64     		str	r3, [r7, #64]
 448              	.L28:
 232:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 449              		.loc 1 232 33 discriminator 2
 450 00da FB6B     		ldr	r3, [r7, #60]
 451 00dc 0133     		adds	r3, r3, #1
 452 00de FB63     		str	r3, [r7, #60]
 453              	.L25:
 232:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 454              		.loc 1 232 23 discriminator 1
 455 00e0 FB6B     		ldr	r3, [r7, #60]
 456 00e2 312B     		cmp	r3, #49
 457 00e4 DFDD     		ble	.L29
 458 00e6 00E0     		b	.L27
 459              	.L33:
 237:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 460              		.loc 1 237 5
 461 00e8 00BF     		nop
 462              	.L27:
 244:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 245:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 246:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 247:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* no valid values found */
 248:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (total_count == 0)
 463              		.loc 1 248 6
 464 00ea 3B6C     		ldr	r3, [r7, #64]
 465 00ec 002B     		cmp	r3, #0
 466 00ee 02D1     		bne	.L24
 249:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_ERROR_RANGE_ERROR;
 467              		.loc 1 249 11
 468 00f0 FA23     		movs	r3, #250
 469 00f2 87F84730 		strb	r3, [r7, #71]
 470              	.L24:
 250:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 251:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 252:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 253:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 471              		.loc 1 253 5
 472 00f6 97F94730 		ldrsb	r3, [r7, #71]
 473 00fa 002B     		cmp	r3, #0
 474 00fc 2CD1     		bne	.L30
 254:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* FixPoint1616_t / uint16_t = FixPoint1616_t */
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 14


 255:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		StoredMeanRange = (FixPoint1616_t)((uint32_t)(sum_ranging << 16)
 475              		.loc 1 255 61
 476 00fe B7F84430 		ldrh	r3, [r7, #68]
 477 0102 1B04     		lsls	r3, r3, #16
 478              		.loc 1 255 38
 479 0104 1A46     		mov	r2, r3
 480              		.loc 1 255 19
 481 0106 3B6C     		ldr	r3, [r7, #64]
 482 0108 B2FBF3F3 		udiv	r3, r2, r3
 483 010c BB63     		str	r3, [r7, #56]
 256:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/ total_count);
 257:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 258:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		StoredMeanRangeAsInt = (StoredMeanRange + 0x8000) >> 16;
 484              		.loc 1 258 43
 485 010e BB6B     		ldr	r3, [r7, #56]
 486 0110 03F50043 		add	r3, r3, #32768
 487              		.loc 1 258 24
 488 0114 1B0C     		lsrs	r3, r3, #16
 489 0116 7B63     		str	r3, [r7, #52]
 259:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 260:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Round Cal Distance to Whole Number.
 261:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * Note that the cal distance is in mm, therefore no resolution
 262:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * is lost.*/
 263:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 CalDistanceAsInt_mm = (CalDistanceMilliMeter + 0x8000) >> 16;
 490              		.loc 1 263 49
 491 0118 BB68     		ldr	r3, [r7, #8]
 492 011a 03F50043 		add	r3, r3, #32768
 493              		.loc 1 263 24
 494 011e 1B0C     		lsrs	r3, r3, #16
 495 0120 3B63     		str	r3, [r7, #48]
 264:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 265:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 *pOffsetMicroMeter = (CalDistanceAsInt_mm -
 496              		.loc 1 265 46
 497 0122 3A6B     		ldr	r2, [r7, #48]
 498 0124 7B6B     		ldr	r3, [r7, #52]
 499 0126 D31A     		subs	r3, r2, r3
 266:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 500              		.loc 1 266 28
 501 0128 4FF47A72 		mov	r2, #1000
 502 012c 02FB03F3 		mul	r3, r2, r3
 503 0130 1A46     		mov	r2, r3
 265:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 StoredMeanRangeAsInt) * 1000;
 504              		.loc 1 265 23
 505 0132 7B68     		ldr	r3, [r7, #4]
 506 0134 1A60     		str	r2, [r3]
 267:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 268:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Apply the calculated offset */
 269:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 507              		.loc 1 269 6
 508 0136 97F94730 		ldrsb	r3, [r7, #71]
 509 013a 002B     		cmp	r3, #0
 510 013c 0CD1     		bne	.L30
 270:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 511              		.loc 1 270 4
 512 013e 7B68     		ldr	r3, [r7, #4]
 513 0140 1A68     		ldr	r2, [r3]
 514 0142 FB68     		ldr	r3, [r7, #12]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 15


 515 0144 5A62     		str	r2, [r3, #36]
 271:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 272:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 516              		.loc 1 272 13
 517 0146 7B68     		ldr	r3, [r7, #4]
 518 0148 1B68     		ldr	r3, [r3]
 519 014a 1946     		mov	r1, r3
 520 014c F868     		ldr	r0, [r7, #12]
 521 014e FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 522 0152 0346     		mov	r3, r0
 523 0154 87F84730 		strb	r3, [r7, #71]
 524              	.L30:
 273:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					*pOffsetMicroMeter);
 274:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 275:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 276:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 277:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 278:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Restore the TCC */
 279:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 525              		.loc 1 279 5
 526 0158 97F94730 		ldrsb	r3, [r7, #71]
 527 015c 002B     		cmp	r3, #0
 528 015e 0AD1     		bne	.L31
 280:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (SequenceStepEnabled != 0)
 529              		.loc 1 280 27
 530 0160 FB7C     		ldrb	r3, [r7, #19]	@ zero_extendqisi2
 531              		.loc 1 280 6
 532 0162 002B     		cmp	r3, #0
 533 0164 07D0     		beq	.L31
 281:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = VL53L0X_SetSequenceStepEnable(Dev,
 534              		.loc 1 281 13
 535 0166 0122     		movs	r2, #1
 536 0168 0021     		movs	r1, #0
 537 016a F868     		ldr	r0, [r7, #12]
 538 016c FFF7FEFF 		bl	VL53L0X_SetSequenceStepEnable
 539 0170 0346     		mov	r3, r0
 540 0172 87F84730 		strb	r3, [r7, #71]
 541              	.L31:
 282:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					VL53L0X_SEQUENCESTEP_TCC, 1);
 283:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 284:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 285:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 542              		.loc 1 285 9
 543 0176 97F94730 		ldrsb	r3, [r7, #71]
 286:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 544              		.loc 1 286 1
 545 017a 1846     		mov	r0, r3
 546 017c 4837     		adds	r7, r7, #72
 547              		.cfi_def_cfa_offset 8
 548 017e BD46     		mov	sp, r7
 549              		.cfi_def_cfa_register 13
 550              		@ sp needed
 551 0180 80BD     		pop	{r7, pc}
 552              		.cfi_endproc
 553              	.LFE325:
 555              		.section	.text.VL53L0X_set_offset_calibration_data_micro_meter,"ax",%progbits
 556              		.align	1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 16


 557              		.global	VL53L0X_set_offset_calibration_data_micro_meter
 558              		.syntax unified
 559              		.thumb
 560              		.thumb_func
 562              	VL53L0X_set_offset_calibration_data_micro_meter:
 563              	.LFB326:
 287:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 288:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 289:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 290:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		int32_t OffsetCalibrationDataMicroMeter)
 291:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 564              		.loc 1 291 1
 565              		.cfi_startproc
 566              		@ args = 0, pretend = 0, frame = 32
 567              		@ frame_needed = 1, uses_anonymous_args = 0
 568 0000 80B5     		push	{r7, lr}
 569              		.cfi_def_cfa_offset 8
 570              		.cfi_offset 7, -8
 571              		.cfi_offset 14, -4
 572 0002 88B0     		sub	sp, sp, #32
 573              		.cfi_def_cfa_offset 40
 574 0004 00AF     		add	r7, sp, #0
 575              		.cfi_def_cfa_register 7
 576 0006 7860     		str	r0, [r7, #4]
 577 0008 3960     		str	r1, [r7]
 292:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 578              		.loc 1 292 16
 579 000a 0023     		movs	r3, #0
 580 000c FB76     		strb	r3, [r7, #27]
 293:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t cMaxOffsetMicroMeter = 511000;
 581              		.loc 1 293 10
 582 000e 1D4B     		ldr	r3, .L40
 583 0010 7B61     		str	r3, [r7, #20]
 294:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t cMinOffsetMicroMeter = -512000;
 584              		.loc 1 294 10
 585 0012 1D4B     		ldr	r3, .L40+4
 586 0014 3B61     		str	r3, [r7, #16]
 295:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 587              		.loc 1 295 10
 588 0016 4FF48053 		mov	r3, #4096
 589 001a FB81     		strh	r3, [r7, #14]	@ movhi
 296:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t encodedOffsetVal;
 297:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 298:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_START("");
 299:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 300:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter > cMaxOffsetMicroMeter)
 590              		.loc 1 300 5
 591 001c 3A68     		ldr	r2, [r7]
 592 001e 7B69     		ldr	r3, [r7, #20]
 593 0020 9A42     		cmp	r2, r3
 594 0022 02DD     		ble	.L35
 301:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMaxOffsetMicroMeter;
 595              		.loc 1 301 35
 596 0024 7B69     		ldr	r3, [r7, #20]
 597 0026 3B60     		str	r3, [r7]
 598 0028 05E0     		b	.L36
 599              	.L35:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 17


 302:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	else if (OffsetCalibrationDataMicroMeter < cMinOffsetMicroMeter)
 600              		.loc 1 302 10
 601 002a 3A68     		ldr	r2, [r7]
 602 002c 3B69     		ldr	r3, [r7, #16]
 603 002e 9A42     		cmp	r2, r3
 604 0030 01DA     		bge	.L36
 303:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		OffsetCalibrationDataMicroMeter = cMinOffsetMicroMeter;
 605              		.loc 1 303 35
 606 0032 3B69     		ldr	r3, [r7, #16]
 607 0034 3B60     		str	r3, [r7]
 608              	.L36:
 304:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 305:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* The offset register is 10.2 format and units are mm
 306:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * therefore conversion is applied by a division of
 307:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * 250.
 308:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 309:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (OffsetCalibrationDataMicroMeter >= 0) {
 609              		.loc 1 309 5
 610 0036 3B68     		ldr	r3, [r7]
 611 0038 002B     		cmp	r3, #0
 612 003a 08DB     		blt	.L37
 310:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 311:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 613              		.loc 1 311 35
 614 003c 3B68     		ldr	r3, [r7]
 615 003e 134A     		ldr	r2, .L40+8
 616 0040 82FB0312 		smull	r1, r2, r2, r3
 617 0044 1211     		asrs	r2, r2, #4
 618 0046 DB17     		asrs	r3, r3, #31
 619 0048 D31A     		subs	r3, r2, r3
 310:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 620              		.loc 1 310 20
 621 004a FB61     		str	r3, [r7, #28]
 622 004c 0AE0     		b	.L38
 623              	.L37:
 312:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	} else {
 313:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		encodedOffsetVal =
 314:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			cOffsetRange +
 624              		.loc 1 314 17
 625 004e B7F90E20 		ldrsh	r2, [r7, #14]
 315:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 626              		.loc 1 315 35
 627 0052 3B68     		ldr	r3, [r7]
 628 0054 0D49     		ldr	r1, .L40+8
 629 0056 81FB0301 		smull	r0, r1, r1, r3
 630 005a 0911     		asrs	r1, r1, #4
 631 005c DB17     		asrs	r3, r3, #31
 632 005e CB1A     		subs	r3, r1, r3
 314:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			OffsetCalibrationDataMicroMeter/250;
 633              		.loc 1 314 17
 634 0060 1344     		add	r3, r3, r2
 313:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			cOffsetRange +
 635              		.loc 1 313 20
 636 0062 FB61     		str	r3, [r7, #28]
 637              	.L38:
 316:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 317:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 18


 318:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrWord(Dev,
 638              		.loc 1 318 11
 639 0064 FB69     		ldr	r3, [r7, #28]
 640 0066 9BB2     		uxth	r3, r3
 641 0068 1A46     		mov	r2, r3
 642 006a 2821     		movs	r1, #40
 643 006c 7868     		ldr	r0, [r7, #4]
 644 006e FFF7FEFF 		bl	VL53L0X_WrWord
 645 0072 0346     		mov	r3, r0
 646 0074 FB76     		strb	r3, [r7, #27]
 319:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 320:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		encodedOffsetVal);
 321:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 322:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	LOG_FUNCTION_END(Status);
 323:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 647              		.loc 1 323 9
 648 0076 97F91B30 		ldrsb	r3, [r7, #27]
 324:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 649              		.loc 1 324 1
 650 007a 1846     		mov	r0, r3
 651 007c 2037     		adds	r7, r7, #32
 652              		.cfi_def_cfa_offset 8
 653 007e BD46     		mov	sp, r7
 654              		.cfi_def_cfa_register 13
 655              		@ sp needed
 656 0080 80BD     		pop	{r7, pc}
 657              	.L41:
 658 0082 00BF     		.align	2
 659              	.L40:
 660 0084 18CC0700 		.word	511000
 661 0088 0030F8FF 		.word	-512000
 662 008c D34D6210 		.word	274877907
 663              		.cfi_endproc
 664              	.LFE326:
 666              		.section	.text.VL53L0X_get_offset_calibration_data_micro_meter,"ax",%progbits
 667              		.align	1
 668              		.global	VL53L0X_get_offset_calibration_data_micro_meter
 669              		.syntax unified
 670              		.thumb
 671              		.thumb_func
 673              	VL53L0X_get_offset_calibration_data_micro_meter:
 674              	.LFB327:
 325:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 326:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_offset_calibration_data_micro_meter(VL53L0X_DEV Dev,
 327:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		int32_t *pOffsetCalibrationDataMicroMeter)
 328:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 675              		.loc 1 328 1
 676              		.cfi_startproc
 677              		@ args = 0, pretend = 0, frame = 16
 678              		@ frame_needed = 1, uses_anonymous_args = 0
 679 0000 80B5     		push	{r7, lr}
 680              		.cfi_def_cfa_offset 8
 681              		.cfi_offset 7, -8
 682              		.cfi_offset 14, -4
 683 0002 84B0     		sub	sp, sp, #16
 684              		.cfi_def_cfa_offset 24
 685 0004 00AF     		add	r7, sp, #0
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 19


 686              		.cfi_def_cfa_register 7
 687 0006 7860     		str	r0, [r7, #4]
 688 0008 3960     		str	r1, [r7]
 329:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 689              		.loc 1 329 16
 690 000a 0023     		movs	r3, #0
 691 000c FB73     		strb	r3, [r7, #15]
 330:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t RangeOffsetRegister;
 331:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int16_t cMaxOffset = 2047;
 692              		.loc 1 331 10
 693 000e 40F2FF73 		movw	r3, #2047
 694 0012 BB81     		strh	r3, [r7, #12]	@ movhi
 332:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int16_t cOffsetRange = 4096;
 695              		.loc 1 332 10
 696 0014 4FF48053 		mov	r3, #4096
 697 0018 7B81     		strh	r3, [r7, #10]	@ movhi
 333:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 334:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Note that offset has 10.2 format */
 335:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 336:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_RdWord(Dev,
 698              		.loc 1 336 11
 699 001a 07F10803 		add	r3, r7, #8
 700 001e 1A46     		mov	r2, r3
 701 0020 2821     		movs	r1, #40
 702 0022 7868     		ldr	r0, [r7, #4]
 703 0024 FFF7FEFF 		bl	VL53L0X_RdWord
 704 0028 0346     		mov	r3, r0
 705 002a FB73     		strb	r3, [r7, #15]
 337:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_ALGO_PART_TO_PART_RANGE_OFFSET_MM,
 338:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				&RangeOffsetRegister);
 339:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 340:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 706              		.loc 1 340 5
 707 002c 97F90F30 		ldrsb	r3, [r7, #15]
 708 0030 002B     		cmp	r3, #0
 709 0032 1ED1     		bne	.L43
 341:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		RangeOffsetRegister = (RangeOffsetRegister & 0x0fff);
 710              		.loc 1 341 46
 711 0034 3B89     		ldrh	r3, [r7, #8]
 712 0036 C3F30B03 		ubfx	r3, r3, #0, #12
 713 003a 9BB2     		uxth	r3, r3
 714              		.loc 1 341 23
 715 003c 3B81     		strh	r3, [r7, #8]	@ movhi
 342:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 343:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Apply 12 bit 2's compliment conversion */
 344:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (RangeOffsetRegister > cMaxOffset)
 716              		.loc 1 344 27
 717 003e 3B89     		ldrh	r3, [r7, #8]
 718 0040 1A46     		mov	r2, r3
 719 0042 B7F90C30 		ldrsh	r3, [r7, #12]
 720              		.loc 1 344 6
 721 0046 9A42     		cmp	r2, r3
 722 0048 0BDD     		ble	.L44
 345:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 346:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(int16_t)(RangeOffsetRegister - cOffsetRange)
 723              		.loc 1 346 35
 724 004a 3A89     		ldrh	r2, [r7, #8]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 20


 725 004c 7B89     		ldrh	r3, [r7, #10]
 726 004e D31A     		subs	r3, r2, r3
 727 0050 9BB2     		uxth	r3, r3
 728              		.loc 1 346 5
 729 0052 1BB2     		sxth	r3, r3
 730 0054 1A46     		mov	r2, r3
 347:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					* 250;
 731              		.loc 1 347 6
 732 0056 FA23     		movs	r3, #250
 733 0058 03FB02F2 		mul	r2, r3, r2
 345:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 734              		.loc 1 345 38
 735 005c 3B68     		ldr	r3, [r7]
 736 005e 1A60     		str	r2, [r3]
 737 0060 07E0     		b	.L43
 738              	.L44:
 348:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		else
 349:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			*pOffsetCalibrationDataMicroMeter =
 350:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 739              		.loc 1 350 5
 740 0062 3B89     		ldrh	r3, [r7, #8]
 741 0064 1BB2     		sxth	r3, r3
 742 0066 1A46     		mov	r2, r3
 743              		.loc 1 350 34
 744 0068 FA23     		movs	r3, #250
 745 006a 03FB02F2 		mul	r2, r3, r2
 349:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(int16_t)RangeOffsetRegister * 250;
 746              		.loc 1 349 38
 747 006e 3B68     		ldr	r3, [r7]
 748 0070 1A60     		str	r2, [r3]
 749              	.L43:
 351:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 352:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 353:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 354:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 750              		.loc 1 354 9
 751 0072 97F90F30 		ldrsb	r3, [r7, #15]
 355:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 752              		.loc 1 355 1
 753 0076 1846     		mov	r0, r3
 754 0078 1037     		adds	r7, r7, #16
 755              		.cfi_def_cfa_offset 8
 756 007a BD46     		mov	sp, r7
 757              		.cfi_def_cfa_register 13
 758              		@ sp needed
 759 007c 80BD     		pop	{r7, pc}
 760              		.cfi_endproc
 761              	.LFE327:
 763              		.section	.text.VL53L0X_apply_offset_adjustment,"ax",%progbits
 764              		.align	1
 765              		.global	VL53L0X_apply_offset_adjustment
 766              		.syntax unified
 767              		.thumb
 768              		.thumb_func
 770              	VL53L0X_apply_offset_adjustment:
 771              	.LFB328:
 356:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 21


 357:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 358:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_apply_offset_adjustment(VL53L0X_DEV Dev)
 359:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 772              		.loc 1 359 1
 773              		.cfi_startproc
 774              		@ args = 0, pretend = 0, frame = 24
 775              		@ frame_needed = 1, uses_anonymous_args = 0
 776 0000 80B5     		push	{r7, lr}
 777              		.cfi_def_cfa_offset 8
 778              		.cfi_offset 7, -8
 779              		.cfi_offset 14, -4
 780 0002 86B0     		sub	sp, sp, #24
 781              		.cfi_def_cfa_offset 32
 782 0004 00AF     		add	r7, sp, #0
 783              		.cfi_def_cfa_register 7
 784 0006 7860     		str	r0, [r7, #4]
 360:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 785              		.loc 1 360 16
 786 0008 0023     		movs	r3, #0
 787 000a FB75     		strb	r3, [r7, #23]
 361:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t CorrectedOffsetMicroMeters;
 362:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t CurrentOffsetMicroMeters;
 363:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 364:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* if we run on this function we can read all the NVM info
 365:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * used by the API */
 366:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_get_info_from_device(Dev, 7);
 788              		.loc 1 366 11
 789 000c 0721     		movs	r1, #7
 790 000e 7868     		ldr	r0, [r7, #4]
 791 0010 FFF7FEFF 		bl	VL53L0X_get_info_from_device
 792 0014 0346     		mov	r3, r0
 793 0016 FB75     		strb	r3, [r7, #23]
 367:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 368:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Read back current device offset */
 369:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 794              		.loc 1 369 5
 795 0018 97F91730 		ldrsb	r3, [r7, #23]
 796 001c 002B     		cmp	r3, #0
 797 001e 07D1     		bne	.L47
 370:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_GetOffsetCalibrationDataMicroMeter(Dev,
 798              		.loc 1 370 12
 799 0020 07F10C03 		add	r3, r7, #12
 800 0024 1946     		mov	r1, r3
 801 0026 7868     		ldr	r0, [r7, #4]
 802 0028 FFF7FEFF 		bl	VL53L0X_GetOffsetCalibrationDataMicroMeter
 803 002c 0346     		mov	r3, r0
 804 002e FB75     		strb	r3, [r7, #23]
 805              	.L47:
 371:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					&CurrentOffsetMicroMeters);
 372:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 373:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 374:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Apply Offset Adjustment derived from 400mm measurements */
 375:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 806              		.loc 1 375 5
 807 0030 97F91730 		ldrsb	r3, [r7, #23]
 808 0034 002B     		cmp	r3, #0
 809 0036 14D1     		bne	.L48
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 22


 376:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 377:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Store initial device offset */
 378:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		PALDevDataSet(Dev, Part2PartOffsetNVMMicroMeter,
 810              		.loc 1 378 3
 811 0038 FA68     		ldr	r2, [r7, #12]
 812 003a 7B68     		ldr	r3, [r7, #4]
 813 003c 9A60     		str	r2, [r3, #8]
 379:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			CurrentOffsetMicroMeters);
 380:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 381:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		CorrectedOffsetMicroMeters = CurrentOffsetMicroMeters +
 382:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 814              		.loc 1 382 13
 815 003e 7B68     		ldr	r3, [r7, #4]
 816 0040 DA68     		ldr	r2, [r3, #12]
 381:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 817              		.loc 1 381 57
 818 0042 FB68     		ldr	r3, [r7, #12]
 381:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(int32_t)PALDevDataGet(Dev,
 819              		.loc 1 381 30
 820 0044 1344     		add	r3, r3, r2
 821 0046 3B61     		str	r3, [r7, #16]
 383:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Part2PartOffsetAdjustmentNVMMicroMeter);
 384:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 385:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_SetOffsetCalibrationDataMicroMeter(Dev,
 822              		.loc 1 385 12
 823 0048 3969     		ldr	r1, [r7, #16]
 824 004a 7868     		ldr	r0, [r7, #4]
 825 004c FFF7FEFF 		bl	VL53L0X_SetOffsetCalibrationDataMicroMeter
 826 0050 0346     		mov	r3, r0
 827 0052 FB75     		strb	r3, [r7, #23]
 386:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 387:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 388:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* store current, adjusted offset */
 389:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 828              		.loc 1 389 6
 829 0054 97F91730 		ldrsb	r3, [r7, #23]
 830 0058 002B     		cmp	r3, #0
 831 005a 02D1     		bne	.L48
 390:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_SETPARAMETERFIELD(Dev, RangeOffsetMicroMeters,
 832              		.loc 1 390 4
 833 005c 7B68     		ldr	r3, [r7, #4]
 834 005e 3A69     		ldr	r2, [r7, #16]
 835 0060 5A62     		str	r2, [r3, #36]
 836              	.L48:
 391:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					CorrectedOffsetMicroMeters);
 392:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 393:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 394:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 395:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 837              		.loc 1 395 9
 838 0062 97F91730 		ldrsb	r3, [r7, #23]
 396:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 839              		.loc 1 396 1
 840 0066 1846     		mov	r0, r3
 841 0068 1837     		adds	r7, r7, #24
 842              		.cfi_def_cfa_offset 8
 843 006a BD46     		mov	sp, r7
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 23


 844              		.cfi_def_cfa_register 13
 845              		@ sp needed
 846 006c 80BD     		pop	{r7, pc}
 847              		.cfi_endproc
 848              	.LFE328:
 850              		.section	.text.get_next_good_spad,"ax",%progbits
 851              		.align	1
 852              		.global	get_next_good_spad
 853              		.syntax unified
 854              		.thumb
 855              		.thumb_func
 857              	get_next_good_spad:
 858              	.LFB329:
 397:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 398:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** void get_next_good_spad(uint8_t goodSpadArray[], uint32_t size,
 399:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			uint32_t curr, int32_t *next)
 400:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 859              		.loc 1 400 1
 860              		.cfi_startproc
 861              		@ args = 0, pretend = 0, frame = 40
 862              		@ frame_needed = 1, uses_anonymous_args = 0
 863              		@ link register save eliminated.
 864 0000 80B4     		push	{r7}
 865              		.cfi_def_cfa_offset 4
 866              		.cfi_offset 7, -4
 867 0002 8BB0     		sub	sp, sp, #44
 868              		.cfi_def_cfa_offset 48
 869 0004 00AF     		add	r7, sp, #0
 870              		.cfi_def_cfa_register 7
 871 0006 F860     		str	r0, [r7, #12]
 872 0008 B960     		str	r1, [r7, #8]
 873 000a 7A60     		str	r2, [r7, #4]
 874 000c 3B60     		str	r3, [r7]
 401:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t startIndex;
 402:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t fineOffset;
 403:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 875              		.loc 1 403 11
 876 000e 0823     		movs	r3, #8
 877 0010 BB61     		str	r3, [r7, #24]
 404:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 405:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 406:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t dataByte;
 407:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t success = 0;
 878              		.loc 1 407 10
 879 0012 0023     		movs	r3, #0
 880 0014 BB77     		strb	r3, [r7, #30]
 408:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 409:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
 410:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Starting with the current good spad, loop through the array to find
 411:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * the next. i.e. the next bit set in the sequence.
 412:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 413:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * The coarse index is the byte index of the array and the fine index is
 414:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * the index of the bit within each byte.
 415:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 416:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 417:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	*next = -1;
 881              		.loc 1 417 8
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 24


 882 0016 3B68     		ldr	r3, [r7]
 883 0018 4FF0FF32 		mov	r2, #-1
 884 001c 1A60     		str	r2, [r3]
 418:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 419:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	startIndex = curr / cSpadsPerByte;
 885              		.loc 1 419 13
 886 001e 7A68     		ldr	r2, [r7, #4]
 887 0020 BB69     		ldr	r3, [r7, #24]
 888 0022 B2FBF3F3 		udiv	r3, r2, r3
 889 0026 7B61     		str	r3, [r7, #20]
 420:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	fineOffset = curr % cSpadsPerByte;
 890              		.loc 1 420 13
 891 0028 7B68     		ldr	r3, [r7, #4]
 892 002a BA69     		ldr	r2, [r7, #24]
 893 002c B3FBF2F2 		udiv	r2, r3, r2
 894 0030 B969     		ldr	r1, [r7, #24]
 895 0032 01FB02F2 		mul	r2, r1, r2
 896 0036 9B1A     		subs	r3, r3, r2
 897 0038 3B61     		str	r3, [r7, #16]
 421:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 422:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (coarseIndex = startIndex; ((coarseIndex < size) && !success);
 898              		.loc 1 422 19
 899 003a 7B69     		ldr	r3, [r7, #20]
 900 003c 7B62     		str	r3, [r7, #36]
 901              		.loc 1 422 2
 902 003e 30E0     		b	.L51
 903              	.L58:
 423:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 424:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 904              		.loc 1 424 13
 905 0040 0023     		movs	r3, #0
 906 0042 3B62     		str	r3, [r7, #32]
 425:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		dataByte = goodSpadArray[coarseIndex];
 907              		.loc 1 425 27
 908 0044 FA68     		ldr	r2, [r7, #12]
 909 0046 7B6A     		ldr	r3, [r7, #36]
 910 0048 1344     		add	r3, r3, r2
 911              		.loc 1 425 12
 912 004a 1B78     		ldrb	r3, [r3]
 913 004c FB77     		strb	r3, [r7, #31]
 426:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 427:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (coarseIndex == startIndex) {
 914              		.loc 1 427 6
 915 004e 7A6A     		ldr	r2, [r7, #36]
 916 0050 7B69     		ldr	r3, [r7, #20]
 917 0052 9A42     		cmp	r2, r3
 918 0054 1ED1     		bne	.L53
 428:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* locate the bit position of the provided current
 429:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * spad bit before iterating */
 430:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			dataByte >>= fineOffset;
 919              		.loc 1 430 13
 920 0056 FA7F     		ldrb	r2, [r7, #31]	@ zero_extendqisi2
 921 0058 3B69     		ldr	r3, [r7, #16]
 922 005a 42FA03F3 		asr	r3, r2, r3
 923 005e FB77     		strb	r3, [r7, #31]
 431:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			fineIndex = fineOffset;
 924              		.loc 1 431 14
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 25


 925 0060 3B69     		ldr	r3, [r7, #16]
 926 0062 3B62     		str	r3, [r7, #32]
 432:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 433:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 434:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		while (fineIndex < cSpadsPerByte) {
 927              		.loc 1 434 9
 928 0064 16E0     		b	.L53
 929              	.L56:
 435:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 930              		.loc 1 435 18
 931 0066 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 932 0068 03F00103 		and	r3, r3, #1
 933              		.loc 1 435 7
 934 006c 002B     		cmp	r3, #0
 935 006e 0BD0     		beq	.L54
 436:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				success = 1;
 936              		.loc 1 436 13
 937 0070 0123     		movs	r3, #1
 938 0072 BB77     		strb	r3, [r7, #30]
 437:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				*next = coarseIndex * cSpadsPerByte + fineIndex;
 939              		.loc 1 437 25
 940 0074 7B6A     		ldr	r3, [r7, #36]
 941 0076 BA69     		ldr	r2, [r7, #24]
 942 0078 03FB02F2 		mul	r2, r3, r2
 943              		.loc 1 437 41
 944 007c 3B6A     		ldr	r3, [r7, #32]
 945 007e 1344     		add	r3, r3, r2
 946 0080 1A46     		mov	r2, r3
 947              		.loc 1 437 11
 948 0082 3B68     		ldr	r3, [r7]
 949 0084 1A60     		str	r2, [r3]
 438:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 950              		.loc 1 438 5
 951 0086 09E0     		b	.L55
 952              	.L54:
 439:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 440:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			dataByte >>= 1;
 953              		.loc 1 440 13
 954 0088 FB7F     		ldrb	r3, [r7, #31]	@ zero_extendqisi2
 955 008a 5B08     		lsrs	r3, r3, #1
 956 008c FB77     		strb	r3, [r7, #31]
 441:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			fineIndex++;
 957              		.loc 1 441 13
 958 008e 3B6A     		ldr	r3, [r7, #32]
 959 0090 0133     		adds	r3, r3, #1
 960 0092 3B62     		str	r3, [r7, #32]
 961              	.L53:
 434:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if ((dataByte & 0x1) == 1) {
 962              		.loc 1 434 20
 963 0094 3A6A     		ldr	r2, [r7, #32]
 964 0096 BB69     		ldr	r3, [r7, #24]
 965 0098 9A42     		cmp	r2, r3
 966 009a E4D3     		bcc	.L56
 967              	.L55:
 423:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		fineIndex = 0;
 968              		.loc 1 423 16
 969 009c 7B6A     		ldr	r3, [r7, #36]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 26


 970 009e 0133     		adds	r3, r3, #1
 971 00a0 7B62     		str	r3, [r7, #36]
 972              	.L51:
 422:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 973              		.loc 1 422 55 discriminator 1
 974 00a2 7A6A     		ldr	r2, [r7, #36]
 975 00a4 BB68     		ldr	r3, [r7, #8]
 976 00a6 9A42     		cmp	r2, r3
 977 00a8 02D2     		bcs	.L59
 422:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				coarseIndex++) {
 978              		.loc 1 422 55 is_stmt 0 discriminator 2
 979 00aa BB7F     		ldrb	r3, [r7, #30]	@ zero_extendqisi2
 980 00ac 002B     		cmp	r3, #0
 981 00ae C7D0     		beq	.L58
 982              	.L59:
 442:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 443:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 444:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 983              		.loc 1 444 1 is_stmt 1
 984 00b0 00BF     		nop
 985 00b2 2C37     		adds	r7, r7, #44
 986              		.cfi_def_cfa_offset 4
 987 00b4 BD46     		mov	sp, r7
 988              		.cfi_def_cfa_register 13
 989              		@ sp needed
 990 00b6 5DF8047B 		ldr	r7, [sp], #4
 991              		.cfi_restore 7
 992              		.cfi_def_cfa_offset 0
 993 00ba 7047     		bx	lr
 994              		.cfi_endproc
 995              	.LFE329:
 997              		.section	.text.is_aperture,"ax",%progbits
 998              		.align	1
 999              		.global	is_aperture
 1000              		.syntax unified
 1001              		.thumb
 1002              		.thumb_func
 1004              	is_aperture:
 1005              	.LFB330:
 445:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 446:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 447:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** uint8_t is_aperture(uint32_t spadIndex)
 448:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1006              		.loc 1 448 1
 1007              		.cfi_startproc
 1008              		@ args = 0, pretend = 0, frame = 16
 1009              		@ frame_needed = 1, uses_anonymous_args = 0
 1010              		@ link register save eliminated.
 1011 0000 80B4     		push	{r7}
 1012              		.cfi_def_cfa_offset 4
 1013              		.cfi_offset 7, -4
 1014 0002 85B0     		sub	sp, sp, #20
 1015              		.cfi_def_cfa_offset 24
 1016 0004 00AF     		add	r7, sp, #0
 1017              		.cfi_def_cfa_register 7
 1018 0006 7860     		str	r0, [r7, #4]
 449:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 27


 450:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This function reports if a given spad index is an aperture SPAD by
 451:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * deriving the quadrant.
 452:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 453:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t quadrant;
 454:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t isAperture = 1;
 1019              		.loc 1 454 10
 1020 0008 0123     		movs	r3, #1
 1021 000a FB73     		strb	r3, [r7, #15]
 455:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	quadrant = spadIndex >> 6;
 1022              		.loc 1 455 11
 1023 000c 7B68     		ldr	r3, [r7, #4]
 1024 000e 9B09     		lsrs	r3, r3, #6
 1025 0010 BB60     		str	r3, [r7, #8]
 456:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (refArrayQuadrants[quadrant] == REF_ARRAY_SPAD_0)
 1026              		.loc 1 456 23
 1027 0012 074A     		ldr	r2, .L63
 1028 0014 BB68     		ldr	r3, [r7, #8]
 1029 0016 52F82330 		ldr	r3, [r2, r3, lsl #2]
 1030              		.loc 1 456 5
 1031 001a 002B     		cmp	r3, #0
 1032 001c 01D1     		bne	.L61
 457:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		isAperture = 0;
 1033              		.loc 1 457 14
 1034 001e 0023     		movs	r3, #0
 1035 0020 FB73     		strb	r3, [r7, #15]
 1036              	.L61:
 458:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 459:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return isAperture;
 1037              		.loc 1 459 9
 1038 0022 FB7B     		ldrb	r3, [r7, #15]	@ zero_extendqisi2
 460:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1039              		.loc 1 460 1
 1040 0024 1846     		mov	r0, r3
 1041 0026 1437     		adds	r7, r7, #20
 1042              		.cfi_def_cfa_offset 4
 1043 0028 BD46     		mov	sp, r7
 1044              		.cfi_def_cfa_register 13
 1045              		@ sp needed
 1046 002a 5DF8047B 		ldr	r7, [sp], #4
 1047              		.cfi_restore 7
 1048              		.cfi_def_cfa_offset 0
 1049 002e 7047     		bx	lr
 1050              	.L64:
 1051              		.align	2
 1052              	.L63:
 1053 0030 00000000 		.word	refArrayQuadrants
 1054              		.cfi_endproc
 1055              	.LFE330:
 1057              		.section	.text.enable_spad_bit,"ax",%progbits
 1058              		.align	1
 1059              		.global	enable_spad_bit
 1060              		.syntax unified
 1061              		.thumb
 1062              		.thumb_func
 1064              	enable_spad_bit:
 1065              	.LFB331:
 461:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 28


 462:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 463:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error enable_spad_bit(uint8_t spadArray[], uint32_t size,
 464:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t spadIndex)
 465:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1066              		.loc 1 465 1
 1067              		.cfi_startproc
 1068              		@ args = 0, pretend = 0, frame = 32
 1069              		@ frame_needed = 1, uses_anonymous_args = 0
 1070              		@ link register save eliminated.
 1071 0000 80B4     		push	{r7}
 1072              		.cfi_def_cfa_offset 4
 1073              		.cfi_offset 7, -4
 1074 0002 89B0     		sub	sp, sp, #36
 1075              		.cfi_def_cfa_offset 40
 1076 0004 00AF     		add	r7, sp, #0
 1077              		.cfi_def_cfa_register 7
 1078 0006 F860     		str	r0, [r7, #12]
 1079 0008 B960     		str	r1, [r7, #8]
 1080 000a 7A60     		str	r2, [r7, #4]
 466:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1081              		.loc 1 466 16
 1082 000c 0023     		movs	r3, #0
 1083 000e FB77     		strb	r3, [r7, #31]
 467:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1084              		.loc 1 467 11
 1085 0010 0823     		movs	r3, #8
 1086 0012 BB61     		str	r3, [r7, #24]
 468:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t coarseIndex;
 469:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t fineIndex;
 470:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 471:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	coarseIndex = spadIndex / cSpadsPerByte;
 1087              		.loc 1 471 14
 1088 0014 7A68     		ldr	r2, [r7, #4]
 1089 0016 BB69     		ldr	r3, [r7, #24]
 1090 0018 B2FBF3F3 		udiv	r3, r2, r3
 1091 001c 7B61     		str	r3, [r7, #20]
 472:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	fineIndex = spadIndex % cSpadsPerByte;
 1092              		.loc 1 472 12
 1093 001e 7B68     		ldr	r3, [r7, #4]
 1094 0020 BA69     		ldr	r2, [r7, #24]
 1095 0022 B3FBF2F2 		udiv	r2, r3, r2
 1096 0026 B969     		ldr	r1, [r7, #24]
 1097 0028 01FB02F2 		mul	r2, r1, r2
 1098 002c 9B1A     		subs	r3, r3, r2
 1099 002e 3B61     		str	r3, [r7, #16]
 473:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (coarseIndex >= size)
 1100              		.loc 1 473 5
 1101 0030 7A69     		ldr	r2, [r7, #20]
 1102 0032 BB68     		ldr	r3, [r7, #8]
 1103 0034 9A42     		cmp	r2, r3
 1104 0036 02D3     		bcc	.L66
 474:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 1105              		.loc 1 474 10
 1106 0038 CE23     		movs	r3, #206
 1107 003a FB77     		strb	r3, [r7, #31]
 1108 003c 10E0     		b	.L67
 1109              	.L66:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 29


 475:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	else
 476:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		spadArray[coarseIndex] |= (1 << fineIndex);
 1110              		.loc 1 476 26
 1111 003e FA68     		ldr	r2, [r7, #12]
 1112 0040 7B69     		ldr	r3, [r7, #20]
 1113 0042 1344     		add	r3, r3, r2
 1114 0044 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1115 0046 5AB2     		sxtb	r2, r3
 1116              		.loc 1 476 32
 1117 0048 0121     		movs	r1, #1
 1118 004a 3B69     		ldr	r3, [r7, #16]
 1119 004c 01FA03F3 		lsl	r3, r1, r3
 1120              		.loc 1 476 26
 1121 0050 5BB2     		sxtb	r3, r3
 1122 0052 1343     		orrs	r3, r3, r2
 1123 0054 59B2     		sxtb	r1, r3
 1124 0056 FA68     		ldr	r2, [r7, #12]
 1125 0058 7B69     		ldr	r3, [r7, #20]
 1126 005a 1344     		add	r3, r3, r2
 1127 005c CAB2     		uxtb	r2, r1
 1128 005e 1A70     		strb	r2, [r3]
 1129              	.L67:
 477:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 478:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
 1130              		.loc 1 478 9
 1131 0060 97F91F30 		ldrsb	r3, [r7, #31]
 479:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1132              		.loc 1 479 1
 1133 0064 1846     		mov	r0, r3
 1134 0066 2437     		adds	r7, r7, #36
 1135              		.cfi_def_cfa_offset 4
 1136 0068 BD46     		mov	sp, r7
 1137              		.cfi_def_cfa_register 13
 1138              		@ sp needed
 1139 006a 5DF8047B 		ldr	r7, [sp], #4
 1140              		.cfi_restore 7
 1141              		.cfi_def_cfa_offset 0
 1142 006e 7047     		bx	lr
 1143              		.cfi_endproc
 1144              	.LFE331:
 1146              		.section	.text.count_enabled_spads,"ax",%progbits
 1147              		.align	1
 1148              		.global	count_enabled_spads
 1149              		.syntax unified
 1150              		.thumb
 1151              		.thumb_func
 1153              	count_enabled_spads:
 1154              	.LFB332:
 480:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 481:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error count_enabled_spads(uint8_t spadArray[],
 482:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint32_t byteCount, uint32_t maxSpads,
 483:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint32_t *pTotalSpadsEnabled, uint8_t *pIsAperture)
 484:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1155              		.loc 1 484 1
 1156              		.cfi_startproc
 1157              		@ args = 4, pretend = 0, frame = 48
 1158              		@ frame_needed = 1, uses_anonymous_args = 0
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 30


 1159              		@ link register save eliminated.
 1160 0000 80B4     		push	{r7}
 1161              		.cfi_def_cfa_offset 4
 1162              		.cfi_offset 7, -4
 1163 0002 8DB0     		sub	sp, sp, #52
 1164              		.cfi_def_cfa_offset 56
 1165 0004 00AF     		add	r7, sp, #0
 1166              		.cfi_def_cfa_register 7
 1167 0006 F860     		str	r0, [r7, #12]
 1168 0008 B960     		str	r1, [r7, #8]
 1169 000a 7A60     		str	r2, [r7, #4]
 1170 000c 3B60     		str	r3, [r7]
 485:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1171              		.loc 1 485 16
 1172 000e 0023     		movs	r3, #0
 1173 0010 87F82F30 		strb	r3, [r7, #47]
 486:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t cSpadsPerByte = 8;
 1174              		.loc 1 486 11
 1175 0014 0823     		movs	r3, #8
 1176 0016 FB61     		str	r3, [r7, #28]
 487:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t lastByte;
 488:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t lastBit;
 489:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t byteIndex = 0;
 1177              		.loc 1 489 11
 1178 0018 0023     		movs	r3, #0
 1179 001a BB62     		str	r3, [r7, #40]
 490:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t bitIndex = 0;
 1180              		.loc 1 490 11
 1181 001c 0023     		movs	r3, #0
 1182 001e 7B62     		str	r3, [r7, #36]
 491:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t tempByte;
 492:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t spadTypeIdentified = 0;
 1183              		.loc 1 492 10
 1184 0020 0023     		movs	r3, #0
 1185 0022 87F82230 		strb	r3, [r7, #34]
 493:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 494:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* The entire array will not be used for spads, therefore the last
 495:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * byte and last bit is determined from the max spads value.
 496:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 497:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 498:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	lastByte = maxSpads / cSpadsPerByte;
 1186              		.loc 1 498 11
 1187 0026 7A68     		ldr	r2, [r7, #4]
 1188 0028 FB69     		ldr	r3, [r7, #28]
 1189 002a B2FBF3F3 		udiv	r3, r2, r3
 1190 002e BB61     		str	r3, [r7, #24]
 499:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	lastBit = maxSpads % cSpadsPerByte;
 1191              		.loc 1 499 10
 1192 0030 7B68     		ldr	r3, [r7, #4]
 1193 0032 FA69     		ldr	r2, [r7, #28]
 1194 0034 B3FBF2F2 		udiv	r2, r3, r2
 1195 0038 F969     		ldr	r1, [r7, #28]
 1196 003a 01FB02F2 		mul	r2, r1, r2
 1197 003e 9B1A     		subs	r3, r3, r2
 1198 0040 7B61     		str	r3, [r7, #20]
 500:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 501:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Check that the max spads value does not exceed the array bounds. */
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 31


 502:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (lastByte >= byteCount)
 1199              		.loc 1 502 5
 1200 0042 BA69     		ldr	r2, [r7, #24]
 1201 0044 BB68     		ldr	r3, [r7, #8]
 1202 0046 9A42     		cmp	r2, r3
 1203 0048 02D3     		bcc	.L70
 503:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_ERROR_REF_SPAD_INIT;
 1204              		.loc 1 503 10
 1205 004a CE23     		movs	r3, #206
 1206 004c 87F82F30 		strb	r3, [r7, #47]
 1207              	.L70:
 504:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 505:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	*pTotalSpadsEnabled = 0;
 1208              		.loc 1 505 22
 1209 0050 3B68     		ldr	r3, [r7]
 1210 0052 0022     		movs	r2, #0
 1211 0054 1A60     		str	r2, [r3]
 506:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 507:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Count the bits enabled in the whole bytes */
 508:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (byteIndex = 0; byteIndex <= (lastByte - 1); byteIndex++) {
 1212              		.loc 1 508 17
 1213 0056 0023     		movs	r3, #0
 1214 0058 BB62     		str	r3, [r7, #40]
 1215              		.loc 1 508 2
 1216 005a 35E0     		b	.L71
 1217              	.L76:
 509:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1218              		.loc 1 509 23
 1219 005c FA68     		ldr	r2, [r7, #12]
 1220 005e BB6A     		ldr	r3, [r7, #40]
 1221 0060 1344     		add	r3, r3, r2
 1222              		.loc 1 509 12
 1223 0062 1B78     		ldrb	r3, [r3]
 1224 0064 87F82330 		strb	r3, [r7, #35]
 510:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 511:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		for (bitIndex = 0; bitIndex <= cSpadsPerByte; bitIndex++) {
 1225              		.loc 1 511 17
 1226 0068 0023     		movs	r3, #0
 1227 006a 7B62     		str	r3, [r7, #36]
 1228              		.loc 1 511 3
 1229 006c 25E0     		b	.L72
 1230              	.L75:
 512:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1231              		.loc 1 512 18
 1232 006e 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 1233 0072 03F00103 		and	r3, r3, #1
 1234              		.loc 1 512 7
 1235 0076 002B     		cmp	r3, #0
 1236 0078 17D0     		beq	.L73
 513:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				(*pTotalSpadsEnabled)++;
 1237              		.loc 1 513 6
 1238 007a 3B68     		ldr	r3, [r7]
 1239 007c 1B68     		ldr	r3, [r3]
 1240              		.loc 1 513 26
 1241 007e 5A1C     		adds	r2, r3, #1
 1242 0080 3B68     		ldr	r3, [r7]
 1243 0082 1A60     		str	r2, [r3]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 32


 514:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 515:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				if (!spadTypeIdentified) {
 1244              		.loc 1 515 8
 1245 0084 97F82230 		ldrb	r3, [r7, #34]	@ zero_extendqisi2
 1246 0088 002B     		cmp	r3, #0
 1247 008a 0ED1     		bne	.L73
 516:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					*pIsAperture = 1;
 1248              		.loc 1 516 19
 1249 008c BB6B     		ldr	r3, [r7, #56]
 1250 008e 0122     		movs	r2, #1
 1251 0090 1A70     		strb	r2, [r3]
 517:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					if ((byteIndex < 2) && (bitIndex < 4))
 1252              		.loc 1 517 9
 1253 0092 BB6A     		ldr	r3, [r7, #40]
 1254 0094 012B     		cmp	r3, #1
 1255 0096 05D8     		bhi	.L74
 1256              		.loc 1 517 26 discriminator 1
 1257 0098 7B6A     		ldr	r3, [r7, #36]
 1258 009a 032B     		cmp	r3, #3
 1259 009c 02D8     		bhi	.L74
 518:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							*pIsAperture = 0;
 1260              		.loc 1 518 21
 1261 009e BB6B     		ldr	r3, [r7, #56]
 1262 00a0 0022     		movs	r2, #0
 1263 00a2 1A70     		strb	r2, [r3]
 1264              	.L74:
 519:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					spadTypeIdentified = 1;
 1265              		.loc 1 519 25
 1266 00a4 0123     		movs	r3, #1
 1267 00a6 87F82230 		strb	r3, [r7, #34]
 1268              	.L73:
 520:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				}
 521:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 522:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			tempByte >>= 1;
 1269              		.loc 1 522 13 discriminator 2
 1270 00aa 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 1271 00ae 5B08     		lsrs	r3, r3, #1
 1272 00b0 87F82330 		strb	r3, [r7, #35]
 511:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1273              		.loc 1 511 57 discriminator 2
 1274 00b4 7B6A     		ldr	r3, [r7, #36]
 1275 00b6 0133     		adds	r3, r3, #1
 1276 00b8 7B62     		str	r3, [r7, #36]
 1277              	.L72:
 511:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if ((tempByte & 0x01) == 1) {
 1278              		.loc 1 511 31 discriminator 1
 1279 00ba 7A6A     		ldr	r2, [r7, #36]
 1280 00bc FB69     		ldr	r3, [r7, #28]
 1281 00be 9A42     		cmp	r2, r3
 1282 00c0 D5D9     		bls	.L75
 508:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1283              		.loc 1 508 60 discriminator 2
 1284 00c2 BB6A     		ldr	r3, [r7, #40]
 1285 00c4 0133     		adds	r3, r3, #1
 1286 00c6 BB62     		str	r3, [r7, #40]
 1287              	.L71:
 508:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 33


 1288              		.loc 1 508 45 discriminator 1
 1289 00c8 BB69     		ldr	r3, [r7, #24]
 1290 00ca 013B     		subs	r3, r3, #1
 508:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		tempByte = spadArray[byteIndex];
 1291              		.loc 1 508 32 discriminator 1
 1292 00cc BA6A     		ldr	r2, [r7, #40]
 1293 00ce 9A42     		cmp	r2, r3
 1294 00d0 C4D9     		bls	.L76
 523:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 524:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 525:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 526:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Count the number of bits enabled in the last byte accounting
 527:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * for the fact that not all bits in the byte may be used.
 528:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 529:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	tempByte = spadArray[lastByte];
 1295              		.loc 1 529 22
 1296 00d2 FA68     		ldr	r2, [r7, #12]
 1297 00d4 BB69     		ldr	r3, [r7, #24]
 1298 00d6 1344     		add	r3, r3, r2
 1299              		.loc 1 529 11
 1300 00d8 1B78     		ldrb	r3, [r3]
 1301 00da 87F82330 		strb	r3, [r7, #35]
 530:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 531:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (bitIndex = 0; bitIndex <= lastBit; bitIndex++) {
 1302              		.loc 1 531 16
 1303 00de 0023     		movs	r3, #0
 1304 00e0 7B62     		str	r3, [r7, #36]
 1305              		.loc 1 531 2
 1306 00e2 0DE0     		b	.L77
 1307              	.L79:
 532:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 1308              		.loc 1 532 17
 1309 00e4 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 1310 00e8 03F00103 		and	r3, r3, #1
 1311              		.loc 1 532 6
 1312 00ec 002B     		cmp	r3, #0
 1313 00ee 04D0     		beq	.L78
 533:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(*pTotalSpadsEnabled)++;
 1314              		.loc 1 533 5
 1315 00f0 3B68     		ldr	r3, [r7]
 1316 00f2 1B68     		ldr	r3, [r3]
 1317              		.loc 1 533 25
 1318 00f4 5A1C     		adds	r2, r3, #1
 1319 00f6 3B68     		ldr	r3, [r7]
 1320 00f8 1A60     		str	r2, [r3]
 1321              	.L78:
 531:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 1322              		.loc 1 531 50 discriminator 2
 1323 00fa 7B6A     		ldr	r3, [r7, #36]
 1324 00fc 0133     		adds	r3, r3, #1
 1325 00fe 7B62     		str	r3, [r7, #36]
 1326              	.L77:
 531:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if ((tempByte & 0x01) == 1)
 1327              		.loc 1 531 30 discriminator 1
 1328 0100 7A6A     		ldr	r2, [r7, #36]
 1329 0102 7B69     		ldr	r3, [r7, #20]
 1330 0104 9A42     		cmp	r2, r3
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 34


 1331 0106 EDD9     		bls	.L79
 534:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 535:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 536:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
 1332              		.loc 1 536 9
 1333 0108 97F92F30 		ldrsb	r3, [r7, #47]
 537:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1334              		.loc 1 537 1
 1335 010c 1846     		mov	r0, r3
 1336 010e 3437     		adds	r7, r7, #52
 1337              		.cfi_def_cfa_offset 4
 1338 0110 BD46     		mov	sp, r7
 1339              		.cfi_def_cfa_register 13
 1340              		@ sp needed
 1341 0112 5DF8047B 		ldr	r7, [sp], #4
 1342              		.cfi_restore 7
 1343              		.cfi_def_cfa_offset 0
 1344 0116 7047     		bx	lr
 1345              		.cfi_endproc
 1346              	.LFE332:
 1348              		.section	.text.set_ref_spad_map,"ax",%progbits
 1349              		.align	1
 1350              		.global	set_ref_spad_map
 1351              		.syntax unified
 1352              		.thumb
 1353              		.thumb_func
 1355              	set_ref_spad_map:
 1356              	.LFB333:
 538:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 539:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error set_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 540:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1357              		.loc 1 540 1
 1358              		.cfi_startproc
 1359              		@ args = 0, pretend = 0, frame = 16
 1360              		@ frame_needed = 1, uses_anonymous_args = 0
 1361 0000 80B5     		push	{r7, lr}
 1362              		.cfi_def_cfa_offset 8
 1363              		.cfi_offset 7, -8
 1364              		.cfi_offset 14, -4
 1365 0002 84B0     		sub	sp, sp, #16
 1366              		.cfi_def_cfa_offset 24
 1367 0004 00AF     		add	r7, sp, #0
 1368              		.cfi_def_cfa_register 7
 1369 0006 7860     		str	r0, [r7, #4]
 1370 0008 3960     		str	r1, [r7]
 541:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_WriteMulti(Dev,
 1371              		.loc 1 541 25
 1372 000a 0623     		movs	r3, #6
 1373 000c 3A68     		ldr	r2, [r7]
 1374 000e B021     		movs	r1, #176
 1375 0010 7868     		ldr	r0, [r7, #4]
 1376 0012 FFF7FEFF 		bl	VL53L0X_WriteMulti
 1377 0016 0346     		mov	r3, r0
 1378 0018 FB73     		strb	r3, [r7, #15]
 542:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 543:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				refSpadArray, 6);
 544:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 35


 1379              		.loc 1 544 9
 1380 001a 97F90F30 		ldrsb	r3, [r7, #15]
 545:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1381              		.loc 1 545 1
 1382 001e 1846     		mov	r0, r3
 1383 0020 1037     		adds	r7, r7, #16
 1384              		.cfi_def_cfa_offset 8
 1385 0022 BD46     		mov	sp, r7
 1386              		.cfi_def_cfa_register 13
 1387              		@ sp needed
 1388 0024 80BD     		pop	{r7, pc}
 1389              		.cfi_endproc
 1390              	.LFE333:
 1392              		.section	.text.get_ref_spad_map,"ax",%progbits
 1393              		.align	1
 1394              		.global	get_ref_spad_map
 1395              		.syntax unified
 1396              		.thumb
 1397              		.thumb_func
 1399              	get_ref_spad_map:
 1400              	.LFB334:
 546:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 547:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error get_ref_spad_map(VL53L0X_DEV Dev, uint8_t *refSpadArray)
 548:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1401              		.loc 1 548 1
 1402              		.cfi_startproc
 1403              		@ args = 0, pretend = 0, frame = 16
 1404              		@ frame_needed = 1, uses_anonymous_args = 0
 1405 0000 80B5     		push	{r7, lr}
 1406              		.cfi_def_cfa_offset 8
 1407              		.cfi_offset 7, -8
 1408              		.cfi_offset 14, -4
 1409 0002 84B0     		sub	sp, sp, #16
 1410              		.cfi_def_cfa_offset 24
 1411 0004 00AF     		add	r7, sp, #0
 1412              		.cfi_def_cfa_register 7
 1413 0006 7860     		str	r0, [r7, #4]
 1414 0008 3960     		str	r1, [r7]
 549:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ReadMulti(Dev,
 1415              		.loc 1 549 25
 1416 000a 0623     		movs	r3, #6
 1417 000c 3A68     		ldr	r2, [r7]
 1418 000e B021     		movs	r1, #176
 1419 0010 7868     		ldr	r0, [r7, #4]
 1420 0012 FFF7FEFF 		bl	VL53L0X_ReadMulti
 1421 0016 0346     		mov	r3, r0
 1422 0018 FB73     		strb	r3, [r7, #15]
 550:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_GLOBAL_CONFIG_SPAD_ENABLES_REF_0,
 551:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				refSpadArray,
 552:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				6);
 553:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
 1423              		.loc 1 553 9
 1424 001a 97F90F30 		ldrsb	r3, [r7, #15]
 554:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1425              		.loc 1 554 1
 1426 001e 1846     		mov	r0, r3
 1427 0020 1037     		adds	r7, r7, #16
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 36


 1428              		.cfi_def_cfa_offset 8
 1429 0022 BD46     		mov	sp, r7
 1430              		.cfi_def_cfa_register 13
 1431              		@ sp needed
 1432 0024 80BD     		pop	{r7, pc}
 1433              		.cfi_endproc
 1434              	.LFE334:
 1436              		.section	.text.enable_ref_spads,"ax",%progbits
 1437              		.align	1
 1438              		.global	enable_ref_spads
 1439              		.syntax unified
 1440              		.thumb
 1441              		.thumb_func
 1443              	enable_ref_spads:
 1444              	.LFB335:
 555:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 556:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error enable_ref_spads(VL53L0X_DEV Dev,
 557:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint8_t apertureSpads,
 558:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint8_t goodSpadArray[],
 559:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint8_t spadArray[],
 560:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t size,
 561:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t start,
 562:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t offset,
 563:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t spadCount,
 564:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t *lastSpad)
 565:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1445              		.loc 1 565 1
 1446              		.cfi_startproc
 1447              		@ args = 20, pretend = 0, frame = 48
 1448              		@ frame_needed = 1, uses_anonymous_args = 0
 1449 0000 80B5     		push	{r7, lr}
 1450              		.cfi_def_cfa_offset 8
 1451              		.cfi_offset 7, -8
 1452              		.cfi_offset 14, -4
 1453 0002 8CB0     		sub	sp, sp, #48
 1454              		.cfi_def_cfa_offset 56
 1455 0004 00AF     		add	r7, sp, #0
 1456              		.cfi_def_cfa_register 7
 1457 0006 F860     		str	r0, [r7, #12]
 1458 0008 7A60     		str	r2, [r7, #4]
 1459 000a 3B60     		str	r3, [r7]
 1460 000c 0B46     		mov	r3, r1
 1461 000e FB72     		strb	r3, [r7, #11]
 566:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1462              		.loc 1 566 16
 1463 0010 0023     		movs	r3, #0
 1464 0012 87F82F30 		strb	r3, [r7, #47]
 567:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t index;
 568:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t i;
 569:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = offset;
 1465              		.loc 1 569 10
 1466 0016 3B6C     		ldr	r3, [r7, #64]
 1467 0018 FB61     		str	r3, [r7, #28]
 570:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t currentSpad;
 571:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t checkSpadArray[6];
 572:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 573:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 37


 574:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This function takes in a spad array which may or may not have SPADS
 575:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * already enabled and appends from a given offset a requested number
 576:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * of new SPAD enables. The 'good spad map' is applied to
 577:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * determine the next SPADs to enable.
 578:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 579:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This function applies to only aperture or only non-aperture spads.
 580:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Checks are performed to ensure this.
 581:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 582:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 583:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	currentSpad = offset;
 1468              		.loc 1 583 14
 1469 001a 3B6C     		ldr	r3, [r7, #64]
 1470 001c 3B62     		str	r3, [r7, #32]
 584:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadCount; index++) {
 1471              		.loc 1 584 13
 1472 001e 0023     		movs	r3, #0
 1473 0020 BB62     		str	r3, [r7, #40]
 1474              		.loc 1 584 2
 1475 0022 2BE0     		b	.L86
 1476              	.L90:
 585:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1477              		.loc 1 585 3
 1478 0024 07F11C03 		add	r3, r7, #28
 1479 0028 3A6A     		ldr	r2, [r7, #32]
 1480 002a B96B     		ldr	r1, [r7, #56]
 1481 002c 7868     		ldr	r0, [r7, #4]
 1482 002e FFF7FEFF 		bl	get_next_good_spad
 586:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			&nextGoodSpad);
 587:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 588:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (nextGoodSpad == -1) {
 1483              		.loc 1 588 20
 1484 0032 FB69     		ldr	r3, [r7, #28]
 1485              		.loc 1 588 6
 1486 0034 B3F1FF3F 		cmp	r3, #-1
 1487 0038 03D1     		bne	.L87
 589:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 1488              		.loc 1 589 11
 1489 003a CE23     		movs	r3, #206
 1490 003c 87F82F30 		strb	r3, [r7, #47]
 590:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			break;
 1491              		.loc 1 590 4
 1492 0040 20E0     		b	.L88
 1493              	.L87:
 591:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 592:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 593:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Confirm that the next good SPAD is non-aperture */
 594:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (is_aperture(start + nextGoodSpad) != apertureSpads) {
 1494              		.loc 1 594 7
 1495 0042 FB69     		ldr	r3, [r7, #28]
 1496 0044 1A46     		mov	r2, r3
 1497 0046 FB6B     		ldr	r3, [r7, #60]
 1498 0048 1344     		add	r3, r3, r2
 1499 004a 1846     		mov	r0, r3
 1500 004c FFF7FEFF 		bl	is_aperture
 1501 0050 0346     		mov	r3, r0
 1502 0052 1A46     		mov	r2, r3
 1503              		.loc 1 594 6
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 38


 1504 0054 FB7A     		ldrb	r3, [r7, #11]	@ zero_extendqisi2
 1505 0056 9342     		cmp	r3, r2
 1506 0058 03D0     		beq	.L89
 595:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* if we can't get the required number of good aperture
 596:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * spads from the current quadrant then this is an error
 597:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 */
 598:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			status = VL53L0X_ERROR_REF_SPAD_INIT;
 1507              		.loc 1 598 11
 1508 005a CE23     		movs	r3, #206
 1509 005c 87F82F30 		strb	r3, [r7, #47]
 599:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			break;
 1510              		.loc 1 599 4
 1511 0060 10E0     		b	.L88
 1512              	.L89:
 600:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 601:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		currentSpad = (uint32_t)nextGoodSpad;
 1513              		.loc 1 601 17 discriminator 2
 1514 0062 FB69     		ldr	r3, [r7, #28]
 1515              		.loc 1 601 15 discriminator 2
 1516 0064 3B62     		str	r3, [r7, #32]
 602:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		enable_spad_bit(spadArray, size, currentSpad);
 1517              		.loc 1 602 3 discriminator 2
 1518 0066 3A6A     		ldr	r2, [r7, #32]
 1519 0068 B96B     		ldr	r1, [r7, #56]
 1520 006a 3868     		ldr	r0, [r7]
 1521 006c FFF7FEFF 		bl	enable_spad_bit
 603:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		currentSpad++;
 1522              		.loc 1 603 14 discriminator 2
 1523 0070 3B6A     		ldr	r3, [r7, #32]
 1524 0072 0133     		adds	r3, r3, #1
 1525 0074 3B62     		str	r3, [r7, #32]
 584:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1526              		.loc 1 584 42 discriminator 2
 1527 0076 BB6A     		ldr	r3, [r7, #40]
 1528 0078 0133     		adds	r3, r3, #1
 1529 007a BB62     		str	r3, [r7, #40]
 1530              	.L86:
 584:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		get_next_good_spad(goodSpadArray, size, currentSpad,
 1531              		.loc 1 584 24 discriminator 1
 1532 007c BA6A     		ldr	r2, [r7, #40]
 1533 007e 7B6C     		ldr	r3, [r7, #68]
 1534 0080 9A42     		cmp	r2, r3
 1535 0082 CFD3     		bcc	.L90
 1536              	.L88:
 604:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 605:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	*lastSpad = currentSpad;
 1537              		.loc 1 605 12
 1538 0084 BB6C     		ldr	r3, [r7, #72]
 1539 0086 3A6A     		ldr	r2, [r7, #32]
 1540 0088 1A60     		str	r2, [r3]
 606:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 607:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1541              		.loc 1 607 5
 1542 008a 97F92F30 		ldrsb	r3, [r7, #47]
 1543 008e 002B     		cmp	r3, #0
 1544 0090 06D1     		bne	.L91
 608:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = set_ref_spad_map(Dev, spadArray);
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 39


 1545              		.loc 1 608 12
 1546 0092 3968     		ldr	r1, [r7]
 1547 0094 F868     		ldr	r0, [r7, #12]
 1548 0096 FFF7FEFF 		bl	set_ref_spad_map
 1549 009a 0346     		mov	r3, r0
 1550 009c 87F82F30 		strb	r3, [r7, #47]
 1551              	.L91:
 609:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 610:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 611:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1552              		.loc 1 611 5
 1553 00a0 97F92F30 		ldrsb	r3, [r7, #47]
 1554 00a4 002B     		cmp	r3, #0
 1555 00a6 21D1     		bne	.L92
 612:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = get_ref_spad_map(Dev, checkSpadArray);
 1556              		.loc 1 612 12
 1557 00a8 07F11403 		add	r3, r7, #20
 1558 00ac 1946     		mov	r1, r3
 1559 00ae F868     		ldr	r0, [r7, #12]
 1560 00b0 FFF7FEFF 		bl	get_ref_spad_map
 1561 00b4 0346     		mov	r3, r0
 1562 00b6 87F82F30 		strb	r3, [r7, #47]
 613:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 614:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		i = 0;
 1563              		.loc 1 614 5
 1564 00ba 0023     		movs	r3, #0
 1565 00bc 7B62     		str	r3, [r7, #36]
 615:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 616:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Compare spad maps. If not equal report error. */
 617:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		while (i < size) {
 1566              		.loc 1 617 9
 1567 00be 11E0     		b	.L93
 1568              	.L95:
 618:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1569              		.loc 1 618 17
 1570 00c0 3A68     		ldr	r2, [r7]
 1571 00c2 7B6A     		ldr	r3, [r7, #36]
 1572 00c4 1344     		add	r3, r3, r2
 1573 00c6 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 1574              		.loc 1 618 38
 1575 00c8 07F11401 		add	r1, r7, #20
 1576 00cc 7B6A     		ldr	r3, [r7, #36]
 1577 00ce 0B44     		add	r3, r3, r1
 1578 00d0 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1579              		.loc 1 618 7
 1580 00d2 9A42     		cmp	r2, r3
 1581 00d4 03D0     		beq	.L94
 619:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				status = VL53L0X_ERROR_REF_SPAD_INIT;
 1582              		.loc 1 619 12
 1583 00d6 CE23     		movs	r3, #206
 1584 00d8 87F82F30 		strb	r3, [r7, #47]
 620:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 1585              		.loc 1 620 5
 1586 00dc 06E0     		b	.L92
 1587              	.L94:
 621:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 622:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			i++;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 40


 1588              		.loc 1 622 5
 1589 00de 7B6A     		ldr	r3, [r7, #36]
 1590 00e0 0133     		adds	r3, r3, #1
 1591 00e2 7B62     		str	r3, [r7, #36]
 1592              	.L93:
 617:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (spadArray[i] != checkSpadArray[i]) {
 1593              		.loc 1 617 12
 1594 00e4 7A6A     		ldr	r2, [r7, #36]
 1595 00e6 BB6B     		ldr	r3, [r7, #56]
 1596 00e8 9A42     		cmp	r2, r3
 1597 00ea E9D3     		bcc	.L95
 1598              	.L92:
 623:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 624:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 625:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
 1599              		.loc 1 625 9
 1600 00ec 97F92F30 		ldrsb	r3, [r7, #47]
 626:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1601              		.loc 1 626 1
 1602 00f0 1846     		mov	r0, r3
 1603 00f2 3037     		adds	r7, r7, #48
 1604              		.cfi_def_cfa_offset 8
 1605 00f4 BD46     		mov	sp, r7
 1606              		.cfi_def_cfa_register 13
 1607              		@ sp needed
 1608 00f6 80BD     		pop	{r7, pc}
 1609              		.cfi_endproc
 1610              	.LFE335:
 1612              		.section	.text.perform_ref_signal_measurement,"ax",%progbits
 1613              		.align	1
 1614              		.global	perform_ref_signal_measurement
 1615              		.syntax unified
 1616              		.thumb
 1617              		.thumb_func
 1619              	perform_ref_signal_measurement:
 1620              	.LFB336:
 627:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 628:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 629:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error perform_ref_signal_measurement(VL53L0X_DEV Dev,
 630:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint16_t *refSignalRate)
 631:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1621              		.loc 1 631 1
 1622              		.cfi_startproc
 1623              		@ args = 0, pretend = 0, frame = 40
 1624              		@ frame_needed = 1, uses_anonymous_args = 0
 1625 0000 80B5     		push	{r7, lr}
 1626              		.cfi_def_cfa_offset 8
 1627              		.cfi_offset 7, -8
 1628              		.cfi_offset 14, -4
 1629 0002 8AB0     		sub	sp, sp, #40
 1630              		.cfi_def_cfa_offset 48
 1631 0004 00AF     		add	r7, sp, #0
 1632              		.cfi_def_cfa_register 7
 1633 0006 7860     		str	r0, [r7, #4]
 1634 0008 3960     		str	r1, [r7]
 632:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error status = VL53L0X_ERROR_NONE;
 1635              		.loc 1 632 16
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 41


 1636 000a 0023     		movs	r3, #0
 1637 000c 87F82730 		strb	r3, [r7, #39]
 633:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_RangingMeasurementData_t rangingMeasurementData;
 634:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 635:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 1638              		.loc 1 635 10
 1639 0010 0023     		movs	r3, #0
 1640 0012 87F82630 		strb	r3, [r7, #38]
 636:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 637:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
 638:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
 639:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 640:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 641:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 1641              		.loc 1 641 17
 1642 0016 7B68     		ldr	r3, [r7, #4]
 1643 0018 93F83031 		ldrb	r3, [r3, #304]
 1644 001c 87F82630 		strb	r3, [r7, #38]
 642:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 643:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
 644:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This function performs a reference signal rate measurement.
 645:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 646:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1645              		.loc 1 646 5
 1646 0020 97F92730 		ldrsb	r3, [r7, #39]
 1647 0024 002B     		cmp	r3, #0
 1648 0026 07D1     		bne	.L98
 647:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev,
 1649              		.loc 1 647 12
 1650 0028 C022     		movs	r2, #192
 1651 002a 0121     		movs	r1, #1
 1652 002c 7868     		ldr	r0, [r7, #4]
 1653 002e FFF7FEFF 		bl	VL53L0X_WrByte
 1654 0032 0346     		mov	r3, r0
 1655 0034 87F82730 		strb	r3, [r7, #39]
 1656              	.L98:
 648:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0xC0);
 649:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 650:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1657              		.loc 1 650 5
 1658 0038 97F92730 		ldrsb	r3, [r7, #39]
 1659 003c 002B     		cmp	r3, #0
 1660 003e 08D1     		bne	.L99
 651:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_PerformSingleRangingMeasurement(Dev,
 1661              		.loc 1 651 12
 1662 0040 07F10803 		add	r3, r7, #8
 1663 0044 1946     		mov	r1, r3
 1664 0046 7868     		ldr	r0, [r7, #4]
 1665 0048 FFF7FEFF 		bl	VL53L0X_PerformSingleRangingMeasurement
 1666 004c 0346     		mov	r3, r0
 1667 004e 87F82730 		strb	r3, [r7, #39]
 1668              	.L99:
 652:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				&rangingMeasurementData);
 653:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 654:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1669              		.loc 1 654 5
 1670 0052 97F92730 		ldrsb	r3, [r7, #39]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 42


 1671 0056 002B     		cmp	r3, #0
 1672 0058 07D1     		bne	.L100
 655:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1673              		.loc 1 655 12
 1674 005a 0122     		movs	r2, #1
 1675 005c FF21     		movs	r1, #255
 1676 005e 7868     		ldr	r0, [r7, #4]
 1677 0060 FFF7FEFF 		bl	VL53L0X_WrByte
 1678 0064 0346     		mov	r3, r0
 1679 0066 87F82730 		strb	r3, [r7, #39]
 1680              	.L100:
 656:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 657:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1681              		.loc 1 657 5
 1682 006a 97F92730 		ldrsb	r3, [r7, #39]
 1683 006e 002B     		cmp	r3, #0
 1684 0070 07D1     		bne	.L101
 658:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_RdWord(Dev,
 1685              		.loc 1 658 12
 1686 0072 3A68     		ldr	r2, [r7]
 1687 0074 B621     		movs	r1, #182
 1688 0076 7868     		ldr	r0, [r7, #4]
 1689 0078 FFF7FEFF 		bl	VL53L0X_RdWord
 1690 007c 0346     		mov	r3, r0
 1691 007e 87F82730 		strb	r3, [r7, #39]
 1692              	.L101:
 659:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_RESULT_PEAK_SIGNAL_RATE_REF,
 660:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			refSignalRate);
 661:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 662:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE)
 1693              		.loc 1 662 5
 1694 0082 97F92730 		ldrsb	r3, [r7, #39]
 1695 0086 002B     		cmp	r3, #0
 1696 0088 07D1     		bne	.L102
 663:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1697              		.loc 1 663 12
 1698 008a 0022     		movs	r2, #0
 1699 008c FF21     		movs	r1, #255
 1700 008e 7868     		ldr	r0, [r7, #4]
 1701 0090 FFF7FEFF 		bl	VL53L0X_WrByte
 1702 0094 0346     		mov	r3, r0
 1703 0096 87F82730 		strb	r3, [r7, #39]
 1704              	.L102:
 664:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 665:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (status == VL53L0X_ERROR_NONE) {
 1705              		.loc 1 665 5
 1706 009a 97F92730 		ldrsb	r3, [r7, #39]
 1707 009e 002B     		cmp	r3, #0
 1708 00a0 12D1     		bne	.L103
 666:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
 667:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 1709              		.loc 1 667 12
 1710 00a2 97F82630 		ldrb	r3, [r7, #38]	@ zero_extendqisi2
 1711 00a6 1A46     		mov	r2, r3
 1712 00a8 0121     		movs	r1, #1
 1713 00aa 7868     		ldr	r0, [r7, #4]
 1714 00ac FFF7FEFF 		bl	VL53L0X_WrByte
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 43


 1715 00b0 0346     		mov	r3, r0
 1716 00b2 87F82730 		strb	r3, [r7, #39]
 668:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				SequenceConfig);
 669:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (status == VL53L0X_ERROR_NONE)
 1717              		.loc 1 669 6
 1718 00b6 97F92730 		ldrsb	r3, [r7, #39]
 1719 00ba 002B     		cmp	r3, #0
 1720 00bc 04D1     		bne	.L103
 670:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 1721              		.loc 1 670 4
 1722 00be 7B68     		ldr	r3, [r7, #4]
 1723 00c0 97F82620 		ldrb	r2, [r7, #38]
 1724 00c4 83F83021 		strb	r2, [r3, #304]
 1725              	.L103:
 671:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 672:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 673:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return status;
 1726              		.loc 1 673 9
 1727 00c8 97F92730 		ldrsb	r3, [r7, #39]
 674:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 1728              		.loc 1 674 1
 1729 00cc 1846     		mov	r0, r3
 1730 00ce 2837     		adds	r7, r7, #40
 1731              		.cfi_def_cfa_offset 8
 1732 00d0 BD46     		mov	sp, r7
 1733              		.cfi_def_cfa_register 13
 1734              		@ sp needed
 1735 00d2 80BD     		pop	{r7, pc}
 1736              		.cfi_endproc
 1737              	.LFE336:
 1739              		.section	.text.VL53L0X_perform_ref_spad_management,"ax",%progbits
 1740              		.align	1
 1741              		.global	VL53L0X_perform_ref_spad_management
 1742              		.syntax unified
 1743              		.thumb
 1744              		.thumb_func
 1746              	VL53L0X_perform_ref_spad_management:
 1747              	.LFB337:
 675:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 676:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_spad_management(VL53L0X_DEV Dev,
 677:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint32_t *refSpadCount,
 678:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				uint8_t *isApertureSpads)
 679:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 1748              		.loc 1 679 1
 1749              		.cfi_startproc
 1750              		@ args = 0, pretend = 0, frame = 88
 1751              		@ frame_needed = 1, uses_anonymous_args = 0
 1752 0000 90B5     		push	{r4, r7, lr}
 1753              		.cfi_def_cfa_offset 12
 1754              		.cfi_offset 4, -12
 1755              		.cfi_offset 7, -8
 1756              		.cfi_offset 14, -4
 1757 0002 9DB0     		sub	sp, sp, #116
 1758              		.cfi_def_cfa_offset 128
 1759 0004 06AF     		add	r7, sp, #24
 1760              		.cfi_def_cfa 7, 104
 1761 0006 F860     		str	r0, [r7, #12]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 44


 1762 0008 B960     		str	r1, [r7, #8]
 1763 000a 7A60     		str	r2, [r7, #4]
 680:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 1764              		.loc 1 680 16
 1765 000c 0023     		movs	r3, #0
 1766 000e 87F85730 		strb	r3, [r7, #87]
 681:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t lastSpadArray[6];
 682:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 1767              		.loc 1 682 10
 1768 0012 B423     		movs	r3, #180
 1769 0014 87F83A30 		strb	r3, [r7, #58]
 683:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t minimumSpadCount = 3;
 1770              		.loc 1 683 11
 1771 0018 0323     		movs	r3, #3
 1772 001a 7B63     		str	r3, [r7, #52]
 684:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 1773              		.loc 1 684 11
 1774 001c 2C23     		movs	r3, #44
 1775 001e 3B63     		str	r3, [r7, #48]
 685:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 1776              		.loc 1 685 11
 1777 0020 0023     		movs	r3, #0
 1778 0022 3B65     		str	r3, [r7, #80]
 686:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex = 0;
 1779              		.loc 1 686 11
 1780 0024 0023     		movs	r3, #0
 1781 0026 BB61     		str	r3, [r7, #24]
 687:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	int32_t nextGoodSpad = 0;
 1782              		.loc 1 687 10
 1783 0028 0023     		movs	r3, #0
 1784 002a 7B61     		str	r3, [r7, #20]
 688:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t targetRefRate = 0x0A00; /* 20 MCPS in 9:7 format */
 1785              		.loc 1 688 11
 1786 002c 4FF42063 		mov	r3, #2560
 1787 0030 FB85     		strh	r3, [r7, #46]	@ movhi
 689:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint16_t peakSignalRateRef;
 690:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t needAptSpads = 0;
 1788              		.loc 1 690 11
 1789 0032 0023     		movs	r3, #0
 1790 0034 FB64     		str	r3, [r7, #76]
 691:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t index = 0;
 1791              		.loc 1 691 11
 1792 0036 0023     		movs	r3, #0
 1793 0038 BB64     		str	r3, [r7, #72]
 692:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
 1794              		.loc 1 692 11
 1795 003a 0623     		movs	r3, #6
 1796 003c BB62     		str	r3, [r7, #40]
 693:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t signalRateDiff = 0;
 1797              		.loc 1 693 11
 1798 003e 0023     		movs	r3, #0
 1799 0040 7B62     		str	r3, [r7, #36]
 694:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t lastSignalRateDiff = 0;
 1800              		.loc 1 694 11
 1801 0042 0023     		movs	r3, #0
 1802 0044 7B64     		str	r3, [r7, #68]
 695:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t complete = 0;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 45


 1803              		.loc 1 695 10
 1804 0046 0023     		movs	r3, #0
 1805 0048 87F84330 		strb	r3, [r7, #67]
 696:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 1806              		.loc 1 696 10
 1807 004c 0023     		movs	r3, #0
 1808 004e 7B74     		strb	r3, [r7, #17]
 697:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 1809              		.loc 1 697 10
 1810 0050 0023     		movs	r3, #0
 1811 0052 3B74     		strb	r3, [r7, #16]
 698:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t refSpadCount_int = 0;
 1812              		.loc 1 698 11
 1813 0054 0023     		movs	r3, #0
 1814 0056 FB63     		str	r3, [r7, #60]
 699:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t	 isApertureSpads_int = 0;
 1815              		.loc 1 699 11
 1816 0058 0023     		movs	r3, #0
 1817 005a 87F83B30 		strb	r3, [r7, #59]
 700:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 701:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
 702:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * The reference SPAD initialization procedure determines the minimum
 703:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * amount of reference spads to be enables to achieve a target reference
 704:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * signal rate and should be performed once during initialization.
 705:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 706:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Either aperture or non-aperture spads are applied but never both.
 707:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Firstly non-aperture spads are set, begining with 5 spads, and
 708:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * increased one spad at a time until the closest measurement to the
 709:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * target rate is achieved.
 710:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 711:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * If the target rate is exceeded when 5 non-aperture spads are enabled,
 712:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * initialization is performed instead with aperture spads.
 713:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 714:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * When setting spads, a 'Good Spad Map' is applied.
 715:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 *
 716:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This procedure operates within a SPAD window of interest of a maximum
 717:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * 44 spads.
 718:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * The start point is currently fixed to 180, which lies towards the end
 719:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * of the non-aperture quadrant and runs in to the adjacent aperture
 720:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * quadrant.
 721:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 722:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 723:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 724:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	targetRefRate = PALDevDataGet(Dev, targetRefRate);
 1818              		.loc 1 724 16
 1819 005e FB68     		ldr	r3, [r7, #12]
 1820 0060 B3F83C31 		ldrh	r3, [r3, #316]	@ movhi
 1821 0064 FB85     		strh	r3, [r7, #46]	@ movhi
 725:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 726:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
 727:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Initialize Spad arrays.
 728:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Currently the good spad map is initialised to 'All good'.
 729:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This is a short term implementation. The good spad map will be
 730:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * provided as an input.
 731:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * Note that there are 6 bytes. Only the first 44 bits will be used to
 732:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * represent spads.
 733:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 46


 734:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 1822              		.loc 1 734 13
 1823 0066 0023     		movs	r3, #0
 1824 0068 BB64     		str	r3, [r7, #72]
 1825              		.loc 1 734 2
 1826 006a 09E0     		b	.L106
 1827              	.L107:
 735:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1828              		.loc 1 735 44 discriminator 3
 1829 006c FA68     		ldr	r2, [r7, #12]
 1830 006e BB6C     		ldr	r3, [r7, #72]
 1831 0070 1344     		add	r3, r3, r2
 1832 0072 03F59273 		add	r3, r3, #292
 1833 0076 0022     		movs	r2, #0
 1834 0078 1A70     		strb	r2, [r3]
 734:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1835              		.loc 1 734 46 discriminator 3
 1836 007a BB6C     		ldr	r3, [r7, #72]
 1837 007c 0133     		adds	r3, r3, #1
 1838 007e BB64     		str	r3, [r7, #72]
 1839              	.L106:
 734:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1840              		.loc 1 734 24 discriminator 1
 1841 0080 BA6C     		ldr	r2, [r7, #72]
 1842 0082 BB6A     		ldr	r3, [r7, #40]
 1843 0084 9A42     		cmp	r2, r3
 1844 0086 F1D3     		bcc	.L107
 736:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 737:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 738:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 1845              		.loc 1 738 11
 1846 0088 0122     		movs	r2, #1
 1847 008a FF21     		movs	r1, #255
 1848 008c F868     		ldr	r0, [r7, #12]
 1849 008e FFF7FEFF 		bl	VL53L0X_WrByte
 1850 0092 0346     		mov	r3, r0
 1851 0094 87F85730 		strb	r3, [r7, #87]
 739:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 740:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1852              		.loc 1 740 5
 1853 0098 97F95730 		ldrsb	r3, [r7, #87]
 1854 009c 002B     		cmp	r3, #0
 1855 009e 07D1     		bne	.L108
 741:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1856              		.loc 1 741 12
 1857 00a0 0022     		movs	r2, #0
 1858 00a2 4F21     		movs	r1, #79
 1859 00a4 F868     		ldr	r0, [r7, #12]
 1860 00a6 FFF7FEFF 		bl	VL53L0X_WrByte
 1861 00aa 0346     		mov	r3, r0
 1862 00ac 87F85730 		strb	r3, [r7, #87]
 1863              	.L108:
 742:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 743:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 744:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1864              		.loc 1 744 5
 1865 00b0 97F95730 		ldrsb	r3, [r7, #87]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 47


 1866 00b4 002B     		cmp	r3, #0
 1867 00b6 07D1     		bne	.L109
 745:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1868              		.loc 1 745 12
 1869 00b8 2C22     		movs	r2, #44
 1870 00ba 4E21     		movs	r1, #78
 1871 00bc F868     		ldr	r0, [r7, #12]
 1872 00be FFF7FEFF 		bl	VL53L0X_WrByte
 1873 00c2 0346     		mov	r3, r0
 1874 00c4 87F85730 		strb	r3, [r7, #87]
 1875              	.L109:
 746:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
 747:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 748:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1876              		.loc 1 748 5
 1877 00c8 97F95730 		ldrsb	r3, [r7, #87]
 1878 00cc 002B     		cmp	r3, #0
 1879 00ce 07D1     		bne	.L110
 749:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 1880              		.loc 1 749 12
 1881 00d0 0022     		movs	r2, #0
 1882 00d2 FF21     		movs	r1, #255
 1883 00d4 F868     		ldr	r0, [r7, #12]
 1884 00d6 FFF7FEFF 		bl	VL53L0X_WrByte
 1885 00da 0346     		mov	r3, r0
 1886 00dc 87F85730 		strb	r3, [r7, #87]
 1887              	.L110:
 750:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 751:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1888              		.loc 1 751 5
 1889 00e0 97F95730 		ldrsb	r3, [r7, #87]
 1890 00e4 002B     		cmp	r3, #0
 1891 00e6 09D1     		bne	.L111
 752:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1892              		.loc 1 752 12
 1893 00e8 97F83A30 		ldrb	r3, [r7, #58]	@ zero_extendqisi2
 1894 00ec 1A46     		mov	r2, r3
 1895 00ee B621     		movs	r1, #182
 1896 00f0 F868     		ldr	r0, [r7, #12]
 1897 00f2 FFF7FEFF 		bl	VL53L0X_WrByte
 1898 00f6 0346     		mov	r3, r0
 1899 00f8 87F85730 		strb	r3, [r7, #87]
 1900              	.L111:
 753:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 754:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			startSelect);
 755:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 756:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 757:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1901              		.loc 1 757 5
 1902 00fc 97F95730 		ldrsb	r3, [r7, #87]
 1903 0100 002B     		cmp	r3, #0
 1904 0102 07D1     		bne	.L112
 758:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 1905              		.loc 1 758 12
 1906 0104 0022     		movs	r2, #0
 1907 0106 8021     		movs	r1, #128
 1908 0108 F868     		ldr	r0, [r7, #12]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 48


 1909 010a FFF7FEFF 		bl	VL53L0X_WrByte
 1910 010e 0346     		mov	r3, r0
 1911 0110 87F85730 		strb	r3, [r7, #87]
 1912              	.L112:
 759:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_POWER_MANAGEMENT_GO1_POWER_FORCE, 0);
 760:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 761:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Perform ref calibration */
 762:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 1913              		.loc 1 762 5
 1914 0114 97F95730 		ldrsb	r3, [r7, #87]
 1915 0118 002B     		cmp	r3, #0
 1916 011a 0AD1     		bne	.L113
 763:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_ref_calibration(Dev, &VhvSettings,
 1917              		.loc 1 763 12
 1918 011c 07F11002 		add	r2, r7, #16
 1919 0120 07F11101 		add	r1, r7, #17
 1920 0124 0023     		movs	r3, #0
 1921 0126 F868     		ldr	r0, [r7, #12]
 1922 0128 FFF7FEFF 		bl	VL53L0X_perform_ref_calibration
 1923 012c 0346     		mov	r3, r0
 1924 012e 87F85730 		strb	r3, [r7, #87]
 1925              	.L113:
 764:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			&PhaseCal, 0);
 765:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 766:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1926              		.loc 1 766 5
 1927 0132 97F95730 		ldrsb	r3, [r7, #87]
 1928 0136 002B     		cmp	r3, #0
 1929 0138 21D1     		bne	.L114
 767:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Enable Minimum NON-APERTURE Spads */
 768:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		currentSpadIndex = 0;
 1930              		.loc 1 768 20
 1931 013a 0023     		movs	r3, #0
 1932 013c 3B65     		str	r3, [r7, #80]
 769:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		lastSpadIndex = currentSpadIndex;
 1933              		.loc 1 769 17
 1934 013e 3B6D     		ldr	r3, [r7, #80]
 1935 0140 BB61     		str	r3, [r7, #24]
 770:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		needAptSpads = 0;
 1936              		.loc 1 770 16
 1937 0142 0023     		movs	r3, #0
 1938 0144 FB64     		str	r3, [r7, #76]
 771:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 1939              		.loc 1 771 12
 1940 0146 FB6C     		ldr	r3, [r7, #76]
 1941 0148 D9B2     		uxtb	r1, r3
 772:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					needAptSpads,
 773:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 1942              		.loc 1 773 24
 1943 014a FB68     		ldr	r3, [r7, #12]
 1944 014c 03F59570 		add	r0, r3, #298
 774:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 1945              		.loc 1 774 24
 1946 0150 FB68     		ldr	r3, [r7, #12]
 1947 0152 03F59274 		add	r4, r3, #292
 771:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = enable_ref_spads(Dev,
 1948              		.loc 1 771 12
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 49


 1949 0156 97F83A30 		ldrb	r3, [r7, #58]	@ zero_extendqisi2
 1950 015a 07F11802 		add	r2, r7, #24
 1951 015e 0492     		str	r2, [sp, #16]
 1952 0160 7A6B     		ldr	r2, [r7, #52]
 1953 0162 0392     		str	r2, [sp, #12]
 1954 0164 3A6D     		ldr	r2, [r7, #80]
 1955 0166 0292     		str	r2, [sp, #8]
 1956 0168 0193     		str	r3, [sp, #4]
 1957 016a BB6A     		ldr	r3, [r7, #40]
 1958 016c 0093     		str	r3, [sp]
 1959 016e 2346     		mov	r3, r4
 1960 0170 0246     		mov	r2, r0
 1961 0172 F868     		ldr	r0, [r7, #12]
 1962 0174 FFF7FEFF 		bl	enable_ref_spads
 1963 0178 0346     		mov	r3, r0
 1964 017a 87F85730 		strb	r3, [r7, #87]
 1965              	.L114:
 775:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					spadArraySize,
 776:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					startSelect,
 777:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 778:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 779:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 780:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 781:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 782:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 1966              		.loc 1 782 5
 1967 017e 97F95730 		ldrsb	r3, [r7, #87]
 1968 0182 002B     		cmp	r3, #0
 1969 0184 74D1     		bne	.L115
 783:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		currentSpadIndex = lastSpadIndex;
 1970              		.loc 1 783 20
 1971 0186 BB69     		ldr	r3, [r7, #24]
 1972 0188 3B65     		str	r3, [r7, #80]
 784:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 785:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = perform_ref_signal_measurement(Dev,
 1973              		.loc 1 785 12
 1974 018a 07F11203 		add	r3, r7, #18
 1975 018e 1946     		mov	r1, r3
 1976 0190 F868     		ldr	r0, [r7, #12]
 1977 0192 FFF7FEFF 		bl	perform_ref_signal_measurement
 1978 0196 0346     		mov	r3, r0
 1979 0198 87F85730 		strb	r3, [r7, #87]
 786:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			&peakSignalRateRef);
 787:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if ((Status == VL53L0X_ERROR_NONE) &&
 1980              		.loc 1 787 6
 1981 019c 97F95730 		ldrsb	r3, [r7, #87]
 1982 01a0 002B     		cmp	r3, #0
 1983 01a2 61D1     		bne	.L116
 788:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 1984              		.loc 1 788 23 discriminator 1
 1985 01a4 7B8A     		ldrh	r3, [r7, #18]
 787:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(peakSignalRateRef > targetRefRate)) {
 1986              		.loc 1 787 38 discriminator 1
 1987 01a6 FA8D     		ldrh	r2, [r7, #46]
 1988 01a8 9A42     		cmp	r2, r3
 1989 01aa 5DD2     		bcs	.L116
 789:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Signal rate measurement too high,
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 50


 790:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * switch to APERTURE SPADs */
 791:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 792:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			for (index = 0; index < spadArraySize; index++)
 1990              		.loc 1 792 15
 1991 01ac 0023     		movs	r3, #0
 1992 01ae BB64     		str	r3, [r7, #72]
 1993              		.loc 1 792 4
 1994 01b0 09E0     		b	.L117
 1995              	.L118:
 793:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 1996              		.loc 1 793 46 discriminator 3
 1997 01b2 FA68     		ldr	r2, [r7, #12]
 1998 01b4 BB6C     		ldr	r3, [r7, #72]
 1999 01b6 1344     		add	r3, r3, r2
 2000 01b8 03F59273 		add	r3, r3, #292
 2001 01bc 0022     		movs	r2, #0
 2002 01be 1A70     		strb	r2, [r3]
 792:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2003              		.loc 1 792 48 discriminator 3
 2004 01c0 BB6C     		ldr	r3, [r7, #72]
 2005 01c2 0133     		adds	r3, r3, #1
 2006 01c4 BB64     		str	r3, [r7, #72]
 2007              	.L117:
 792:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2008              		.loc 1 792 26 discriminator 1
 2009 01c6 BA6C     		ldr	r2, [r7, #72]
 2010 01c8 BB6A     		ldr	r3, [r7, #40]
 2011 01ca 9A42     		cmp	r2, r3
 2012 01cc F1D3     		bcc	.L118
 794:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 795:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 796:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Increment to the first APERTURE spad */
 797:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			while ((is_aperture(startSelect + currentSpadIndex)
 2013              		.loc 1 797 10
 2014 01ce 02E0     		b	.L119
 2015              	.L121:
 798:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 799:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2016              		.loc 1 799 21
 2017 01d0 3B6D     		ldr	r3, [r7, #80]
 2018 01d2 0133     		adds	r3, r3, #1
 2019 01d4 3B65     		str	r3, [r7, #80]
 2020              	.L119:
 797:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2021              		.loc 1 797 12
 2022 01d6 97F83A20 		ldrb	r2, [r7, #58]	@ zero_extendqisi2
 2023 01da 3B6D     		ldr	r3, [r7, #80]
 2024 01dc 1344     		add	r3, r3, r2
 2025 01de 1846     		mov	r0, r3
 2026 01e0 FFF7FEFF 		bl	is_aperture
 2027 01e4 0346     		mov	r3, r0
 798:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2028              		.loc 1 798 11
 2029 01e6 002B     		cmp	r3, #0
 2030 01e8 03D1     		bne	.L120
 798:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				== 0) && (currentSpadIndex < maxSpadCount)) {
 2031              		.loc 1 798 11 is_stmt 0 discriminator 1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 51


 2032 01ea 3A6D     		ldr	r2, [r7, #80]
 2033 01ec 3B6B     		ldr	r3, [r7, #48]
 2034 01ee 9A42     		cmp	r2, r3
 2035 01f0 EED3     		bcc	.L121
 2036              	.L120:
 800:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 801:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 802:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			needAptSpads = 1;
 2037              		.loc 1 802 17 is_stmt 1
 2038 01f2 0123     		movs	r3, #1
 2039 01f4 FB64     		str	r3, [r7, #76]
 803:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 804:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = enable_ref_spads(Dev,
 2040              		.loc 1 804 13
 2041 01f6 FB6C     		ldr	r3, [r7, #76]
 2042 01f8 D9B2     		uxtb	r1, r3
 805:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					needAptSpads,
 806:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefGoodSpadMap,
 2043              		.loc 1 806 24
 2044 01fa FB68     		ldr	r3, [r7, #12]
 2045 01fc 03F59570 		add	r0, r3, #298
 807:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2046              		.loc 1 807 24
 2047 0200 FB68     		ldr	r3, [r7, #12]
 2048 0202 03F59274 		add	r4, r3, #292
 804:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					needAptSpads,
 2049              		.loc 1 804 13
 2050 0206 97F83A30 		ldrb	r3, [r7, #58]	@ zero_extendqisi2
 2051 020a 07F11802 		add	r2, r7, #24
 2052 020e 0492     		str	r2, [sp, #16]
 2053 0210 7A6B     		ldr	r2, [r7, #52]
 2054 0212 0392     		str	r2, [sp, #12]
 2055 0214 3A6D     		ldr	r2, [r7, #80]
 2056 0216 0292     		str	r2, [sp, #8]
 2057 0218 0193     		str	r3, [sp, #4]
 2058 021a BB6A     		ldr	r3, [r7, #40]
 2059 021c 0093     		str	r3, [sp]
 2060 021e 2346     		mov	r3, r4
 2061 0220 0246     		mov	r2, r0
 2062 0222 F868     		ldr	r0, [r7, #12]
 2063 0224 FFF7FEFF 		bl	enable_ref_spads
 2064 0228 0346     		mov	r3, r0
 2065 022a 87F85730 		strb	r3, [r7, #87]
 808:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					spadArraySize,
 809:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					startSelect,
 810:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					currentSpadIndex,
 811:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					minimumSpadCount,
 812:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					&lastSpadIndex);
 813:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 814:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 2066              		.loc 1 814 7
 2067 022e 97F95730 		ldrsb	r3, [r7, #87]
 2068 0232 002B     		cmp	r3, #0
 2069 0234 1BD1     		bne	.L135
 815:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2070              		.loc 1 815 22
 2071 0236 BB69     		ldr	r3, [r7, #24]
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 52


 2072 0238 3B65     		str	r3, [r7, #80]
 816:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Status = perform_ref_signal_measurement(Dev,
 2073              		.loc 1 816 14
 2074 023a 07F11203 		add	r3, r7, #18
 2075 023e 1946     		mov	r1, r3
 2076 0240 F868     		ldr	r0, [r7, #12]
 2077 0242 FFF7FEFF 		bl	perform_ref_signal_measurement
 2078 0246 0346     		mov	r3, r0
 2079 0248 87F85730 		strb	r3, [r7, #87]
 817:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 						&peakSignalRateRef);
 818:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 819:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				if ((Status == VL53L0X_ERROR_NONE) &&
 2080              		.loc 1 819 8
 2081 024c 97F95730 		ldrsb	r3, [r7, #87]
 2082 0250 002B     		cmp	r3, #0
 2083 0252 0CD1     		bne	.L135
 820:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2084              		.loc 1 820 25 discriminator 1
 2085 0254 7B8A     		ldrh	r3, [r7, #18]
 819:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					(peakSignalRateRef > targetRefRate)) {
 2086              		.loc 1 819 40 discriminator 1
 2087 0256 FA8D     		ldrh	r2, [r7, #46]
 2088 0258 9A42     		cmp	r2, r3
 2089 025a 08D2     		bcs	.L135
 821:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					/* Signal rate still too high after
 822:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 * setting the minimum number of
 823:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 * APERTURE spads. Can do no more
 824:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 * therefore set the min number of
 825:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 * aperture spads as the result.
 826:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 */
 827:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					isApertureSpads_int = 1;
 2090              		.loc 1 827 26
 2091 025c 0123     		movs	r3, #1
 2092 025e 87F83B30 		strb	r3, [r7, #59]
 828:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					refSpadCount_int = minimumSpadCount;
 2093              		.loc 1 828 23
 2094 0262 7B6B     		ldr	r3, [r7, #52]
 2095 0264 FB63     		str	r3, [r7, #60]
 814:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2096              		.loc 1 814 7
 2097 0266 02E0     		b	.L135
 2098              	.L116:
 829:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				}
 830:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 831:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		} else {
 832:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			needAptSpads = 0;
 2099              		.loc 1 832 17
 2100 0268 0023     		movs	r3, #0
 2101 026a FB64     		str	r3, [r7, #76]
 2102 026c 00E0     		b	.L115
 2103              	.L135:
 814:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex = lastSpadIndex;
 2104              		.loc 1 814 7
 2105 026e 00BF     		nop
 2106              	.L115:
 833:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 834:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 53


 835:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 836:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) &&
 2107              		.loc 1 836 5
 2108 0270 97F95730 		ldrsb	r3, [r7, #87]
 2109 0274 002B     		cmp	r3, #0
 2110 0276 40F0AF80 		bne	.L123
 837:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2111              		.loc 1 837 22 discriminator 1
 2112 027a 7B8A     		ldrh	r3, [r7, #18]
 836:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		(peakSignalRateRef < targetRefRate)) {
 2113              		.loc 1 836 37 discriminator 1
 2114 027c FA8D     		ldrh	r2, [r7, #46]
 2115 027e 9A42     		cmp	r2, r3
 2116 0280 40F2AA80 		bls	.L123
 838:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* At this point, the minimum number of either aperture
 839:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * or non-aperture spads have been set. Proceed to add
 840:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * spads and perform measurements until the target
 841:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 * reference is reached.
 842:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		 */
 843:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		isApertureSpads_int = needAptSpads;
 2117              		.loc 1 843 23
 2118 0284 FB6C     		ldr	r3, [r7, #76]
 2119 0286 87F83B30 		strb	r3, [r7, #59]
 844:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		refSpadCount_int	= minimumSpadCount;
 2120              		.loc 1 844 20
 2121 028a 7B6B     		ldr	r3, [r7, #52]
 2122 028c FB63     		str	r3, [r7, #60]
 845:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 846:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		memcpy(lastSpadArray, Dev->Data.SpadData.RefSpadEnables,
 2123              		.loc 1 846 43
 2124 028e FB68     		ldr	r3, [r7, #12]
 2125 0290 03F59271 		add	r1, r3, #292
 2126              		.loc 1 846 3
 2127 0294 07F11C03 		add	r3, r7, #28
 2128 0298 BA6A     		ldr	r2, [r7, #40]
 2129 029a 1846     		mov	r0, r3
 2130 029c FFF7FEFF 		bl	memcpy
 847:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				spadArraySize);
 848:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		lastSignalRateDiff = abs(peakSignalRateRef -
 2131              		.loc 1 848 46
 2132 02a0 7B8A     		ldrh	r3, [r7, #18]
 2133 02a2 1A46     		mov	r2, r3
 2134 02a4 FB8D     		ldrh	r3, [r7, #46]
 2135 02a6 D31A     		subs	r3, r2, r3
 2136              		.loc 1 848 24
 2137 02a8 002B     		cmp	r3, #0
 2138 02aa B8BF     		it	lt
 2139 02ac 5B42     		rsblt	r3, r3, #0
 2140              		.loc 1 848 22
 2141 02ae 7B64     		str	r3, [r7, #68]
 849:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			targetRefRate);
 850:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		complete = 0;
 2142              		.loc 1 850 12
 2143 02b0 0023     		movs	r3, #0
 2144 02b2 87F84330 		strb	r3, [r7, #67]
 851:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 852:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		while (!complete) {
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 54


 2145              		.loc 1 852 9
 2146 02b6 86E0     		b	.L124
 2147              	.L132:
 853:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 854:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 2148              		.loc 1 854 23
 2149 02b8 FB68     		ldr	r3, [r7, #12]
 2150 02ba 03F59570 		add	r0, r3, #298
 853:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2151              		.loc 1 853 4
 2152 02be 07F11403 		add	r3, r7, #20
 2153 02c2 3A6D     		ldr	r2, [r7, #80]
 2154 02c4 B96A     		ldr	r1, [r7, #40]
 2155 02c6 FFF7FEFF 		bl	get_next_good_spad
 855:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				spadArraySize, currentSpadIndex,
 856:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				&nextGoodSpad);
 857:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 858:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (nextGoodSpad == -1) {
 2156              		.loc 1 858 21
 2157 02ca 7B69     		ldr	r3, [r7, #20]
 2158              		.loc 1 858 7
 2159 02cc B3F1FF3F 		cmp	r3, #-1
 2160 02d0 03D1     		bne	.L125
 859:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Status = VL53L0X_ERROR_REF_SPAD_INIT;
 2161              		.loc 1 859 12
 2162 02d2 CE23     		movs	r3, #206
 2163 02d4 87F85730 		strb	r3, [r7, #87]
 860:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 2164              		.loc 1 860 5
 2165 02d8 7EE0     		b	.L123
 2166              	.L125:
 861:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 862:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 863:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* Cannot combine Aperture and Non-Aperture spads, so
 864:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * ensure the current spad is of the correct type.
 865:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 */
 866:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (is_aperture((uint32_t)startSelect + nextGoodSpad) !=
 2167              		.loc 1 866 20
 2168 02da 97F83A30 		ldrb	r3, [r7, #58]	@ zero_extendqisi2
 2169              		.loc 1 866 8
 2170 02de 7A69     		ldr	r2, [r7, #20]
 2171 02e0 1344     		add	r3, r3, r2
 2172 02e2 1846     		mov	r0, r3
 2173 02e4 FFF7FEFF 		bl	is_aperture
 2174 02e8 0346     		mov	r3, r0
 2175 02ea 1A46     		mov	r2, r3
 2176              		.loc 1 866 7
 2177 02ec FB6C     		ldr	r3, [r7, #76]
 2178 02ee 9342     		cmp	r3, r2
 2179 02f0 03D0     		beq	.L126
 867:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					needAptSpads) {
 868:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				/* At this point we have enabled the maximum
 869:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 * number of Aperture spads.
 870:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 */
 871:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				complete = 1;
 2180              		.loc 1 871 14
 2181 02f2 0123     		movs	r3, #1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 55


 2182 02f4 87F84330 		strb	r3, [r7, #67]
 872:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 2183              		.loc 1 872 5
 2184 02f8 6EE0     		b	.L123
 2185              	.L126:
 873:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 874:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 875:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			(refSpadCount_int)++;
 2186              		.loc 1 875 22
 2187 02fa FB6B     		ldr	r3, [r7, #60]
 2188 02fc 0133     		adds	r3, r3, #1
 2189 02fe FB63     		str	r3, [r7, #60]
 876:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 877:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			currentSpadIndex = nextGoodSpad;
 2190              		.loc 1 877 21
 2191 0300 7B69     		ldr	r3, [r7, #20]
 2192 0302 3B65     		str	r3, [r7, #80]
 878:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 879:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2193              		.loc 1 879 24
 2194 0304 FB68     		ldr	r3, [r7, #12]
 2195 0306 03F59273 		add	r3, r3, #292
 878:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = enable_spad_bit(
 2196              		.loc 1 878 13
 2197 030a 3A6D     		ldr	r2, [r7, #80]
 2198 030c B96A     		ldr	r1, [r7, #40]
 2199 030e 1846     		mov	r0, r3
 2200 0310 FFF7FEFF 		bl	enable_spad_bit
 2201 0314 0346     		mov	r3, r0
 2202 0316 87F85730 		strb	r3, [r7, #87]
 880:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					spadArraySize, currentSpadIndex);
 881:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 882:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 2203              		.loc 1 882 7
 2204 031a 97F95730 		ldrsb	r3, [r7, #87]
 2205 031e 002B     		cmp	r3, #0
 2206 0320 0CD1     		bne	.L127
 883:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex++;
 2207              		.loc 1 883 21
 2208 0322 3B6D     		ldr	r3, [r7, #80]
 2209 0324 0133     		adds	r3, r3, #1
 2210 0326 3B65     		str	r3, [r7, #80]
 884:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				/* Proceed to apply the additional spad and
 885:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 * perform measurement. */
 886:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Status = set_ref_spad_map(Dev,
 887:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 2211              		.loc 1 887 24
 2212 0328 FB68     		ldr	r3, [r7, #12]
 2213 032a 03F59273 		add	r3, r3, #292
 886:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables);
 2214              		.loc 1 886 14
 2215 032e 1946     		mov	r1, r3
 2216 0330 F868     		ldr	r0, [r7, #12]
 2217 0332 FFF7FEFF 		bl	set_ref_spad_map
 2218 0336 0346     		mov	r3, r0
 2219 0338 87F85730 		strb	r3, [r7, #87]
 2220              	.L127:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 56


 888:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 889:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 890:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 2221              		.loc 1 890 7
 2222 033c 97F95730 		ldrsb	r3, [r7, #87]
 2223 0340 002B     		cmp	r3, #0
 2224 0342 46D1     		bne	.L136
 891:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 892:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 893:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = perform_ref_signal_measurement(Dev,
 2225              		.loc 1 893 13
 2226 0344 07F11203 		add	r3, r7, #18
 2227 0348 1946     		mov	r1, r3
 2228 034a F868     		ldr	r0, [r7, #12]
 2229 034c FFF7FEFF 		bl	perform_ref_signal_measurement
 2230 0350 0346     		mov	r3, r0
 2231 0352 87F85730 		strb	r3, [r7, #87]
 894:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					&peakSignalRateRef);
 895:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 896:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status != VL53L0X_ERROR_NONE)
 2232              		.loc 1 896 7
 2233 0356 97F95730 		ldrsb	r3, [r7, #87]
 2234 035a 002B     		cmp	r3, #0
 2235 035c 3BD1     		bne	.L137
 897:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				break;
 898:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 899:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			signalRateDiff = abs(peakSignalRateRef - targetRefRate);
 2236              		.loc 1 899 43
 2237 035e 7B8A     		ldrh	r3, [r7, #18]
 2238 0360 1A46     		mov	r2, r3
 2239 0362 FB8D     		ldrh	r3, [r7, #46]
 2240 0364 D31A     		subs	r3, r2, r3
 2241              		.loc 1 899 21
 2242 0366 002B     		cmp	r3, #0
 2243 0368 B8BF     		it	lt
 2244 036a 5B42     		rsblt	r3, r3, #0
 2245              		.loc 1 899 19
 2246 036c 7B62     		str	r3, [r7, #36]
 900:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 901:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (peakSignalRateRef > targetRefRate) {
 2247              		.loc 1 901 26
 2248 036e 7B8A     		ldrh	r3, [r7, #18]
 2249              		.loc 1 901 7
 2250 0370 FA8D     		ldrh	r2, [r7, #46]
 2251 0372 9A42     		cmp	r2, r3
 2252 0374 1CD2     		bcs	.L130
 902:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				/* Select the spad map that provides the
 903:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 * measurement closest to the target rate,
 904:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 * either above or below it.
 905:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 */
 906:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				if (signalRateDiff > lastSignalRateDiff) {
 2253              		.loc 1 906 8
 2254 0376 7A6A     		ldr	r2, [r7, #36]
 2255 0378 7B6C     		ldr	r3, [r7, #68]
 2256 037a 9A42     		cmp	r2, r3
 2257 037c 14D9     		bls	.L131
 907:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					/* Previous spad map produced a closer
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 57


 908:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					 * measurement, so choose this. */
 909:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Status = set_ref_spad_map(Dev,
 2258              		.loc 1 909 15
 2259 037e 07F11C03 		add	r3, r7, #28
 2260 0382 1946     		mov	r1, r3
 2261 0384 F868     		ldr	r0, [r7, #12]
 2262 0386 FFF7FEFF 		bl	set_ref_spad_map
 2263 038a 0346     		mov	r3, r0
 2264 038c 87F85730 		strb	r3, [r7, #87]
 910:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							lastSpadArray);
 911:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					memcpy(
 912:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2265              		.loc 1 912 24
 2266 0390 FB68     		ldr	r3, [r7, #12]
 2267 0392 03F59273 		add	r3, r3, #292
 911:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2268              		.loc 1 911 6
 2269 0396 07F11C01 		add	r1, r7, #28
 2270 039a BA6A     		ldr	r2, [r7, #40]
 2271 039c 1846     		mov	r0, r3
 2272 039e FFF7FEFF 		bl	memcpy
 913:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					lastSpadArray, spadArraySize);
 914:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 915:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					(refSpadCount_int)--;
 2273              		.loc 1 915 24
 2274 03a2 FB6B     		ldr	r3, [r7, #60]
 2275 03a4 013B     		subs	r3, r3, #1
 2276 03a6 FB63     		str	r3, [r7, #60]
 2277              	.L131:
 916:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				}
 917:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				complete = 1;
 2278              		.loc 1 917 14
 2279 03a8 0123     		movs	r3, #1
 2280 03aa 87F84330 		strb	r3, [r7, #67]
 2281 03ae 0AE0     		b	.L124
 2282              	.L130:
 918:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			} else {
 919:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				/* Continue to add spads */
 920:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				lastSignalRateDiff = signalRateDiff;
 2283              		.loc 1 920 24
 2284 03b0 7B6A     		ldr	r3, [r7, #36]
 2285 03b2 7B64     		str	r3, [r7, #68]
 921:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 922:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					Dev->Data.SpadData.RefSpadEnables,
 2286              		.loc 1 922 24
 2287 03b4 FB68     		ldr	r3, [r7, #12]
 2288 03b6 03F59271 		add	r1, r3, #292
 921:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				memcpy(lastSpadArray,
 2289              		.loc 1 921 5
 2290 03ba 07F11C03 		add	r3, r7, #28
 2291 03be BA6A     		ldr	r2, [r7, #40]
 2292 03c0 1846     		mov	r0, r3
 2293 03c2 FFF7FEFF 		bl	memcpy
 2294              	.L124:
 852:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			get_next_good_spad(
 2295              		.loc 1 852 10
 2296 03c6 97F84330 		ldrb	r3, [r7, #67]	@ zero_extendqisi2
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 58


 2297 03ca 002B     		cmp	r3, #0
 2298 03cc 3FF474AF 		beq	.L132
 2299 03d0 02E0     		b	.L123
 2300              	.L136:
 891:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 2301              		.loc 1 891 5
 2302 03d2 00BF     		nop
 2303 03d4 00E0     		b	.L123
 2304              	.L137:
 897:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 2305              		.loc 1 897 5
 2306 03d6 00BF     		nop
 2307              	.L123:
 923:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					spadArraySize);
 924:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
 925:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 926:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		} /* while */
 927:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 928:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 929:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2308              		.loc 1 929 5
 2309 03d8 97F95730 		ldrsb	r3, [r7, #87]
 2310 03dc 002B     		cmp	r3, #0
 2311 03de 15D1     		bne	.L133
 930:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*refSpadCount = refSpadCount_int;
 2312              		.loc 1 930 17
 2313 03e0 BB68     		ldr	r3, [r7, #8]
 2314 03e2 FA6B     		ldr	r2, [r7, #60]
 2315 03e4 1A60     		str	r2, [r3]
 931:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*isApertureSpads = isApertureSpads_int;
 2316              		.loc 1 931 20
 2317 03e6 7B68     		ldr	r3, [r7, #4]
 2318 03e8 97F83B20 		ldrb	r2, [r7, #59]
 2319 03ec 1A70     		strb	r2, [r3]
 932:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 933:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 2320              		.loc 1 933 3
 2321 03ee FB68     		ldr	r3, [r7, #12]
 2322 03f0 0122     		movs	r2, #1
 2323 03f2 83F81521 		strb	r2, [r3, #277]
 934:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2324              		.loc 1 934 3
 2325 03f6 BB68     		ldr	r3, [r7, #8]
 2326 03f8 1B68     		ldr	r3, [r3]
 2327 03fa DAB2     		uxtb	r2, r3
 2328 03fc FB68     		ldr	r3, [r7, #12]
 2329 03fe 83F81321 		strb	r2, [r3, #275]
 935:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(*refSpadCount));
 936:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2330              		.loc 1 936 3
 2331 0402 7B68     		ldr	r3, [r7, #4]
 2332 0404 1A78     		ldrb	r2, [r3]	@ zero_extendqisi2
 2333 0406 FB68     		ldr	r3, [r7, #12]
 2334 0408 83F81421 		strb	r2, [r3, #276]
 2335              	.L133:
 937:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadType, *isApertureSpads);
 938:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 59


 939:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 940:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 2336              		.loc 1 940 9
 2337 040c 97F95730 		ldrsb	r3, [r7, #87]
 941:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 2338              		.loc 1 941 1
 2339 0410 1846     		mov	r0, r3
 2340 0412 5C37     		adds	r7, r7, #92
 2341              		.cfi_def_cfa_offset 12
 2342 0414 BD46     		mov	sp, r7
 2343              		.cfi_def_cfa_register 13
 2344              		@ sp needed
 2345 0416 90BD     		pop	{r4, r7, pc}
 2346              		.cfi_endproc
 2347              	.LFE337:
 2349              		.section	.text.VL53L0X_set_reference_spads,"ax",%progbits
 2350              		.align	1
 2351              		.global	VL53L0X_set_reference_spads
 2352              		.syntax unified
 2353              		.thumb
 2354              		.thumb_func
 2356              	VL53L0X_set_reference_spads:
 2357              	.LFB338:
 942:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 943:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_reference_spads(VL53L0X_DEV Dev,
 944:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				 uint32_t count, uint8_t isApertureSpads)
 945:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 2358              		.loc 1 945 1
 2359              		.cfi_startproc
 2360              		@ args = 0, pretend = 0, frame = 48
 2361              		@ frame_needed = 1, uses_anonymous_args = 0
 2362 0000 90B5     		push	{r4, r7, lr}
 2363              		.cfi_def_cfa_offset 12
 2364              		.cfi_offset 4, -12
 2365              		.cfi_offset 7, -8
 2366              		.cfi_offset 14, -4
 2367 0002 93B0     		sub	sp, sp, #76
 2368              		.cfi_def_cfa_offset 88
 2369 0004 06AF     		add	r7, sp, #24
 2370              		.cfi_def_cfa 7, 64
 2371 0006 F860     		str	r0, [r7, #12]
 2372 0008 B960     		str	r1, [r7, #8]
 2373 000a 1346     		mov	r3, r2
 2374 000c FB71     		strb	r3, [r7, #7]
 946:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2375              		.loc 1 946 16
 2376 000e 0023     		movs	r3, #0
 2377 0010 87F82F30 		strb	r3, [r7, #47]
 947:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t currentSpadIndex = 0;
 2378              		.loc 1 947 11
 2379 0014 0023     		movs	r3, #0
 2380 0016 BB62     		str	r3, [r7, #40]
 948:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t startSelect = 0xB4;
 2381              		.loc 1 948 10
 2382 0018 B423     		movs	r3, #180
 2383 001a 87F82330 		strb	r3, [r7, #35]
 949:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t spadArraySize = 6;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 60


 2384              		.loc 1 949 11
 2385 001e 0623     		movs	r3, #6
 2386 0020 FB61     		str	r3, [r7, #28]
 950:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t maxSpadCount = 44;
 2387              		.loc 1 950 11
 2388 0022 2C23     		movs	r3, #44
 2389 0024 BB61     		str	r3, [r7, #24]
 951:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t lastSpadIndex;
 952:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t index;
 953:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 954:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/*
 955:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * This function applies a requested number of reference spads, either
 956:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * aperture or
 957:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * non-aperture, as requested.
 958:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * The good spad map will be applied.
 959:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
 960:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 961:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, 0xFF, 0x01);
 2390              		.loc 1 961 11
 2391 0026 0122     		movs	r2, #1
 2392 0028 FF21     		movs	r1, #255
 2393 002a F868     		ldr	r0, [r7, #12]
 2394 002c FFF7FEFF 		bl	VL53L0X_WrByte
 2395 0030 0346     		mov	r3, r0
 2396 0032 87F82F30 		strb	r3, [r7, #47]
 962:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 963:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2397              		.loc 1 963 5
 2398 0036 97F92F30 		ldrsb	r3, [r7, #47]
 2399 003a 002B     		cmp	r3, #0
 2400 003c 07D1     		bne	.L139
 964:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2401              		.loc 1 964 12
 2402 003e 0022     		movs	r2, #0
 2403 0040 4F21     		movs	r1, #79
 2404 0042 F868     		ldr	r0, [r7, #12]
 2405 0044 FFF7FEFF 		bl	VL53L0X_WrByte
 2406 0048 0346     		mov	r3, r0
 2407 004a 87F82F30 		strb	r3, [r7, #47]
 2408              	.L139:
 965:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_REF_EN_START_OFFSET, 0x00);
 966:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 967:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2409              		.loc 1 967 5
 2410 004e 97F92F30 		ldrsb	r3, [r7, #47]
 2411 0052 002B     		cmp	r3, #0
 2412 0054 07D1     		bne	.L140
 968:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2413              		.loc 1 968 12
 2414 0056 2C22     		movs	r2, #44
 2415 0058 4E21     		movs	r1, #78
 2416 005a F868     		ldr	r0, [r7, #12]
 2417 005c FFF7FEFF 		bl	VL53L0X_WrByte
 2418 0060 0346     		mov	r3, r0
 2419 0062 87F82F30 		strb	r3, [r7, #47]
 2420              	.L140:
 969:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_DYNAMIC_SPAD_NUM_REQUESTED_REF_SPAD, 0x2C);
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 61


 970:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 971:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2421              		.loc 1 971 5
 2422 0066 97F92F30 		ldrsb	r3, [r7, #47]
 2423 006a 002B     		cmp	r3, #0
 2424 006c 07D1     		bne	.L141
 972:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2425              		.loc 1 972 12
 2426 006e 0022     		movs	r2, #0
 2427 0070 FF21     		movs	r1, #255
 2428 0072 F868     		ldr	r0, [r7, #12]
 2429 0074 FFF7FEFF 		bl	VL53L0X_WrByte
 2430 0078 0346     		mov	r3, r0
 2431 007a 87F82F30 		strb	r3, [r7, #47]
 2432              	.L141:
 973:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 974:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2433              		.loc 1 974 5
 2434 007e 97F92F30 		ldrsb	r3, [r7, #47]
 2435 0082 002B     		cmp	r3, #0
 2436 0084 09D1     		bne	.L142
 975:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev,
 2437              		.loc 1 975 12
 2438 0086 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 2439 008a 1A46     		mov	r2, r3
 2440 008c B621     		movs	r1, #182
 2441 008e F868     		ldr	r0, [r7, #12]
 2442 0090 FFF7FEFF 		bl	VL53L0X_WrByte
 2443 0094 0346     		mov	r3, r0
 2444 0096 87F82F30 		strb	r3, [r7, #47]
 2445              	.L142:
 976:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VL53L0X_REG_GLOBAL_CONFIG_REF_EN_START_SELECT,
 977:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			startSelect);
 978:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 979:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	for (index = 0; index < spadArraySize; index++)
 2446              		.loc 1 979 13
 2447 009a 0023     		movs	r3, #0
 2448 009c 7B62     		str	r3, [r7, #36]
 2449              		.loc 1 979 2
 2450 009e 09E0     		b	.L143
 2451              	.L144:
 980:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2452              		.loc 1 980 44 discriminator 3
 2453 00a0 FA68     		ldr	r2, [r7, #12]
 2454 00a2 7B6A     		ldr	r3, [r7, #36]
 2455 00a4 1344     		add	r3, r3, r2
 2456 00a6 03F59273 		add	r3, r3, #292
 2457 00aa 0022     		movs	r2, #0
 2458 00ac 1A70     		strb	r2, [r3]
 979:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2459              		.loc 1 979 46 discriminator 3
 2460 00ae 7B6A     		ldr	r3, [r7, #36]
 2461 00b0 0133     		adds	r3, r3, #1
 2462 00b2 7B62     		str	r3, [r7, #36]
 2463              	.L143:
 979:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Dev->Data.SpadData.RefSpadEnables[index] = 0;
 2464              		.loc 1 979 24 discriminator 1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 62


 2465 00b4 7A6A     		ldr	r2, [r7, #36]
 2466 00b6 FB69     		ldr	r3, [r7, #28]
 2467 00b8 9A42     		cmp	r2, r3
 2468 00ba F1D3     		bcc	.L144
 981:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 982:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (isApertureSpads) {
 2469              		.loc 1 982 5
 2470 00bc FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 2471 00be 002B     		cmp	r3, #0
 2472 00c0 11D0     		beq	.L145
 983:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* Increment to the first APERTURE spad */
 984:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		while ((is_aperture(startSelect + currentSpadIndex) == 0) &&
 2473              		.loc 1 984 9
 2474 00c2 02E0     		b	.L146
 2475              	.L147:
 985:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 986:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			currentSpadIndex++;
 2476              		.loc 1 986 20
 2477 00c4 BB6A     		ldr	r3, [r7, #40]
 2478 00c6 0133     		adds	r3, r3, #1
 2479 00c8 BB62     		str	r3, [r7, #40]
 2480              	.L146:
 984:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 2481              		.loc 1 984 11
 2482 00ca 97F82320 		ldrb	r2, [r7, #35]	@ zero_extendqisi2
 2483 00ce BB6A     		ldr	r3, [r7, #40]
 2484 00d0 1344     		add	r3, r3, r2
 2485 00d2 1846     		mov	r0, r3
 2486 00d4 FFF7FEFF 		bl	is_aperture
 2487 00d8 0346     		mov	r3, r0
 984:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 2488              		.loc 1 984 61
 2489 00da 002B     		cmp	r3, #0
 2490 00dc 03D1     		bne	.L145
 984:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			  (currentSpadIndex < maxSpadCount)) {
 2491              		.loc 1 984 61 is_stmt 0 discriminator 1
 2492 00de BA6A     		ldr	r2, [r7, #40]
 2493 00e0 BB69     		ldr	r3, [r7, #24]
 2494 00e2 9A42     		cmp	r2, r3
 2495 00e4 EED3     		bcc	.L147
 2496              	.L145:
 987:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
 988:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
 989:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = enable_ref_spads(Dev,
 990:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				isApertureSpads,
 991:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefGoodSpadMap,
 2497              		.loc 1 991 23 is_stmt 1
 2498 00e6 FB68     		ldr	r3, [r7, #12]
 2499 00e8 03F59570 		add	r0, r3, #298
 992:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				Dev->Data.SpadData.RefSpadEnables,
 2500              		.loc 1 992 23
 2501 00ec FB68     		ldr	r3, [r7, #12]
 2502 00ee 03F59274 		add	r4, r3, #292
 989:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				isApertureSpads,
 2503              		.loc 1 989 11
 2504 00f2 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 2505 00f6 F979     		ldrb	r1, [r7, #7]	@ zero_extendqisi2
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 63


 2506 00f8 07F11402 		add	r2, r7, #20
 2507 00fc 0492     		str	r2, [sp, #16]
 2508 00fe BA68     		ldr	r2, [r7, #8]
 2509 0100 0392     		str	r2, [sp, #12]
 2510 0102 BA6A     		ldr	r2, [r7, #40]
 2511 0104 0292     		str	r2, [sp, #8]
 2512 0106 0193     		str	r3, [sp, #4]
 2513 0108 FB69     		ldr	r3, [r7, #28]
 2514 010a 0093     		str	r3, [sp]
 2515 010c 2346     		mov	r3, r4
 2516 010e 0246     		mov	r2, r0
 2517 0110 F868     		ldr	r0, [r7, #12]
 2518 0112 FFF7FEFF 		bl	enable_ref_spads
 2519 0116 0346     		mov	r3, r0
 2520 0118 87F82F30 		strb	r3, [r7, #47]
 993:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				spadArraySize,
 994:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				startSelect,
 995:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				currentSpadIndex,
 996:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				count,
 997:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				&lastSpadIndex);
 998:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
 999:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 2521              		.loc 1 999 5
 2522 011c 97F92F30 		ldrsb	r3, [r7, #47]
 2523 0120 002B     		cmp	r3, #0
 2524 0122 0CD1     		bne	.L148
1000:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev, RefSpadsInitialised, 1);
 2525              		.loc 1 1000 3
 2526 0124 FB68     		ldr	r3, [r7, #12]
 2527 0126 0122     		movs	r2, #1
 2528 0128 83F81521 		strb	r2, [r3, #277]
1001:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2529              		.loc 1 1001 3
 2530 012c BB68     		ldr	r3, [r7, #8]
 2531 012e DAB2     		uxtb	r2, r3
 2532 0130 FB68     		ldr	r3, [r7, #12]
 2533 0132 83F81321 		strb	r2, [r3, #275]
1002:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount, (uint8_t)(count));
1003:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2534              		.loc 1 1003 3
 2535 0136 FB68     		ldr	r3, [r7, #12]
 2536 0138 FA79     		ldrb	r2, [r7, #7]
 2537 013a 83F81421 		strb	r2, [r3, #276]
 2538              	.L148:
1004:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadType, isApertureSpads);
1005:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1006:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1007:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 2539              		.loc 1 1007 9
 2540 013e 97F92F30 		ldrsb	r3, [r7, #47]
1008:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 2541              		.loc 1 1008 1
 2542 0142 1846     		mov	r0, r3
 2543 0144 3437     		adds	r7, r7, #52
 2544              		.cfi_def_cfa_offset 12
 2545 0146 BD46     		mov	sp, r7
 2546              		.cfi_def_cfa_register 13
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 64


 2547              		@ sp needed
 2548 0148 90BD     		pop	{r4, r7, pc}
 2549              		.cfi_endproc
 2550              	.LFE338:
 2552              		.section	.text.VL53L0X_get_reference_spads,"ax",%progbits
 2553              		.align	1
 2554              		.global	VL53L0X_get_reference_spads
 2555              		.syntax unified
 2556              		.thumb
 2557              		.thumb_func
 2559              	VL53L0X_get_reference_spads:
 2560              	.LFB339:
1009:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1010:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_reference_spads(VL53L0X_DEV Dev,
1011:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			uint32_t *pSpadCount, uint8_t *pIsApertureSpads)
1012:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 2561              		.loc 1 1012 1
 2562              		.cfi_startproc
 2563              		@ args = 0, pretend = 0, frame = 48
 2564              		@ frame_needed = 1, uses_anonymous_args = 0
 2565 0000 80B5     		push	{r7, lr}
 2566              		.cfi_def_cfa_offset 8
 2567              		.cfi_offset 7, -8
 2568              		.cfi_offset 14, -4
 2569 0002 8EB0     		sub	sp, sp, #56
 2570              		.cfi_def_cfa_offset 64
 2571 0004 02AF     		add	r7, sp, #8
 2572              		.cfi_def_cfa 7, 56
 2573 0006 F860     		str	r0, [r7, #12]
 2574 0008 B960     		str	r1, [r7, #8]
 2575 000a 7A60     		str	r2, [r7, #4]
1013:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2576              		.loc 1 1013 16
 2577 000c 0023     		movs	r3, #0
 2578 000e 87F82F30 		strb	r3, [r7, #47]
1014:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t refSpadsInitialised;
1015:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t refSpadArray[6];
1016:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t cMaxSpadCount = 44;
 2579              		.loc 1 1016 11
 2580 0012 2C23     		movs	r3, #44
 2581 0014 BB62     		str	r3, [r7, #40]
1017:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t cSpadArraySize = 6;
 2582              		.loc 1 1017 11
 2583 0016 0623     		movs	r3, #6
 2584 0018 7B62     		str	r3, [r7, #36]
1018:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint32_t spadsEnabled;
1019:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t isApertureSpads = 0;
 2585              		.loc 1 1019 10
 2586 001a 0023     		movs	r3, #0
 2587 001c FB75     		strb	r3, [r7, #23]
1020:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1021:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	refSpadsInitialised = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 2588              		.loc 1 1021 22
 2589 001e FB68     		ldr	r3, [r7, #12]
 2590 0020 93F81531 		ldrb	r3, [r3, #277]
 2591 0024 87F82330 		strb	r3, [r7, #35]
1022:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					RefSpadsInitialised);
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 65


1023:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1024:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (refSpadsInitialised == 1) {
 2592              		.loc 1 1024 5
 2593 0028 97F82330 		ldrb	r3, [r7, #35]	@ zero_extendqisi2
 2594 002c 012B     		cmp	r3, #1
 2595 002e 0BD1     		bne	.L151
1025:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1026:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*pSpadCount = (uint32_t)VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 2596              		.loc 1 1026 27
 2597 0030 FB68     		ldr	r3, [r7, #12]
 2598 0032 93F81331 		ldrb	r3, [r3, #275]	@ zero_extendqisi2
 2599              		.loc 1 1026 17
 2600 0036 1A46     		mov	r2, r3
 2601              		.loc 1 1026 15
 2602 0038 BB68     		ldr	r3, [r7, #8]
 2603 003a 1A60     		str	r2, [r3]
1027:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadCount);
1028:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*pIsApertureSpads = VL53L0X_GETDEVICESPECIFICPARAMETER(Dev,
 2604              		.loc 1 1028 23
 2605 003c FB68     		ldr	r3, [r7, #12]
 2606 003e 93F81421 		ldrb	r2, [r3, #276]	@ zero_extendqisi2
 2607              		.loc 1 1028 21
 2608 0042 7B68     		ldr	r3, [r7, #4]
 2609 0044 1A70     		strb	r2, [r3]
 2610 0046 32E0     		b	.L152
 2611              	.L151:
1029:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			ReferenceSpadType);
1030:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	} else {
1031:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1032:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* obtain spad info from device.*/
1033:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = get_ref_spad_map(Dev, refSpadArray);
 2612              		.loc 1 1033 12
 2613 0048 07F11C03 		add	r3, r7, #28
 2614 004c 1946     		mov	r1, r3
 2615 004e F868     		ldr	r0, [r7, #12]
 2616 0050 FFF7FEFF 		bl	get_ref_spad_map
 2617 0054 0346     		mov	r3, r0
 2618 0056 87F82F30 		strb	r3, [r7, #47]
1034:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1035:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE) {
 2619              		.loc 1 1035 6
 2620 005a 97F92F30 		ldrsb	r3, [r7, #47]
 2621 005e 002B     		cmp	r3, #0
 2622 0060 25D1     		bne	.L152
1036:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			/* count enabled spads within spad map array and
1037:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 * determine if Aperture or Non-Aperture.
1038:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			 */
1039:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status = count_enabled_spads(refSpadArray,
 2623              		.loc 1 1039 13
 2624 0062 07F11802 		add	r2, r7, #24
 2625 0066 07F11C00 		add	r0, r7, #28
 2626 006a 07F11703 		add	r3, r7, #23
 2627 006e 0093     		str	r3, [sp]
 2628 0070 1346     		mov	r3, r2
 2629 0072 BA6A     		ldr	r2, [r7, #40]
 2630 0074 796A     		ldr	r1, [r7, #36]
 2631 0076 FFF7FEFF 		bl	count_enabled_spads
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 66


 2632 007a 0346     		mov	r3, r0
 2633 007c 87F82F30 		strb	r3, [r7, #47]
1040:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							cSpadArraySize,
1041:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							cMaxSpadCount,
1042:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							&spadsEnabled,
1043:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 							&isApertureSpads);
1044:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1045:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			if (Status == VL53L0X_ERROR_NONE) {
 2634              		.loc 1 1045 7
 2635 0080 97F92F30 		ldrsb	r3, [r7, #47]
 2636 0084 002B     		cmp	r3, #0
 2637 0086 12D1     		bne	.L152
1046:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1047:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				*pSpadCount = spadsEnabled;
 2638              		.loc 1 1047 17
 2639 0088 BA69     		ldr	r2, [r7, #24]
 2640 008a BB68     		ldr	r3, [r7, #8]
 2641 008c 1A60     		str	r2, [r3]
1048:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				*pIsApertureSpads = isApertureSpads;
 2642              		.loc 1 1048 23
 2643 008e FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 2644 0090 7B68     		ldr	r3, [r7, #4]
 2645 0092 1A70     		strb	r2, [r3]
1049:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1050:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2646              		.loc 1 1050 5
 2647 0094 FB68     		ldr	r3, [r7, #12]
 2648 0096 0122     		movs	r2, #1
 2649 0098 83F81521 		strb	r2, [r3, #277]
1051:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					RefSpadsInitialised, 1);
1052:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2650              		.loc 1 1052 5
 2651 009c BB69     		ldr	r3, [r7, #24]
 2652 009e DAB2     		uxtb	r2, r3
 2653 00a0 FB68     		ldr	r3, [r7, #12]
 2654 00a2 83F81321 		strb	r2, [r3, #275]
1053:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					ReferenceSpadCount,
1054:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					(uint8_t)spadsEnabled);
1055:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_SETDEVICESPECIFICPARAMETER(Dev,
 2655              		.loc 1 1055 5
 2656 00a6 FA7D     		ldrb	r2, [r7, #23]	@ zero_extendqisi2
 2657 00a8 FB68     		ldr	r3, [r7, #12]
 2658 00aa 83F81421 		strb	r2, [r3, #276]
 2659              	.L152:
1056:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 					ReferenceSpadType, isApertureSpads);
1057:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			}
1058:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		}
1059:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1060:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1061:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 2660              		.loc 1 1061 9
 2661 00ae 97F92F30 		ldrsb	r3, [r7, #47]
1062:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 2662              		.loc 1 1062 1
 2663 00b2 1846     		mov	r0, r3
 2664 00b4 3037     		adds	r7, r7, #48
 2665              		.cfi_def_cfa_offset 8
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 67


 2666 00b6 BD46     		mov	sp, r7
 2667              		.cfi_def_cfa_register 13
 2668              		@ sp needed
 2669 00b8 80BD     		pop	{r7, pc}
 2670              		.cfi_endproc
 2671              	.LFE339:
 2673              		.section	.text.VL53L0X_perform_single_ref_calibration,"ax",%progbits
 2674              		.align	1
 2675              		.global	VL53L0X_perform_single_ref_calibration
 2676              		.syntax unified
 2677              		.thumb
 2678              		.thumb_func
 2680              	VL53L0X_perform_single_ref_calibration:
 2681              	.LFB340:
1063:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1064:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1065:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_single_ref_calibration(VL53L0X_DEV Dev,
1066:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint8_t vhv_init_byte)
1067:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 2682              		.loc 1 1067 1
 2683              		.cfi_startproc
 2684              		@ args = 0, pretend = 0, frame = 16
 2685              		@ frame_needed = 1, uses_anonymous_args = 0
 2686 0000 80B5     		push	{r7, lr}
 2687              		.cfi_def_cfa_offset 8
 2688              		.cfi_offset 7, -8
 2689              		.cfi_offset 14, -4
 2690 0002 84B0     		sub	sp, sp, #16
 2691              		.cfi_def_cfa_offset 24
 2692 0004 00AF     		add	r7, sp, #0
 2693              		.cfi_def_cfa_register 7
 2694 0006 7860     		str	r0, [r7, #4]
 2695 0008 0B46     		mov	r3, r1
 2696 000a FB70     		strb	r3, [r7, #3]
1068:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2697              		.loc 1 1068 16
 2698 000c 0023     		movs	r3, #0
 2699 000e FB73     		strb	r3, [r7, #15]
1069:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1070:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2700              		.loc 1 1070 5
 2701 0010 97F90F30 		ldrsb	r3, [r7, #15]
 2702 0014 002B     		cmp	r3, #0
 2703 0016 0AD1     		bne	.L155
1071:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START,
 2704              		.loc 1 1071 12
 2705 0018 FB78     		ldrb	r3, [r7, #3]
 2706 001a 43F00103 		orr	r3, r3, #1
 2707 001e DBB2     		uxtb	r3, r3
 2708 0020 1A46     		mov	r2, r3
 2709 0022 0021     		movs	r1, #0
 2710 0024 7868     		ldr	r0, [r7, #4]
 2711 0026 FFF7FEFF 		bl	VL53L0X_WrByte
 2712 002a 0346     		mov	r3, r0
 2713 002c FB73     		strb	r3, [r7, #15]
 2714              	.L155:
1072:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				VL53L0X_REG_SYSRANGE_MODE_START_STOP |
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 68


1073:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				vhv_init_byte);
1074:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1075:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2715              		.loc 1 1075 5
 2716 002e 97F90F30 		ldrsb	r3, [r7, #15]
 2717 0032 002B     		cmp	r3, #0
 2718 0034 04D1     		bne	.L156
1076:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_measurement_poll_for_completion(Dev);
 2719              		.loc 1 1076 12
 2720 0036 7868     		ldr	r0, [r7, #4]
 2721 0038 FFF7FEFF 		bl	VL53L0X_measurement_poll_for_completion
 2722 003c 0346     		mov	r3, r0
 2723 003e FB73     		strb	r3, [r7, #15]
 2724              	.L156:
1077:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1078:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2725              		.loc 1 1078 5
 2726 0040 97F90F30 		ldrsb	r3, [r7, #15]
 2727 0044 002B     		cmp	r3, #0
 2728 0046 05D1     		bne	.L157
1079:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ClearInterruptMask(Dev, 0);
 2729              		.loc 1 1079 12
 2730 0048 0021     		movs	r1, #0
 2731 004a 7868     		ldr	r0, [r7, #4]
 2732 004c FFF7FEFF 		bl	VL53L0X_ClearInterruptMask
 2733 0050 0346     		mov	r3, r0
 2734 0052 FB73     		strb	r3, [r7, #15]
 2735              	.L157:
1080:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1081:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 2736              		.loc 1 1081 5
 2737 0054 97F90F30 		ldrsb	r3, [r7, #15]
 2738 0058 002B     		cmp	r3, #0
 2739 005a 06D1     		bne	.L158
1082:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSRANGE_START, 0x00);
 2740              		.loc 1 1082 12
 2741 005c 0022     		movs	r2, #0
 2742 005e 0021     		movs	r1, #0
 2743 0060 7868     		ldr	r0, [r7, #4]
 2744 0062 FFF7FEFF 		bl	VL53L0X_WrByte
 2745 0066 0346     		mov	r3, r0
 2746 0068 FB73     		strb	r3, [r7, #15]
 2747              	.L158:
1083:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1084:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 2748              		.loc 1 1084 9
 2749 006a 97F90F30 		ldrsb	r3, [r7, #15]
1085:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 2750              		.loc 1 1085 1
 2751 006e 1846     		mov	r0, r3
 2752 0070 1037     		adds	r7, r7, #16
 2753              		.cfi_def_cfa_offset 8
 2754 0072 BD46     		mov	sp, r7
 2755              		.cfi_def_cfa_register 13
 2756              		@ sp needed
 2757 0074 80BD     		pop	{r7, pc}
 2758              		.cfi_endproc
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 69


 2759              	.LFE340:
 2761              		.section	.text.VL53L0X_ref_calibration_io,"ax",%progbits
 2762              		.align	1
 2763              		.global	VL53L0X_ref_calibration_io
 2764              		.syntax unified
 2765              		.thumb
 2766              		.thumb_func
 2768              	VL53L0X_ref_calibration_io:
 2769              	.LFB341:
1086:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1087:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1088:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_ref_calibration_io(VL53L0X_DEV Dev, uint8_t read_not_write,
1089:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings, uint8_t PhaseCal,
1090:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal,
1091:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	const uint8_t vhv_enable, const uint8_t phase_enable)
1092:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 2770              		.loc 1 1092 1
 2771              		.cfi_startproc
 2772              		@ args = 16, pretend = 0, frame = 16
 2773              		@ frame_needed = 1, uses_anonymous_args = 0
 2774 0000 80B5     		push	{r7, lr}
 2775              		.cfi_def_cfa_offset 8
 2776              		.cfi_offset 7, -8
 2777              		.cfi_offset 14, -4
 2778 0002 84B0     		sub	sp, sp, #16
 2779              		.cfi_def_cfa_offset 24
 2780 0004 00AF     		add	r7, sp, #0
 2781              		.cfi_def_cfa_register 7
 2782 0006 7860     		str	r0, [r7, #4]
 2783 0008 0846     		mov	r0, r1
 2784 000a 1146     		mov	r1, r2
 2785 000c 1A46     		mov	r2, r3
 2786 000e 0346     		mov	r3, r0
 2787 0010 FB70     		strb	r3, [r7, #3]
 2788 0012 0B46     		mov	r3, r1
 2789 0014 BB70     		strb	r3, [r7, #2]
 2790 0016 1346     		mov	r3, r2
 2791 0018 7B70     		strb	r3, [r7, #1]
1093:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2792              		.loc 1 1093 16
 2793 001a 0023     		movs	r3, #0
 2794 001c FB73     		strb	r3, [r7, #15]
1094:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalint = 0;
 2795              		.loc 1 1094 10
 2796 001e 0023     		movs	r3, #0
 2797 0020 BB73     		strb	r3, [r7, #14]
1095:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1096:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1097:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 2798              		.loc 1 1097 12
 2799 0022 0122     		movs	r2, #1
 2800 0024 FF21     		movs	r1, #255
 2801 0026 7868     		ldr	r0, [r7, #4]
 2802 0028 FFF7FEFF 		bl	VL53L0X_WrByte
 2803 002c 0346     		mov	r3, r0
 2804 002e 1A46     		mov	r2, r3
 2805              		.loc 1 1097 9
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 70


 2806 0030 FB7B     		ldrb	r3, [r7, #15]
 2807 0032 1343     		orrs	r3, r3, r2
 2808 0034 FB73     		strb	r3, [r7, #15]
1098:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x00);
 2809              		.loc 1 1098 12
 2810 0036 0022     		movs	r2, #0
 2811 0038 0021     		movs	r1, #0
 2812 003a 7868     		ldr	r0, [r7, #4]
 2813 003c FFF7FEFF 		bl	VL53L0X_WrByte
 2814 0040 0346     		mov	r3, r0
 2815 0042 1A46     		mov	r2, r3
 2816              		.loc 1 1098 9
 2817 0044 FB7B     		ldrb	r3, [r7, #15]
 2818 0046 1343     		orrs	r3, r3, r2
 2819 0048 FB73     		strb	r3, [r7, #15]
1099:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2820              		.loc 1 1099 12
 2821 004a 0022     		movs	r2, #0
 2822 004c FF21     		movs	r1, #255
 2823 004e 7868     		ldr	r0, [r7, #4]
 2824 0050 FFF7FEFF 		bl	VL53L0X_WrByte
 2825 0054 0346     		mov	r3, r0
 2826 0056 1A46     		mov	r2, r3
 2827              		.loc 1 1099 9
 2828 0058 FB7B     		ldrb	r3, [r7, #15]
 2829 005a 1343     		orrs	r3, r3, r2
 2830 005c FB73     		strb	r3, [r7, #15]
1100:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1101:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (read_not_write) {
 2831              		.loc 1 1101 5
 2832 005e FB78     		ldrb	r3, [r7, #3]	@ zero_extendqisi2
 2833 0060 002B     		cmp	r3, #0
 2834 0062 1ED0     		beq	.L161
1102:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 2835              		.loc 1 1102 6
 2836 0064 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
 2837 0068 002B     		cmp	r3, #0
 2838 006a 09D0     		beq	.L162
1103:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xCB, pVhvSettings);
 2839              		.loc 1 1103 14
 2840 006c BA69     		ldr	r2, [r7, #24]
 2841 006e CB21     		movs	r1, #203
 2842 0070 7868     		ldr	r0, [r7, #4]
 2843 0072 FFF7FEFF 		bl	VL53L0X_RdByte
 2844 0076 0346     		mov	r3, r0
 2845 0078 1A46     		mov	r2, r3
 2846              		.loc 1 1103 11
 2847 007a FB7B     		ldrb	r3, [r7, #15]
 2848 007c 1343     		orrs	r3, r3, r2
 2849 007e FB73     		strb	r3, [r7, #15]
 2850              	.L162:
1104:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2851              		.loc 1 1104 6
 2852 0080 97F82430 		ldrb	r3, [r7, #36]	@ zero_extendqisi2
 2853 0084 002B     		cmp	r3, #0
 2854 0086 2AD0     		beq	.L163
1105:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_RdByte(Dev, 0xEE, &PhaseCalint);
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 71


 2855              		.loc 1 1105 14
 2856 0088 07F10E03 		add	r3, r7, #14
 2857 008c 1A46     		mov	r2, r3
 2858 008e EE21     		movs	r1, #238
 2859 0090 7868     		ldr	r0, [r7, #4]
 2860 0092 FFF7FEFF 		bl	VL53L0X_RdByte
 2861 0096 0346     		mov	r3, r0
 2862 0098 1A46     		mov	r2, r3
 2863              		.loc 1 1105 11
 2864 009a FB7B     		ldrb	r3, [r7, #15]
 2865 009c 1343     		orrs	r3, r3, r2
 2866 009e FB73     		strb	r3, [r7, #15]
 2867 00a0 1DE0     		b	.L163
 2868              	.L161:
1106:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	} else {
1107:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (vhv_enable)
 2869              		.loc 1 1107 6
 2870 00a2 97F82030 		ldrb	r3, [r7, #32]	@ zero_extendqisi2
 2871 00a6 002B     		cmp	r3, #0
 2872 00a8 0AD0     		beq	.L164
1108:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_WrByte(Dev, 0xCB, VhvSettings);
 2873              		.loc 1 1108 14
 2874 00aa BB78     		ldrb	r3, [r7, #2]	@ zero_extendqisi2
 2875 00ac 1A46     		mov	r2, r3
 2876 00ae CB21     		movs	r1, #203
 2877 00b0 7868     		ldr	r0, [r7, #4]
 2878 00b2 FFF7FEFF 		bl	VL53L0X_WrByte
 2879 00b6 0346     		mov	r3, r0
 2880 00b8 1A46     		mov	r2, r3
 2881              		.loc 1 1108 11
 2882 00ba FB7B     		ldrb	r3, [r7, #15]
 2883 00bc 1343     		orrs	r3, r3, r2
 2884 00be FB73     		strb	r3, [r7, #15]
 2885              	.L164:
1109:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (phase_enable)
 2886              		.loc 1 1109 6
 2887 00c0 97F82430 		ldrb	r3, [r7, #36]	@ zero_extendqisi2
 2888 00c4 002B     		cmp	r3, #0
 2889 00c6 0AD0     		beq	.L163
1110:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Status |= VL53L0X_UpdateByte(Dev, 0xEE, 0x80, PhaseCal);
 2890              		.loc 1 1110 14
 2891 00c8 7B78     		ldrb	r3, [r7, #1]	@ zero_extendqisi2
 2892 00ca 8022     		movs	r2, #128
 2893 00cc EE21     		movs	r1, #238
 2894 00ce 7868     		ldr	r0, [r7, #4]
 2895 00d0 FFF7FEFF 		bl	VL53L0X_UpdateByte
 2896 00d4 0346     		mov	r3, r0
 2897 00d6 1A46     		mov	r2, r3
 2898              		.loc 1 1110 11
 2899 00d8 FB7B     		ldrb	r3, [r7, #15]
 2900 00da 1343     		orrs	r3, r3, r2
 2901 00dc FB73     		strb	r3, [r7, #15]
 2902              	.L163:
1111:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1112:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1113:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x01);
 2903              		.loc 1 1113 12
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 72


 2904 00de 0122     		movs	r2, #1
 2905 00e0 FF21     		movs	r1, #255
 2906 00e2 7868     		ldr	r0, [r7, #4]
 2907 00e4 FFF7FEFF 		bl	VL53L0X_WrByte
 2908 00e8 0346     		mov	r3, r0
 2909 00ea 1A46     		mov	r2, r3
 2910              		.loc 1 1113 9
 2911 00ec FB7B     		ldrb	r3, [r7, #15]
 2912 00ee 1343     		orrs	r3, r3, r2
 2913 00f0 FB73     		strb	r3, [r7, #15]
1114:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0x00, 0x01);
 2914              		.loc 1 1114 12
 2915 00f2 0122     		movs	r2, #1
 2916 00f4 0021     		movs	r1, #0
 2917 00f6 7868     		ldr	r0, [r7, #4]
 2918 00f8 FFF7FEFF 		bl	VL53L0X_WrByte
 2919 00fc 0346     		mov	r3, r0
 2920 00fe 1A46     		mov	r2, r3
 2921              		.loc 1 1114 9
 2922 0100 FB7B     		ldrb	r3, [r7, #15]
 2923 0102 1343     		orrs	r3, r3, r2
 2924 0104 FB73     		strb	r3, [r7, #15]
1115:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status |= VL53L0X_WrByte(Dev, 0xFF, 0x00);
 2925              		.loc 1 1115 12
 2926 0106 0022     		movs	r2, #0
 2927 0108 FF21     		movs	r1, #255
 2928 010a 7868     		ldr	r0, [r7, #4]
 2929 010c FFF7FEFF 		bl	VL53L0X_WrByte
 2930 0110 0346     		mov	r3, r0
 2931 0112 1A46     		mov	r2, r3
 2932              		.loc 1 1115 9
 2933 0114 FB7B     		ldrb	r3, [r7, #15]
 2934 0116 1343     		orrs	r3, r3, r2
 2935 0118 FB73     		strb	r3, [r7, #15]
1116:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1117:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	*pPhaseCal = (uint8_t)(PhaseCalint&0xEF);
 2936              		.loc 1 1117 36
 2937 011a BB7B     		ldrb	r3, [r7, #14]	@ zero_extendqisi2
 2938              		.loc 1 1117 15
 2939 011c 23F01003 		bic	r3, r3, #16
 2940 0120 DAB2     		uxtb	r2, r3
 2941              		.loc 1 1117 13
 2942 0122 FB69     		ldr	r3, [r7, #28]
 2943 0124 1A70     		strb	r2, [r3]
1118:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1119:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 2944              		.loc 1 1119 9
 2945 0126 97F90F30 		ldrsb	r3, [r7, #15]
1120:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 2946              		.loc 1 1120 1
 2947 012a 1846     		mov	r0, r3
 2948 012c 1037     		adds	r7, r7, #16
 2949              		.cfi_def_cfa_offset 8
 2950 012e BD46     		mov	sp, r7
 2951              		.cfi_def_cfa_register 13
 2952              		@ sp needed
 2953 0130 80BD     		pop	{r7, pc}
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 73


 2954              		.cfi_endproc
 2955              	.LFE341:
 2957              		.section	.text.VL53L0X_perform_vhv_calibration,"ax",%progbits
 2958              		.align	1
 2959              		.global	VL53L0X_perform_vhv_calibration
 2960              		.syntax unified
 2961              		.thumb
 2962              		.thumb_func
 2964              	VL53L0X_perform_vhv_calibration:
 2965              	.LFB342:
1121:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1122:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1123:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_vhv_calibration(VL53L0X_DEV Dev,
1124:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, const uint8_t get_data_enable,
1125:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1126:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 2966              		.loc 1 1126 1
 2967              		.cfi_startproc
 2968              		@ args = 0, pretend = 0, frame = 24
 2969              		@ frame_needed = 1, uses_anonymous_args = 0
 2970 0000 80B5     		push	{r7, lr}
 2971              		.cfi_def_cfa_offset 8
 2972              		.cfi_offset 7, -8
 2973              		.cfi_offset 14, -4
 2974 0002 8AB0     		sub	sp, sp, #40
 2975              		.cfi_def_cfa_offset 48
 2976 0004 04AF     		add	r7, sp, #16
 2977              		.cfi_def_cfa 7, 32
 2978 0006 F860     		str	r0, [r7, #12]
 2979 0008 B960     		str	r1, [r7, #8]
 2980 000a 1146     		mov	r1, r2
 2981 000c 1A46     		mov	r2, r3
 2982 000e 0B46     		mov	r3, r1
 2983 0010 FB71     		strb	r3, [r7, #7]
 2984 0012 1346     		mov	r3, r2
 2985 0014 BB71     		strb	r3, [r7, #6]
1127:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 2986              		.loc 1 1127 16
 2987 0016 0023     		movs	r3, #0
 2988 0018 FB75     		strb	r3, [r7, #23]
1128:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 2989              		.loc 1 1128 10
 2990 001a 0023     		movs	r3, #0
 2991 001c BB75     		strb	r3, [r7, #22]
1129:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 2992              		.loc 1 1129 10
 2993 001e 0023     		movs	r3, #0
 2994 0020 7B75     		strb	r3, [r7, #21]
1130:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 2995              		.loc 1 1130 10
 2996 0022 0023     		movs	r3, #0
 2997 0024 3B75     		strb	r3, [r7, #20]
1131:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCalInt = 0;
 2998              		.loc 1 1131 10
 2999 0026 0023     		movs	r3, #0
 3000 0028 FB74     		strb	r3, [r7, #19]
1132:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 74


1133:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1134:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1135:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
1136:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1137:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (restore_config)
 3001              		.loc 1 1137 5
 3002 002a BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 3003 002c 002B     		cmp	r3, #0
 3004 002e 03D0     		beq	.L167
1138:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 3005              		.loc 1 1138 18
 3006 0030 FB68     		ldr	r3, [r7, #12]
 3007 0032 93F83031 		ldrb	r3, [r3, #304]
 3008 0036 BB75     		strb	r3, [r7, #22]
 3009              	.L167:
1139:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1140:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Run VHV */
1141:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x01);
 3010              		.loc 1 1141 11
 3011 0038 0122     		movs	r2, #1
 3012 003a 0121     		movs	r1, #1
 3013 003c F868     		ldr	r0, [r7, #12]
 3014 003e FFF7FEFF 		bl	VL53L0X_WrByte
 3015 0042 0346     		mov	r3, r0
 3016 0044 FB75     		strb	r3, [r7, #23]
1142:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1143:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 3017              		.loc 1 1143 5
 3018 0046 97F91730 		ldrsb	r3, [r7, #23]
 3019 004a 002B     		cmp	r3, #0
 3020 004c 05D1     		bne	.L168
1144:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x40);
 3021              		.loc 1 1144 12
 3022 004e 4021     		movs	r1, #64
 3023 0050 F868     		ldr	r0, [r7, #12]
 3024 0052 FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 3025 0056 0346     		mov	r3, r0
 3026 0058 FB75     		strb	r3, [r7, #23]
 3027              	.L168:
1145:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1146:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Read VHV from device */
1147:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 3028              		.loc 1 1147 5
 3029 005a 97F91730 		ldrsb	r3, [r7, #23]
 3030 005e 002B     		cmp	r3, #0
 3031 0060 15D1     		bne	.L169
 3032              		.loc 1 1147 37 discriminator 1
 3033 0062 FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 3034 0064 012B     		cmp	r3, #1
 3035 0066 12D1     		bne	.L169
1148:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 3036              		.loc 1 1148 12
 3037 0068 397D     		ldrb	r1, [r7, #20]	@ zero_extendqisi2
 3038 006a 7A7D     		ldrb	r2, [r7, #21]	@ zero_extendqisi2
 3039 006c 0023     		movs	r3, #0
 3040 006e 0393     		str	r3, [sp, #12]
 3041 0070 0123     		movs	r3, #1
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 75


 3042 0072 0293     		str	r3, [sp, #8]
 3043 0074 07F11303 		add	r3, r7, #19
 3044 0078 0193     		str	r3, [sp, #4]
 3045 007a BB68     		ldr	r3, [r7, #8]
 3046 007c 0093     		str	r3, [sp]
 3047 007e 0B46     		mov	r3, r1
 3048 0080 0121     		movs	r1, #1
 3049 0082 F868     		ldr	r0, [r7, #12]
 3050 0084 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 3051 0088 0346     		mov	r3, r0
 3052 008a FB75     		strb	r3, [r7, #23]
 3053              		.loc 1 1148 10
 3054 008c 02E0     		b	.L170
 3055              	.L169:
1149:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1150:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			pVhvSettings, &PhaseCalInt,
1151:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			1, 0);
1152:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	} else
1153:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*pVhvSettings = 0;
 3056              		.loc 1 1153 17
 3057 008e BB68     		ldr	r3, [r7, #8]
 3058 0090 0022     		movs	r2, #0
 3059 0092 1A70     		strb	r2, [r3]
 3060              	.L170:
1154:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1155:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1156:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 3061              		.loc 1 1156 5
 3062 0094 97F91730 		ldrsb	r3, [r7, #23]
 3063 0098 002B     		cmp	r3, #0
 3064 009a 12D1     		bne	.L171
 3065              		.loc 1 1156 37 discriminator 1
 3066 009c BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 3067 009e 002B     		cmp	r3, #0
 3068 00a0 0FD0     		beq	.L171
1157:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1158:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 3069              		.loc 1 1158 12
 3070 00a2 BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 3071 00a4 1A46     		mov	r2, r3
 3072 00a6 0121     		movs	r1, #1
 3073 00a8 F868     		ldr	r0, [r7, #12]
 3074 00aa FFF7FEFF 		bl	VL53L0X_WrByte
 3075 00ae 0346     		mov	r3, r0
 3076 00b0 FB75     		strb	r3, [r7, #23]
1159:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				SequenceConfig);
1160:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 3077              		.loc 1 1160 6
 3078 00b2 97F91730 		ldrsb	r3, [r7, #23]
 3079 00b6 002B     		cmp	r3, #0
 3080 00b8 03D1     		bne	.L171
1161:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 3081              		.loc 1 1161 4
 3082 00ba FB68     		ldr	r3, [r7, #12]
 3083 00bc BA7D     		ldrb	r2, [r7, #22]
 3084 00be 83F83021 		strb	r2, [r3, #304]
 3085              	.L171:
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 76


1162:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1163:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1164:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1165:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 3086              		.loc 1 1165 9
 3087 00c2 97F91730 		ldrsb	r3, [r7, #23]
1166:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 3088              		.loc 1 1166 1
 3089 00c6 1846     		mov	r0, r3
 3090 00c8 1837     		adds	r7, r7, #24
 3091              		.cfi_def_cfa_offset 8
 3092 00ca BD46     		mov	sp, r7
 3093              		.cfi_def_cfa_register 13
 3094              		@ sp needed
 3095 00cc 80BD     		pop	{r7, pc}
 3096              		.cfi_endproc
 3097              	.LFE342:
 3099              		.section	.text.VL53L0X_perform_phase_calibration,"ax",%progbits
 3100              		.align	1
 3101              		.global	VL53L0X_perform_phase_calibration
 3102              		.syntax unified
 3103              		.thumb
 3104              		.thumb_func
 3106              	VL53L0X_perform_phase_calibration:
 3107              	.LFB343:
1167:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1168:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_phase_calibration(VL53L0X_DEV Dev,
1169:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t *pPhaseCal, const uint8_t get_data_enable,
1170:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	const uint8_t restore_config)
1171:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 3108              		.loc 1 1171 1
 3109              		.cfi_startproc
 3110              		@ args = 0, pretend = 0, frame = 24
 3111              		@ frame_needed = 1, uses_anonymous_args = 0
 3112 0000 80B5     		push	{r7, lr}
 3113              		.cfi_def_cfa_offset 8
 3114              		.cfi_offset 7, -8
 3115              		.cfi_offset 14, -4
 3116 0002 8AB0     		sub	sp, sp, #40
 3117              		.cfi_def_cfa_offset 48
 3118 0004 04AF     		add	r7, sp, #16
 3119              		.cfi_def_cfa 7, 32
 3120 0006 F860     		str	r0, [r7, #12]
 3121 0008 B960     		str	r1, [r7, #8]
 3122 000a 1146     		mov	r1, r2
 3123 000c 1A46     		mov	r2, r3
 3124 000e 0B46     		mov	r3, r1
 3125 0010 FB71     		strb	r3, [r7, #7]
 3126 0012 1346     		mov	r3, r2
 3127 0014 BB71     		strb	r3, [r7, #6]
1172:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 3128              		.loc 1 1172 16
 3129 0016 0023     		movs	r3, #0
 3130 0018 FB75     		strb	r3, [r7, #23]
1173:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 3131              		.loc 1 1173 10
 3132 001a 0023     		movs	r3, #0
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 77


 3133 001c BB75     		strb	r3, [r7, #22]
1174:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 3134              		.loc 1 1174 10
 3135 001e 0023     		movs	r3, #0
 3136 0020 7B75     		strb	r3, [r7, #21]
1175:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 3137              		.loc 1 1175 10
 3138 0022 0023     		movs	r3, #0
 3139 0024 3B75     		strb	r3, [r7, #20]
1176:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettingsint;
1177:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1178:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1179:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1180:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
1181:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1182:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (restore_config)
 3140              		.loc 1 1182 5
 3141 0026 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 3142 0028 002B     		cmp	r3, #0
 3143 002a 03D0     		beq	.L174
1183:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 3144              		.loc 1 1183 18
 3145 002c FB68     		ldr	r3, [r7, #12]
 3146 002e 93F83031 		ldrb	r3, [r3, #304]
 3147 0032 BB75     		strb	r3, [r7, #22]
 3148              	.L174:
1184:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1185:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Run PhaseCal */
1186:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG, 0x02);
 3149              		.loc 1 1186 11
 3150 0034 0222     		movs	r2, #2
 3151 0036 0121     		movs	r1, #1
 3152 0038 F868     		ldr	r0, [r7, #12]
 3153 003a FFF7FEFF 		bl	VL53L0X_WrByte
 3154 003e 0346     		mov	r3, r0
 3155 0040 FB75     		strb	r3, [r7, #23]
1187:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1188:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 3156              		.loc 1 1188 5
 3157 0042 97F91730 		ldrsb	r3, [r7, #23]
 3158 0046 002B     		cmp	r3, #0
 3159 0048 05D1     		bne	.L175
1189:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_single_ref_calibration(Dev, 0x0);
 3160              		.loc 1 1189 12
 3161 004a 0021     		movs	r1, #0
 3162 004c F868     		ldr	r0, [r7, #12]
 3163 004e FFF7FEFF 		bl	VL53L0X_perform_single_ref_calibration
 3164 0052 0346     		mov	r3, r0
 3165 0054 FB75     		strb	r3, [r7, #23]
 3166              	.L175:
1190:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1191:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* Read PhaseCal from device */
1192:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && (get_data_enable == 1)) {
 3167              		.loc 1 1192 5
 3168 0056 97F91730 		ldrsb	r3, [r7, #23]
 3169 005a 002B     		cmp	r3, #0
 3170 005c 15D1     		bne	.L176
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 78


 3171              		.loc 1 1192 37 discriminator 1
 3172 005e FB79     		ldrb	r3, [r7, #7]	@ zero_extendqisi2
 3173 0060 012B     		cmp	r3, #1
 3174 0062 12D1     		bne	.L176
1193:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_ref_calibration_io(Dev, 1,
 3175              		.loc 1 1193 12
 3176 0064 397D     		ldrb	r1, [r7, #20]	@ zero_extendqisi2
 3177 0066 7A7D     		ldrb	r2, [r7, #21]	@ zero_extendqisi2
 3178 0068 0123     		movs	r3, #1
 3179 006a 0393     		str	r3, [sp, #12]
 3180 006c 0023     		movs	r3, #0
 3181 006e 0293     		str	r3, [sp, #8]
 3182 0070 BB68     		ldr	r3, [r7, #8]
 3183 0072 0193     		str	r3, [sp, #4]
 3184 0074 07F11303 		add	r3, r7, #19
 3185 0078 0093     		str	r3, [sp]
 3186 007a 0B46     		mov	r3, r1
 3187 007c 0121     		movs	r1, #1
 3188 007e F868     		ldr	r0, [r7, #12]
 3189 0080 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 3190 0084 0346     		mov	r3, r0
 3191 0086 FB75     		strb	r3, [r7, #23]
 3192              		.loc 1 1193 10
 3193 0088 02E0     		b	.L177
 3194              	.L176:
1194:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			VhvSettings, PhaseCal, /* Not used here */
1195:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			&VhvSettingsint, pPhaseCal,
1196:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			0, 1);
1197:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	} else
1198:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		*pPhaseCal = 0;
 3195              		.loc 1 1198 14
 3196 008a BB68     		ldr	r3, [r7, #8]
 3197 008c 0022     		movs	r2, #0
 3198 008e 1A70     		strb	r2, [r3]
 3199              	.L177:
1199:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1200:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1201:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if ((Status == VL53L0X_ERROR_NONE) && restore_config) {
 3200              		.loc 1 1201 5
 3201 0090 97F91730 		ldrsb	r3, [r7, #23]
 3202 0094 002B     		cmp	r3, #0
 3203 0096 12D1     		bne	.L178
 3204              		.loc 1 1201 37 discriminator 1
 3205 0098 BB79     		ldrb	r3, [r7, #6]	@ zero_extendqisi2
 3206 009a 002B     		cmp	r3, #0
 3207 009c 0FD0     		beq	.L178
1202:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1203:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
 3208              		.loc 1 1203 12
 3209 009e BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 3210 00a0 1A46     		mov	r2, r3
 3211 00a2 0121     		movs	r1, #1
 3212 00a4 F868     		ldr	r0, [r7, #12]
 3213 00a6 FFF7FEFF 		bl	VL53L0X_WrByte
 3214 00aa 0346     		mov	r3, r0
 3215 00ac FB75     		strb	r3, [r7, #23]
1204:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				SequenceConfig);
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 79


1205:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 3216              		.loc 1 1205 6
 3217 00ae 97F91730 		ldrsb	r3, [r7, #23]
 3218 00b2 002B     		cmp	r3, #0
 3219 00b4 03D1     		bne	.L178
1206:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 3220              		.loc 1 1206 4
 3221 00b6 FB68     		ldr	r3, [r7, #12]
 3222 00b8 BA7D     		ldrb	r2, [r7, #22]
 3223 00ba 83F83021 		strb	r2, [r3, #304]
 3224              	.L178:
1207:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1208:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1209:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1210:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 3225              		.loc 1 1210 9
 3226 00be 97F91730 		ldrsb	r3, [r7, #23]
1211:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 3227              		.loc 1 1211 1
 3228 00c2 1846     		mov	r0, r3
 3229 00c4 1837     		adds	r7, r7, #24
 3230              		.cfi_def_cfa_offset 8
 3231 00c6 BD46     		mov	sp, r7
 3232              		.cfi_def_cfa_register 13
 3233              		@ sp needed
 3234 00c8 80BD     		pop	{r7, pc}
 3235              		.cfi_endproc
 3236              	.LFE343:
 3238              		.section	.text.VL53L0X_perform_ref_calibration,"ax",%progbits
 3239              		.align	1
 3240              		.global	VL53L0X_perform_ref_calibration
 3241              		.syntax unified
 3242              		.thumb
 3243              		.thumb_func
 3245              	VL53L0X_perform_ref_calibration:
 3246              	.LFB344:
1212:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1213:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_perform_ref_calibration(VL53L0X_DEV Dev,
1214:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t *pVhvSettings, uint8_t *pPhaseCal, uint8_t get_data_enable)
1215:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 3247              		.loc 1 1215 1
 3248              		.cfi_startproc
 3249              		@ args = 0, pretend = 0, frame = 24
 3250              		@ frame_needed = 1, uses_anonymous_args = 0
 3251 0000 80B5     		push	{r7, lr}
 3252              		.cfi_def_cfa_offset 8
 3253              		.cfi_offset 7, -8
 3254              		.cfi_offset 14, -4
 3255 0002 86B0     		sub	sp, sp, #24
 3256              		.cfi_def_cfa_offset 32
 3257 0004 00AF     		add	r7, sp, #0
 3258              		.cfi_def_cfa_register 7
 3259 0006 F860     		str	r0, [r7, #12]
 3260 0008 B960     		str	r1, [r7, #8]
 3261 000a 7A60     		str	r2, [r7, #4]
 3262 000c FB70     		strb	r3, [r7, #3]
1216:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 80


 3263              		.loc 1 1216 16
 3264 000e 0023     		movs	r3, #0
 3265 0010 FB75     		strb	r3, [r7, #23]
1217:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t SequenceConfig = 0;
 3266              		.loc 1 1217 10
 3267 0012 0023     		movs	r3, #0
 3268 0014 BB75     		strb	r3, [r7, #22]
1218:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1219:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* store the value of the sequence config,
1220:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * this will be reset before the end of the function
1221:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 */
1222:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1223:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	SequenceConfig = PALDevDataGet(Dev, SequenceConfig);
 3269              		.loc 1 1223 17
 3270 0016 FB68     		ldr	r3, [r7, #12]
 3271 0018 93F83031 		ldrb	r3, [r3, #304]
 3272 001c BB75     		strb	r3, [r7, #22]
1224:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1225:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	/* In the following function we don't save the config to optimize
1226:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	 * writes on device. Config is saved and restored only once. */
1227:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_perform_vhv_calibration(
 3273              		.loc 1 1227 11
 3274 001e FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 3275 0020 0023     		movs	r3, #0
 3276 0022 B968     		ldr	r1, [r7, #8]
 3277 0024 F868     		ldr	r0, [r7, #12]
 3278 0026 FFF7FEFF 		bl	VL53L0X_perform_vhv_calibration
 3279 002a 0346     		mov	r3, r0
 3280 002c FB75     		strb	r3, [r7, #23]
1228:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Dev, pVhvSettings, get_data_enable, 0);
1229:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1230:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1231:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE)
 3281              		.loc 1 1231 5
 3282 002e 97F91730 		ldrsb	r3, [r7, #23]
 3283 0032 002B     		cmp	r3, #0
 3284 0034 07D1     		bne	.L181
1232:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_perform_phase_calibration(
 3285              		.loc 1 1232 12
 3286 0036 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 3287 0038 0023     		movs	r3, #0
 3288 003a 7968     		ldr	r1, [r7, #4]
 3289 003c F868     		ldr	r0, [r7, #12]
 3290 003e FFF7FEFF 		bl	VL53L0X_perform_phase_calibration
 3291 0042 0346     		mov	r3, r0
 3292 0044 FB75     		strb	r3, [r7, #23]
 3293              	.L181:
1233:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			Dev, pPhaseCal, get_data_enable, 0);
1234:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1235:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1236:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	if (Status == VL53L0X_ERROR_NONE) {
 3294              		.loc 1 1236 5
 3295 0046 97F91730 		ldrsb	r3, [r7, #23]
 3296 004a 002B     		cmp	r3, #0
 3297 004c 0FD1     		bne	.L182
1237:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		/* restore the previous Sequence Config */
1238:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		Status = VL53L0X_WrByte(Dev, VL53L0X_REG_SYSTEM_SEQUENCE_CONFIG,
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 81


 3298              		.loc 1 1238 12
 3299 004e BB7D     		ldrb	r3, [r7, #22]	@ zero_extendqisi2
 3300 0050 1A46     		mov	r2, r3
 3301 0052 0121     		movs	r1, #1
 3302 0054 F868     		ldr	r0, [r7, #12]
 3303 0056 FFF7FEFF 		bl	VL53L0X_WrByte
 3304 005a 0346     		mov	r3, r0
 3305 005c FB75     		strb	r3, [r7, #23]
1239:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 				SequenceConfig);
1240:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		if (Status == VL53L0X_ERROR_NONE)
 3306              		.loc 1 1240 6
 3307 005e 97F91730 		ldrsb	r3, [r7, #23]
 3308 0062 002B     		cmp	r3, #0
 3309 0064 03D1     		bne	.L182
1241:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 			PALDevDataSet(Dev, SequenceConfig, SequenceConfig);
 3310              		.loc 1 1241 4
 3311 0066 FB68     		ldr	r3, [r7, #12]
 3312 0068 BA7D     		ldrb	r2, [r7, #22]
 3313 006a 83F83021 		strb	r2, [r3, #304]
 3314              	.L182:
1242:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1243:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	}
1244:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1245:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 3315              		.loc 1 1245 9
 3316 006e 97F91730 		ldrsb	r3, [r7, #23]
1246:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 3317              		.loc 1 1246 1
 3318 0072 1846     		mov	r0, r3
 3319 0074 1837     		adds	r7, r7, #24
 3320              		.cfi_def_cfa_offset 8
 3321 0076 BD46     		mov	sp, r7
 3322              		.cfi_def_cfa_register 13
 3323              		@ sp needed
 3324 0078 80BD     		pop	{r7, pc}
 3325              		.cfi_endproc
 3326              	.LFE344:
 3328              		.section	.text.VL53L0X_set_ref_calibration,"ax",%progbits
 3329              		.align	1
 3330              		.global	VL53L0X_set_ref_calibration
 3331              		.syntax unified
 3332              		.thumb
 3333              		.thumb_func
 3335              	VL53L0X_set_ref_calibration:
 3336              	.LFB345:
1247:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1248:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_set_ref_calibration(VL53L0X_DEV Dev,
1249:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint8_t VhvSettings, uint8_t PhaseCal)
1250:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 3337              		.loc 1 1250 1
 3338              		.cfi_startproc
 3339              		@ args = 0, pretend = 0, frame = 16
 3340              		@ frame_needed = 1, uses_anonymous_args = 0
 3341 0000 80B5     		push	{r7, lr}
 3342              		.cfi_def_cfa_offset 8
 3343              		.cfi_offset 7, -8
 3344              		.cfi_offset 14, -4
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 82


 3345 0002 88B0     		sub	sp, sp, #32
 3346              		.cfi_def_cfa_offset 40
 3347 0004 04AF     		add	r7, sp, #16
 3348              		.cfi_def_cfa 7, 24
 3349 0006 7860     		str	r0, [r7, #4]
 3350 0008 0B46     		mov	r3, r1
 3351 000a FB70     		strb	r3, [r7, #3]
 3352 000c 1346     		mov	r3, r2
 3353 000e BB70     		strb	r3, [r7, #2]
1251:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 3354              		.loc 1 1251 16
 3355 0010 0023     		movs	r3, #0
 3356 0012 FB73     		strb	r3, [r7, #15]
1252:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t pVhvSettings;
1253:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t pPhaseCal;
1254:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1255:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 0,
 3357              		.loc 1 1255 11
 3358 0014 B978     		ldrb	r1, [r7, #2]	@ zero_extendqisi2
 3359 0016 FA78     		ldrb	r2, [r7, #3]	@ zero_extendqisi2
 3360 0018 0123     		movs	r3, #1
 3361 001a 0393     		str	r3, [sp, #12]
 3362 001c 0123     		movs	r3, #1
 3363 001e 0293     		str	r3, [sp, #8]
 3364 0020 07F10D03 		add	r3, r7, #13
 3365 0024 0193     		str	r3, [sp, #4]
 3366 0026 07F10E03 		add	r3, r7, #14
 3367 002a 0093     		str	r3, [sp]
 3368 002c 0B46     		mov	r3, r1
 3369 002e 0021     		movs	r1, #0
 3370 0030 7868     		ldr	r0, [r7, #4]
 3371 0032 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 3372 0036 0346     		mov	r3, r0
 3373 0038 FB73     		strb	r3, [r7, #15]
1256:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1257:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		&pVhvSettings, &pPhaseCal,
1258:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		1, 1);
1259:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1260:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 3374              		.loc 1 1260 9
 3375 003a 97F90F30 		ldrsb	r3, [r7, #15]
1261:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 3376              		.loc 1 1261 1
 3377 003e 1846     		mov	r0, r3
 3378 0040 1037     		adds	r7, r7, #16
 3379              		.cfi_def_cfa_offset 8
 3380 0042 BD46     		mov	sp, r7
 3381              		.cfi_def_cfa_register 13
 3382              		@ sp needed
 3383 0044 80BD     		pop	{r7, pc}
 3384              		.cfi_endproc
 3385              	.LFE345:
 3387              		.section	.text.VL53L0X_get_ref_calibration,"ax",%progbits
 3388              		.align	1
 3389              		.global	VL53L0X_get_ref_calibration
 3390              		.syntax unified
 3391              		.thumb
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 83


 3392              		.thumb_func
 3394              	VL53L0X_get_ref_calibration:
 3395              	.LFB346:
1262:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1263:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** VL53L0X_Error VL53L0X_get_ref_calibration(VL53L0X_DEV Dev,
1264:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		uint8_t *pVhvSettings, uint8_t *pPhaseCal)
1265:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** {
 3396              		.loc 1 1265 1
 3397              		.cfi_startproc
 3398              		@ args = 0, pretend = 0, frame = 24
 3399              		@ frame_needed = 1, uses_anonymous_args = 0
 3400 0000 80B5     		push	{r7, lr}
 3401              		.cfi_def_cfa_offset 8
 3402              		.cfi_offset 7, -8
 3403              		.cfi_offset 14, -4
 3404 0002 8AB0     		sub	sp, sp, #40
 3405              		.cfi_def_cfa_offset 48
 3406 0004 04AF     		add	r7, sp, #16
 3407              		.cfi_def_cfa 7, 32
 3408 0006 F860     		str	r0, [r7, #12]
 3409 0008 B960     		str	r1, [r7, #8]
 3410 000a 7A60     		str	r2, [r7, #4]
1266:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	VL53L0X_Error Status = VL53L0X_ERROR_NONE;
 3411              		.loc 1 1266 16
 3412 000c 0023     		movs	r3, #0
 3413 000e FB75     		strb	r3, [r7, #23]
1267:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t VhvSettings = 0;
 3414              		.loc 1 1267 10
 3415 0010 0023     		movs	r3, #0
 3416 0012 BB75     		strb	r3, [r7, #22]
1268:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	uint8_t PhaseCal = 0;
 3417              		.loc 1 1268 10
 3418 0014 0023     		movs	r3, #0
 3419 0016 7B75     		strb	r3, [r7, #21]
1269:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
1270:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	Status = VL53L0X_ref_calibration_io(Dev, 1,
 3420              		.loc 1 1270 11
 3421 0018 797D     		ldrb	r1, [r7, #21]	@ zero_extendqisi2
 3422 001a BA7D     		ldrb	r2, [r7, #22]	@ zero_extendqisi2
 3423 001c 0123     		movs	r3, #1
 3424 001e 0393     		str	r3, [sp, #12]
 3425 0020 0123     		movs	r3, #1
 3426 0022 0293     		str	r3, [sp, #8]
 3427 0024 7B68     		ldr	r3, [r7, #4]
 3428 0026 0193     		str	r3, [sp, #4]
 3429 0028 BB68     		ldr	r3, [r7, #8]
 3430 002a 0093     		str	r3, [sp]
 3431 002c 0B46     		mov	r3, r1
 3432 002e 0121     		movs	r1, #1
 3433 0030 F868     		ldr	r0, [r7, #12]
 3434 0032 FFF7FEFF 		bl	VL53L0X_ref_calibration_io
 3435 0036 0346     		mov	r3, r0
 3436 0038 FB75     		strb	r3, [r7, #23]
1271:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		VhvSettings, PhaseCal,
1272:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		pVhvSettings, pPhaseCal,
1273:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 		1, 1);
1274:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 84


1275:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** 	return Status;
 3437              		.loc 1 1275 9
 3438 003a 97F91730 		ldrsb	r3, [r7, #23]
1276:Drivers/VL53L0X/core/src/vl53l0x_api_calibration.c **** }
 3439              		.loc 1 1276 1
 3440 003e 1846     		mov	r0, r3
 3441 0040 1837     		adds	r7, r7, #24
 3442              		.cfi_def_cfa_offset 8
 3443 0042 BD46     		mov	sp, r7
 3444              		.cfi_def_cfa_register 13
 3445              		@ sp needed
 3446 0044 80BD     		pop	{r7, pc}
 3447              		.cfi_endproc
 3448              	.LFE346:
 3450              		.text
 3451              	.Letext0:
 3452              		.file 2 "c:\\users\\morroway\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@
 3453              		.file 3 "c:\\users\\morroway\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@
 3454              		.file 4 "c:\\users\\morroway\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\@
 3455              		.file 5 "Drivers/VL53L0X/platform/inc/vl53l0x_types.h"
 3456              		.file 6 "Drivers/VL53L0X/core/inc/vl53l0x_device.h"
 3457              		.file 7 "Drivers/VL53L0X/core/inc/vl53l0x_def.h"
 3458              		.file 8 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/stm32l4p5xx.h"
 3459              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 3460              		.file 10 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_dma.h"
 3461              		.file 11 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_i2c.h"
 3462              		.file 12 "Drivers/VL53L0X/platform/inc/vl53l0x_platform.h"
 3463              		.file 13 "Drivers/VL53L0X/core/inc/vl53l0x_api.h"
 3464              		.file 14 "Drivers/VL53L0X/core/inc/vl53l0x_api_core.h"
 3465              		.file 15 "c:\\users\\morroway\\appdata\\roaming\\code\\user\\globalstorage\\bmd.stm32-for-vscode\\
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 85


DEFINED SYMBOLS
                            *ABS*:0000000000000000 vl53l0x_api_calibration.c
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:24     .data.refArrayQuadrants:0000000000000000 refArrayQuadrants
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:21     .data.refArrayQuadrants:0000000000000000 $d
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:30     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:36     .text.VL53L0X_perform_xtalk_calibration:0000000000000000 VL53L0X_perform_xtalk_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:315    .text.VL53L0X_perform_offset_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:321    .text.VL53L0X_perform_offset_calibration:0000000000000000 VL53L0X_perform_offset_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:556    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:562    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_set_offset_calibration_data_micro_meter
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:660    .text.VL53L0X_set_offset_calibration_data_micro_meter:0000000000000084 $d
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:667    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:673    .text.VL53L0X_get_offset_calibration_data_micro_meter:0000000000000000 VL53L0X_get_offset_calibration_data_micro_meter
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:764    .text.VL53L0X_apply_offset_adjustment:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:770    .text.VL53L0X_apply_offset_adjustment:0000000000000000 VL53L0X_apply_offset_adjustment
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:851    .text.get_next_good_spad:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:857    .text.get_next_good_spad:0000000000000000 get_next_good_spad
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:998    .text.is_aperture:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1004   .text.is_aperture:0000000000000000 is_aperture
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1053   .text.is_aperture:0000000000000030 $d
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1058   .text.enable_spad_bit:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1064   .text.enable_spad_bit:0000000000000000 enable_spad_bit
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1147   .text.count_enabled_spads:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1153   .text.count_enabled_spads:0000000000000000 count_enabled_spads
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1349   .text.set_ref_spad_map:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1355   .text.set_ref_spad_map:0000000000000000 set_ref_spad_map
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1393   .text.get_ref_spad_map:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1399   .text.get_ref_spad_map:0000000000000000 get_ref_spad_map
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1437   .text.enable_ref_spads:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1443   .text.enable_ref_spads:0000000000000000 enable_ref_spads
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1613   .text.perform_ref_signal_measurement:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1619   .text.perform_ref_signal_measurement:0000000000000000 perform_ref_signal_measurement
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1740   .text.VL53L0X_perform_ref_spad_management:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:1746   .text.VL53L0X_perform_ref_spad_management:0000000000000000 VL53L0X_perform_ref_spad_management
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3245   .text.VL53L0X_perform_ref_calibration:0000000000000000 VL53L0X_perform_ref_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2350   .text.VL53L0X_set_reference_spads:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2356   .text.VL53L0X_set_reference_spads:0000000000000000 VL53L0X_set_reference_spads
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2553   .text.VL53L0X_get_reference_spads:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2559   .text.VL53L0X_get_reference_spads:0000000000000000 VL53L0X_get_reference_spads
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2674   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2680   .text.VL53L0X_perform_single_ref_calibration:0000000000000000 VL53L0X_perform_single_ref_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2762   .text.VL53L0X_ref_calibration_io:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2768   .text.VL53L0X_ref_calibration_io:0000000000000000 VL53L0X_ref_calibration_io
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2958   .text.VL53L0X_perform_vhv_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:2964   .text.VL53L0X_perform_vhv_calibration:0000000000000000 VL53L0X_perform_vhv_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3100   .text.VL53L0X_perform_phase_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3106   .text.VL53L0X_perform_phase_calibration:0000000000000000 VL53L0X_perform_phase_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3239   .text.VL53L0X_perform_ref_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3329   .text.VL53L0X_set_ref_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3335   .text.VL53L0X_set_ref_calibration:0000000000000000 VL53L0X_set_ref_calibration
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3388   .text.VL53L0X_get_ref_calibration:0000000000000000 $t
C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s:3394   .text.VL53L0X_get_ref_calibration:0000000000000000 VL53L0X_get_ref_calibration

UNDEFINED SYMBOLS
VL53L0X_SetXTalkCompensationEnable
VL53L0X_SetLimitCheckEnable
VL53L0X_PerformSingleRangingMeasurement
ARM GAS  C:\Users\Morroway\AppData\Local\Temp\ccMUc9Th.s 			page 86


VL53L0X_SetXTalkCompensationRateMegaCps
VL53L0X_SetOffsetCalibrationDataMicroMeter
VL53L0X_GetSequenceStepEnable
VL53L0X_SetSequenceStepEnable
VL53L0X_WrWord
VL53L0X_RdWord
VL53L0X_get_info_from_device
VL53L0X_GetOffsetCalibrationDataMicroMeter
VL53L0X_WriteMulti
VL53L0X_ReadMulti
VL53L0X_WrByte
memcpy
VL53L0X_measurement_poll_for_completion
VL53L0X_ClearInterruptMask
VL53L0X_RdByte
VL53L0X_UpdateByte
